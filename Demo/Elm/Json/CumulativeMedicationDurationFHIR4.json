{
   "library" : {
      "annotation" : [ {
         "translatorVersion" : "2.2.0",
         "translatorOptions" : "EnableAnnotations,EnableLocators,EnableResultTypes",
         "type" : "CqlToElmInfo"
      }, {
         "type" : "Annotation",
         "s" : {
            "r" : "657",
            "s" : [ {
               "value" : [ "","library CumulativeMedicationDurationFHIR4 version '1.0.000'" ]
            } ]
         }
      } ],
      "identifier" : {
         "id" : "CumulativeMedicationDurationFHIR4",
         "version" : "1.0.000"
      },
      "schemaIdentifier" : {
         "id" : "urn:hl7-org:elm",
         "version" : "r1"
      },
      "usings" : {
         "def" : [ {
            "localIdentifier" : "System",
            "uri" : "urn:hl7-org:elm-types:r1"
         }, {
            "localId" : "1",
            "locator" : "3:1-3:26",
            "localIdentifier" : "FHIR",
            "uri" : "http://hl7.org/fhir",
            "version" : "4.0.1",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "1",
                  "s" : [ {
                     "value" : [ "","using " ]
                  }, {
                     "s" : [ {
                        "value" : [ "FHIR" ]
                     } ]
                  }, {
                     "value" : [ " version ","'4.0.1'" ]
                  } ]
               }
            } ]
         } ]
      },
      "includes" : {
         "def" : [ {
            "localId" : "2",
            "locator" : "5:1-5:56",
            "localIdentifier" : "FHIRHelpers",
            "path" : "FHIRHelpers",
            "version" : "4.0.001",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "2",
                  "s" : [ {
                     "value" : [ "","include " ]
                  }, {
                     "s" : [ {
                        "value" : [ "FHIRHelpers" ]
                     } ]
                  }, {
                     "value" : [ " version ","'4.0.001'"," called ","FHIRHelpers" ]
                  } ]
               }
            } ]
         } ]
      },
      "parameters" : {
         "def" : [ {
            "localId" : "59",
            "locator" : "37:1-37:47",
            "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
            "name" : "ErrorLevel",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "59",
                  "s" : [ {
                     "value" : [ "","parameter ","\"ErrorLevel\""," " ]
                  }, {
                     "r" : "58",
                     "s" : [ {
                        "value" : [ "String" ]
                     } ]
                  }, {
                     "value" : [ " default " ]
                  }, {
                     "r" : "57",
                     "s" : [ {
                        "value" : [ "'Warning'" ]
                     } ]
                  } ]
               }
            } ],
            "default" : {
               "localId" : "57",
               "locator" : "37:39-37:47",
               "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
               "valueType" : "{urn:hl7-org:elm-types:r1}String",
               "value" : "Warning",
               "type" : "Literal"
            },
            "parameterTypeSpecifier" : {
               "localId" : "58",
               "locator" : "37:24-37:29",
               "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
               "name" : "{urn:hl7-org:elm-types:r1}String",
               "type" : "NamedTypeSpecifier"
            }
         } ]
      },
      "codeSystems" : {
         "def" : [ {
            "localId" : "3",
            "locator" : "7:1-7:82",
            "resultTypeName" : "{urn:hl7-org:elm-types:r1}CodeSystem",
            "name" : "V3TimingEvent",
            "id" : "http://terminology.hl7.org/CodeSystem/v3-TimingEvent",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "3",
                  "s" : [ {
                     "value" : [ "","codesystem ","\"V3TimingEvent\"",": ","'http://terminology.hl7.org/CodeSystem/v3-TimingEvent'" ]
                  } ]
               }
            } ]
         }, {
            "localId" : "4",
            "locator" : "8:1-8:60",
            "resultTypeName" : "{urn:hl7-org:elm-types:r1}CodeSystem",
            "name" : "EventTiming",
            "id" : "http://hl7.org/fhir/event-timing",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "4",
                  "s" : [ {
                     "value" : [ "","codesystem ","\"EventTiming\"",": ","'http://hl7.org/fhir/event-timing'" ]
                  } ]
               }
            } ]
         } ]
      },
      "codes" : {
         "def" : [ {
            "localId" : "6",
            "locator" : "10:1-10:49",
            "resultTypeName" : "{urn:hl7-org:elm-types:r1}Code",
            "name" : "AC",
            "id" : "AC",
            "display" : "AC",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "6",
                  "s" : [ {
                     "value" : [ "","code ","\"AC\"",": ","'AC'"," from " ]
                  }, {
                     "r" : "5",
                     "s" : [ {
                        "value" : [ "\"V3TimingEvent\"" ]
                     } ]
                  }, {
                     "value" : [ " display ","'AC'" ]
                  } ]
               }
            } ],
            "codeSystem" : {
               "localId" : "5",
               "locator" : "10:22-10:36",
               "resultTypeName" : "{urn:hl7-org:elm-types:r1}CodeSystem",
               "name" : "V3TimingEvent"
            }
         }, {
            "localId" : "8",
            "locator" : "11:1-11:52",
            "resultTypeName" : "{urn:hl7-org:elm-types:r1}Code",
            "name" : "ACD",
            "id" : "ACD",
            "display" : "ACD",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "8",
                  "s" : [ {
                     "value" : [ "","code ","\"ACD\"",": ","'ACD'"," from " ]
                  }, {
                     "r" : "7",
                     "s" : [ {
                        "value" : [ "\"V3TimingEvent\"" ]
                     } ]
                  }, {
                     "value" : [ " display ","'ACD'" ]
                  } ]
               }
            } ],
            "codeSystem" : {
               "localId" : "7",
               "locator" : "11:24-11:38",
               "resultTypeName" : "{urn:hl7-org:elm-types:r1}CodeSystem",
               "name" : "V3TimingEvent"
            }
         }, {
            "localId" : "10",
            "locator" : "12:1-12:52",
            "resultTypeName" : "{urn:hl7-org:elm-types:r1}Code",
            "name" : "ACM",
            "id" : "ACM",
            "display" : "ACM",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "10",
                  "s" : [ {
                     "value" : [ "","code ","\"ACM\"",": ","'ACM'"," from " ]
                  }, {
                     "r" : "9",
                     "s" : [ {
                        "value" : [ "\"V3TimingEvent\"" ]
                     } ]
                  }, {
                     "value" : [ " display ","'ACM'" ]
                  } ]
               }
            } ],
            "codeSystem" : {
               "localId" : "9",
               "locator" : "12:24-12:38",
               "resultTypeName" : "{urn:hl7-org:elm-types:r1}CodeSystem",
               "name" : "V3TimingEvent"
            }
         }, {
            "localId" : "12",
            "locator" : "13:1-13:52",
            "resultTypeName" : "{urn:hl7-org:elm-types:r1}Code",
            "name" : "ACV",
            "id" : "ACV",
            "display" : "ACV",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "12",
                  "s" : [ {
                     "value" : [ "","code ","\"ACV\"",": ","'ACV'"," from " ]
                  }, {
                     "r" : "11",
                     "s" : [ {
                        "value" : [ "\"V3TimingEvent\"" ]
                     } ]
                  }, {
                     "value" : [ " display ","'ACV'" ]
                  } ]
               }
            } ],
            "codeSystem" : {
               "localId" : "11",
               "locator" : "13:24-13:38",
               "resultTypeName" : "{urn:hl7-org:elm-types:r1}CodeSystem",
               "name" : "V3TimingEvent"
            }
         }, {
            "localId" : "14",
            "locator" : "14:1-14:50",
            "resultTypeName" : "{urn:hl7-org:elm-types:r1}Code",
            "name" : "AFT",
            "id" : "AFT",
            "display" : "AFT",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "14",
                  "s" : [ {
                     "value" : [ "","code ","\"AFT\"",": ","'AFT'"," from " ]
                  }, {
                     "r" : "13",
                     "s" : [ {
                        "value" : [ "\"EventTiming\"" ]
                     } ]
                  }, {
                     "value" : [ " display ","'AFT'" ]
                  } ]
               }
            } ],
            "codeSystem" : {
               "localId" : "13",
               "locator" : "14:24-14:36",
               "resultTypeName" : "{urn:hl7-org:elm-types:r1}CodeSystem",
               "name" : "EventTiming"
            }
         }, {
            "localId" : "16",
            "locator" : "15:1-15:68",
            "resultTypeName" : "{urn:hl7-org:elm-types:r1}Code",
            "name" : "AFT.early",
            "id" : "AFT.early",
            "display" : "AFT.early",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "16",
                  "s" : [ {
                     "value" : [ "","code ","\"AFT.early\"",": ","'AFT.early'"," from " ]
                  }, {
                     "r" : "15",
                     "s" : [ {
                        "value" : [ "\"EventTiming\"" ]
                     } ]
                  }, {
                     "value" : [ " display ","'AFT.early'" ]
                  } ]
               }
            } ],
            "codeSystem" : {
               "localId" : "15",
               "locator" : "15:36-15:48",
               "resultTypeName" : "{urn:hl7-org:elm-types:r1}CodeSystem",
               "name" : "EventTiming"
            }
         }, {
            "localId" : "18",
            "locator" : "16:1-16:65",
            "resultTypeName" : "{urn:hl7-org:elm-types:r1}Code",
            "name" : "AFT.late",
            "id" : "AFT.late",
            "display" : "AFT.late",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "18",
                  "s" : [ {
                     "value" : [ "","code ","\"AFT.late\"",": ","'AFT.late'"," from " ]
                  }, {
                     "r" : "17",
                     "s" : [ {
                        "value" : [ "\"EventTiming\"" ]
                     } ]
                  }, {
                     "value" : [ " display ","'AFT.late'" ]
                  } ]
               }
            } ],
            "codeSystem" : {
               "localId" : "17",
               "locator" : "16:34-16:46",
               "resultTypeName" : "{urn:hl7-org:elm-types:r1}CodeSystem",
               "name" : "EventTiming"
            }
         }, {
            "localId" : "20",
            "locator" : "17:1-17:46",
            "resultTypeName" : "{urn:hl7-org:elm-types:r1}Code",
            "name" : "C",
            "id" : "C",
            "display" : "C",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "20",
                  "s" : [ {
                     "value" : [ "","code ","\"C\"",": ","'C'"," from " ]
                  }, {
                     "r" : "19",
                     "s" : [ {
                        "value" : [ "\"V3TimingEvent\"" ]
                     } ]
                  }, {
                     "value" : [ " display ","'C'" ]
                  } ]
               }
            } ],
            "codeSystem" : {
               "localId" : "19",
               "locator" : "17:20-17:34",
               "resultTypeName" : "{urn:hl7-org:elm-types:r1}CodeSystem",
               "name" : "V3TimingEvent"
            }
         }, {
            "localId" : "22",
            "locator" : "18:1-18:49",
            "resultTypeName" : "{urn:hl7-org:elm-types:r1}Code",
            "name" : "CD",
            "id" : "CD",
            "display" : "CD",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "22",
                  "s" : [ {
                     "value" : [ "","code ","\"CD\"",": ","'CD'"," from " ]
                  }, {
                     "r" : "21",
                     "s" : [ {
                        "value" : [ "\"V3TimingEvent\"" ]
                     } ]
                  }, {
                     "value" : [ " display ","'CD'" ]
                  } ]
               }
            } ],
            "codeSystem" : {
               "localId" : "21",
               "locator" : "18:22-18:36",
               "resultTypeName" : "{urn:hl7-org:elm-types:r1}CodeSystem",
               "name" : "V3TimingEvent"
            }
         }, {
            "localId" : "24",
            "locator" : "19:1-19:49",
            "resultTypeName" : "{urn:hl7-org:elm-types:r1}Code",
            "name" : "CM",
            "id" : "CM",
            "display" : "CM",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "24",
                  "s" : [ {
                     "value" : [ "","code ","\"CM\"",": ","'CM'"," from " ]
                  }, {
                     "r" : "23",
                     "s" : [ {
                        "value" : [ "\"V3TimingEvent\"" ]
                     } ]
                  }, {
                     "value" : [ " display ","'CM'" ]
                  } ]
               }
            } ],
            "codeSystem" : {
               "localId" : "23",
               "locator" : "19:22-19:36",
               "resultTypeName" : "{urn:hl7-org:elm-types:r1}CodeSystem",
               "name" : "V3TimingEvent"
            }
         }, {
            "localId" : "26",
            "locator" : "20:1-20:49",
            "resultTypeName" : "{urn:hl7-org:elm-types:r1}Code",
            "name" : "CV",
            "id" : "CV",
            "display" : "CV",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "26",
                  "s" : [ {
                     "value" : [ "","code ","\"CV\"",": ","'CV'"," from " ]
                  }, {
                     "r" : "25",
                     "s" : [ {
                        "value" : [ "\"V3TimingEvent\"" ]
                     } ]
                  }, {
                     "value" : [ " display ","'CV'" ]
                  } ]
               }
            } ],
            "codeSystem" : {
               "localId" : "25",
               "locator" : "20:22-20:36",
               "resultTypeName" : "{urn:hl7-org:elm-types:r1}CodeSystem",
               "name" : "V3TimingEvent"
            }
         }, {
            "localId" : "28",
            "locator" : "21:1-21:50",
            "resultTypeName" : "{urn:hl7-org:elm-types:r1}Code",
            "name" : "EVE",
            "id" : "EVE",
            "display" : "EVE",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "28",
                  "s" : [ {
                     "value" : [ "","code ","\"EVE\"",": ","'EVE'"," from " ]
                  }, {
                     "r" : "27",
                     "s" : [ {
                        "value" : [ "\"EventTiming\"" ]
                     } ]
                  }, {
                     "value" : [ " display ","'EVE'" ]
                  } ]
               }
            } ],
            "codeSystem" : {
               "localId" : "27",
               "locator" : "21:24-21:36",
               "resultTypeName" : "{urn:hl7-org:elm-types:r1}CodeSystem",
               "name" : "EventTiming"
            }
         }, {
            "localId" : "30",
            "locator" : "22:1-22:68",
            "resultTypeName" : "{urn:hl7-org:elm-types:r1}Code",
            "name" : "EVE.early",
            "id" : "EVE.early",
            "display" : "EVE.early",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "30",
                  "s" : [ {
                     "value" : [ "","code ","\"EVE.early\"",": ","'EVE.early'"," from " ]
                  }, {
                     "r" : "29",
                     "s" : [ {
                        "value" : [ "\"EventTiming\"" ]
                     } ]
                  }, {
                     "value" : [ " display ","'EVE.early'" ]
                  } ]
               }
            } ],
            "codeSystem" : {
               "localId" : "29",
               "locator" : "22:36-22:48",
               "resultTypeName" : "{urn:hl7-org:elm-types:r1}CodeSystem",
               "name" : "EventTiming"
            }
         }, {
            "localId" : "32",
            "locator" : "23:1-23:65",
            "resultTypeName" : "{urn:hl7-org:elm-types:r1}Code",
            "name" : "EVE.late",
            "id" : "EVE.late",
            "display" : "EVE.late",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "32",
                  "s" : [ {
                     "value" : [ "","code ","\"EVE.late\"",": ","'EVE.late'"," from " ]
                  }, {
                     "r" : "31",
                     "s" : [ {
                        "value" : [ "\"EventTiming\"" ]
                     } ]
                  }, {
                     "value" : [ " display ","'EVE.late'" ]
                  } ]
               }
            } ],
            "codeSystem" : {
               "localId" : "31",
               "locator" : "23:34-23:46",
               "resultTypeName" : "{urn:hl7-org:elm-types:r1}CodeSystem",
               "name" : "EventTiming"
            }
         }, {
            "localId" : "34",
            "locator" : "24:1-24:49",
            "resultTypeName" : "{urn:hl7-org:elm-types:r1}Code",
            "name" : "HS",
            "id" : "HS",
            "display" : "HS",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "34",
                  "s" : [ {
                     "value" : [ "","code ","\"HS\"",": ","'HS'"," from " ]
                  }, {
                     "r" : "33",
                     "s" : [ {
                        "value" : [ "\"V3TimingEvent\"" ]
                     } ]
                  }, {
                     "value" : [ " display ","'HS'" ]
                  } ]
               }
            } ],
            "codeSystem" : {
               "localId" : "33",
               "locator" : "24:22-24:36",
               "resultTypeName" : "{urn:hl7-org:elm-types:r1}CodeSystem",
               "name" : "V3TimingEvent"
            }
         }, {
            "localId" : "36",
            "locator" : "25:1-25:53",
            "resultTypeName" : "{urn:hl7-org:elm-types:r1}Code",
            "name" : "MORN",
            "id" : "MORN",
            "display" : "MORN",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "36",
                  "s" : [ {
                     "value" : [ "","code ","\"MORN\"",": ","'MORN'"," from " ]
                  }, {
                     "r" : "35",
                     "s" : [ {
                        "value" : [ "\"EventTiming\"" ]
                     } ]
                  }, {
                     "value" : [ " display ","'MORN'" ]
                  } ]
               }
            } ],
            "codeSystem" : {
               "localId" : "35",
               "locator" : "25:26-25:38",
               "resultTypeName" : "{urn:hl7-org:elm-types:r1}CodeSystem",
               "name" : "EventTiming"
            }
         }, {
            "localId" : "38",
            "locator" : "26:1-26:71",
            "resultTypeName" : "{urn:hl7-org:elm-types:r1}Code",
            "name" : "MORN.early",
            "id" : "MORN.early",
            "display" : "MORN.early",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "38",
                  "s" : [ {
                     "value" : [ "","code ","\"MORN.early\"",": ","'MORN.early'"," from " ]
                  }, {
                     "r" : "37",
                     "s" : [ {
                        "value" : [ "\"EventTiming\"" ]
                     } ]
                  }, {
                     "value" : [ " display ","'MORN.early'" ]
                  } ]
               }
            } ],
            "codeSystem" : {
               "localId" : "37",
               "locator" : "26:38-26:50",
               "resultTypeName" : "{urn:hl7-org:elm-types:r1}CodeSystem",
               "name" : "EventTiming"
            }
         }, {
            "localId" : "40",
            "locator" : "27:1-27:68",
            "resultTypeName" : "{urn:hl7-org:elm-types:r1}Code",
            "name" : "MORN.late",
            "id" : "MORN.late",
            "display" : "MORN.late",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "40",
                  "s" : [ {
                     "value" : [ "","code ","\"MORN.late\"",": ","'MORN.late'"," from " ]
                  }, {
                     "r" : "39",
                     "s" : [ {
                        "value" : [ "\"EventTiming\"" ]
                     } ]
                  }, {
                     "value" : [ " display ","'MORN.late'" ]
                  } ]
               }
            } ],
            "codeSystem" : {
               "localId" : "39",
               "locator" : "27:36-27:48",
               "resultTypeName" : "{urn:hl7-org:elm-types:r1}CodeSystem",
               "name" : "EventTiming"
            }
         }, {
            "localId" : "42",
            "locator" : "28:1-28:56",
            "resultTypeName" : "{urn:hl7-org:elm-types:r1}Code",
            "name" : "NIGHT",
            "id" : "NIGHT",
            "display" : "NIGHT",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "42",
                  "s" : [ {
                     "value" : [ "","code ","\"NIGHT\"",": ","'NIGHT'"," from " ]
                  }, {
                     "r" : "41",
                     "s" : [ {
                        "value" : [ "\"EventTiming\"" ]
                     } ]
                  }, {
                     "value" : [ " display ","'NIGHT'" ]
                  } ]
               }
            } ],
            "codeSystem" : {
               "localId" : "41",
               "locator" : "28:28-28:40",
               "resultTypeName" : "{urn:hl7-org:elm-types:r1}CodeSystem",
               "name" : "EventTiming"
            }
         }, {
            "localId" : "44",
            "locator" : "29:1-29:53",
            "resultTypeName" : "{urn:hl7-org:elm-types:r1}Code",
            "name" : "NOON",
            "id" : "NOON",
            "display" : "NOON",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "44",
                  "s" : [ {
                     "value" : [ "","code ","\"NOON\"",": ","'NOON'"," from " ]
                  }, {
                     "r" : "43",
                     "s" : [ {
                        "value" : [ "\"EventTiming\"" ]
                     } ]
                  }, {
                     "value" : [ " display ","'NOON'" ]
                  } ]
               }
            } ],
            "codeSystem" : {
               "localId" : "43",
               "locator" : "29:26-29:38",
               "resultTypeName" : "{urn:hl7-org:elm-types:r1}CodeSystem",
               "name" : "EventTiming"
            }
         }, {
            "localId" : "46",
            "locator" : "30:1-30:49",
            "resultTypeName" : "{urn:hl7-org:elm-types:r1}Code",
            "name" : "PC",
            "id" : "PC",
            "display" : "PC",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "46",
                  "s" : [ {
                     "value" : [ "","code ","\"PC\"",": ","'PC'"," from " ]
                  }, {
                     "r" : "45",
                     "s" : [ {
                        "value" : [ "\"V3TimingEvent\"" ]
                     } ]
                  }, {
                     "value" : [ " display ","'PC'" ]
                  } ]
               }
            } ],
            "codeSystem" : {
               "localId" : "45",
               "locator" : "30:22-30:36",
               "resultTypeName" : "{urn:hl7-org:elm-types:r1}CodeSystem",
               "name" : "V3TimingEvent"
            }
         }, {
            "localId" : "48",
            "locator" : "31:1-31:52",
            "resultTypeName" : "{urn:hl7-org:elm-types:r1}Code",
            "name" : "PCD",
            "id" : "PCD",
            "display" : "PCD",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "48",
                  "s" : [ {
                     "value" : [ "","code ","\"PCD\"",": ","'PCD'"," from " ]
                  }, {
                     "r" : "47",
                     "s" : [ {
                        "value" : [ "\"V3TimingEvent\"" ]
                     } ]
                  }, {
                     "value" : [ " display ","'PCD'" ]
                  } ]
               }
            } ],
            "codeSystem" : {
               "localId" : "47",
               "locator" : "31:24-31:38",
               "resultTypeName" : "{urn:hl7-org:elm-types:r1}CodeSystem",
               "name" : "V3TimingEvent"
            }
         }, {
            "localId" : "50",
            "locator" : "32:1-32:52",
            "resultTypeName" : "{urn:hl7-org:elm-types:r1}Code",
            "name" : "PCM",
            "id" : "PCM",
            "display" : "PCM",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "50",
                  "s" : [ {
                     "value" : [ "","code ","\"PCM\"",": ","'PCM'"," from " ]
                  }, {
                     "r" : "49",
                     "s" : [ {
                        "value" : [ "\"V3TimingEvent\"" ]
                     } ]
                  }, {
                     "value" : [ " display ","'PCM'" ]
                  } ]
               }
            } ],
            "codeSystem" : {
               "localId" : "49",
               "locator" : "32:24-32:38",
               "resultTypeName" : "{urn:hl7-org:elm-types:r1}CodeSystem",
               "name" : "V3TimingEvent"
            }
         }, {
            "localId" : "52",
            "locator" : "33:1-33:52",
            "resultTypeName" : "{urn:hl7-org:elm-types:r1}Code",
            "name" : "PCV",
            "id" : "PCV",
            "display" : "PCV",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "52",
                  "s" : [ {
                     "value" : [ "","code ","\"PCV\"",": ","'PCV'"," from " ]
                  }, {
                     "r" : "51",
                     "s" : [ {
                        "value" : [ "\"V3TimingEvent\"" ]
                     } ]
                  }, {
                     "value" : [ " display ","'PCV'" ]
                  } ]
               }
            } ],
            "codeSystem" : {
               "localId" : "51",
               "locator" : "33:24-33:38",
               "resultTypeName" : "{urn:hl7-org:elm-types:r1}CodeSystem",
               "name" : "V3TimingEvent"
            }
         }, {
            "localId" : "54",
            "locator" : "34:1-34:50",
            "resultTypeName" : "{urn:hl7-org:elm-types:r1}Code",
            "name" : "PHS",
            "id" : "PHS",
            "display" : "PHS",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "54",
                  "s" : [ {
                     "value" : [ "","code ","\"PHS\"",": ","'PHS'"," from " ]
                  }, {
                     "r" : "53",
                     "s" : [ {
                        "value" : [ "\"EventTiming\"" ]
                     } ]
                  }, {
                     "value" : [ " display ","'PHS'" ]
                  } ]
               }
            } ],
            "codeSystem" : {
               "localId" : "53",
               "locator" : "34:24-34:36",
               "resultTypeName" : "{urn:hl7-org:elm-types:r1}CodeSystem",
               "name" : "EventTiming"
            }
         }, {
            "localId" : "56",
            "locator" : "35:1-35:55",
            "resultTypeName" : "{urn:hl7-org:elm-types:r1}Code",
            "name" : "WAKE",
            "id" : "WAKE",
            "display" : "WAKE",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "56",
                  "s" : [ {
                     "value" : [ "","code ","\"WAKE\"",": ","'WAKE'"," from " ]
                  }, {
                     "r" : "55",
                     "s" : [ {
                        "value" : [ "\"V3TimingEvent\"" ]
                     } ]
                  }, {
                     "value" : [ " display ","'WAKE'" ]
                  } ]
               }
            } ],
            "codeSystem" : {
               "localId" : "55",
               "locator" : "35:26-35:40",
               "resultTypeName" : "{urn:hl7-org:elm-types:r1}CodeSystem",
               "name" : "V3TimingEvent"
            }
         } ]
      },
      "contexts" : {
         "def" : [ {
            "locator" : "39:1-39:15",
            "name" : "Patient"
         } ]
      },
      "statements" : {
         "def" : [ {
            "locator" : "39:1-39:15",
            "name" : "Patient",
            "context" : "Patient",
            "expression" : {
               "type" : "SingletonFrom",
               "operand" : {
                  "locator" : "39:1-39:15",
                  "dataType" : "{http://hl7.org/fhir}Patient",
                  "templateId" : "http://hl7.org/fhir/StructureDefinition/Patient",
                  "type" : "Retrieve"
               }
            }
         }, {
            "localId" : "302",
            "locator" : "42:1-66:5",
            "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
            "name" : "ToDaily",
            "context" : "Patient",
            "accessLevel" : "Public",
            "type" : "FunctionDef",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "302",
                  "s" : [ {
                     "value" : [ "/*Calculates daily frequency given frequency within a period*/\n","define function ","\"ToDaily\"","(","frequency"," " ]
                  }, {
                     "r" : "60",
                     "s" : [ {
                        "value" : [ "System",".","Integer" ]
                     } ]
                  }, {
                     "value" : [ ", ","period"," " ]
                  }, {
                     "r" : "61",
                     "s" : [ {
                        "value" : [ "System",".","Quantity" ]
                     } ]
                  }, {
                     "value" : [ " ):\n  " ]
                  }, {
                     "r" : "301",
                     "s" : [ {
                        "r" : "301",
                        "s" : [ {
                           "value" : [ "case " ]
                        }, {
                           "r" : "63",
                           "s" : [ {
                              "r" : "62",
                              "s" : [ {
                                 "value" : [ "period" ]
                              } ]
                           }, {
                              "value" : [ "." ]
                           }, {
                              "r" : "63",
                              "s" : [ {
                                 "value" : [ "unit" ]
                              } ]
                           } ]
                        }, {
                           "value" : [ "\n    " ]
                        }, {
                           "r" : "71",
                           "s" : [ {
                              "value" : [ "when " ]
                           }, {
                              "r" : "64",
                              "s" : [ {
                                 "value" : [ "'h'" ]
                              } ]
                           }, {
                              "value" : [ " then " ]
                           }, {
                              "r" : "70",
                              "s" : [ {
                                 "r" : "65",
                                 "s" : [ {
                                    "value" : [ "frequency" ]
                                 } ]
                              }, {
                                 "value" : [ " * " ]
                              }, {
                                 "r" : "69",
                                 "s" : [ {
                                    "value" : [ "(" ]
                                 }, {
                                    "r" : "69",
                                    "s" : [ {
                                       "r" : "66",
                                       "value" : [ "24.0"," / " ]
                                    }, {
                                       "r" : "68",
                                       "s" : [ {
                                          "r" : "67",
                                          "s" : [ {
                                             "value" : [ "period" ]
                                          } ]
                                       }, {
                                          "value" : [ "." ]
                                       }, {
                                          "r" : "68",
                                          "s" : [ {
                                             "value" : [ "value" ]
                                          } ]
                                       } ]
                                    } ]
                                 }, {
                                    "value" : [ ")" ]
                                 } ]
                              } ]
                           } ]
                        }, {
                           "value" : [ "\n    " ]
                        }, {
                           "r" : "81",
                           "s" : [ {
                              "value" : [ "when " ]
                           }, {
                              "r" : "72",
                              "s" : [ {
                                 "value" : [ "'min'" ]
                              } ]
                           }, {
                              "value" : [ " then " ]
                           }, {
                              "r" : "80",
                              "s" : [ {
                                 "r" : "78",
                                 "s" : [ {
                                    "r" : "73",
                                    "s" : [ {
                                       "value" : [ "frequency" ]
                                    } ]
                                 }, {
                                    "value" : [ " * " ]
                                 }, {
                                    "r" : "77",
                                    "s" : [ {
                                       "value" : [ "(" ]
                                    }, {
                                       "r" : "77",
                                       "s" : [ {
                                          "r" : "74",
                                          "value" : [ "24.0"," / " ]
                                       }, {
                                          "r" : "76",
                                          "s" : [ {
                                             "r" : "75",
                                             "s" : [ {
                                                "value" : [ "period" ]
                                             } ]
                                          }, {
                                             "value" : [ "." ]
                                          }, {
                                             "r" : "76",
                                             "s" : [ {
                                                "value" : [ "value" ]
                                             } ]
                                          } ]
                                       } ]
                                    }, {
                                       "value" : [ ")" ]
                                    } ]
                                 } ]
                              }, {
                                 "r" : "79",
                                 "value" : [ " * ","60" ]
                              } ]
                           } ]
                        }, {
                           "value" : [ "\n    " ]
                        }, {
                           "r" : "93",
                           "s" : [ {
                              "value" : [ "when " ]
                           }, {
                              "r" : "82",
                              "s" : [ {
                                 "value" : [ "'s'" ]
                              } ]
                           }, {
                              "value" : [ " then " ]
                           }, {
                              "r" : "92",
                              "s" : [ {
                                 "r" : "90",
                                 "s" : [ {
                                    "r" : "88",
                                    "s" : [ {
                                       "r" : "83",
                                       "s" : [ {
                                          "value" : [ "frequency" ]
                                       } ]
                                    }, {
                                       "value" : [ " * " ]
                                    }, {
                                       "r" : "87",
                                       "s" : [ {
                                          "value" : [ "(" ]
                                       }, {
                                          "r" : "87",
                                          "s" : [ {
                                             "r" : "84",
                                             "value" : [ "24.0"," / " ]
                                          }, {
                                             "r" : "86",
                                             "s" : [ {
                                                "r" : "85",
                                                "s" : [ {
                                                   "value" : [ "period" ]
                                                } ]
                                             }, {
                                                "value" : [ "." ]
                                             }, {
                                                "r" : "86",
                                                "s" : [ {
                                                   "value" : [ "value" ]
                                                } ]
                                             } ]
                                          } ]
                                       }, {
                                          "value" : [ ")" ]
                                       } ]
                                    } ]
                                 }, {
                                    "r" : "89",
                                    "value" : [ " * ","60" ]
                                 } ]
                              }, {
                                 "r" : "91",
                                 "value" : [ " * ","60" ]
                              } ]
                           } ]
                        }, {
                           "value" : [ "\n    " ]
                        }, {
                           "r" : "103",
                           "s" : [ {
                              "value" : [ "when " ]
                           }, {
                              "r" : "94",
                              "s" : [ {
                                 "value" : [ "'d'" ]
                              } ]
                           }, {
                              "value" : [ " then " ]
                           }, {
                              "r" : "102",
                              "s" : [ {
                                 "r" : "100",
                                 "s" : [ {
                                    "r" : "95",
                                    "s" : [ {
                                       "value" : [ "frequency" ]
                                    } ]
                                 }, {
                                    "value" : [ " * " ]
                                 }, {
                                    "r" : "99",
                                    "s" : [ {
                                       "value" : [ "(" ]
                                    }, {
                                       "r" : "99",
                                       "s" : [ {
                                          "r" : "96",
                                          "value" : [ "24.0"," / " ]
                                       }, {
                                          "r" : "98",
                                          "s" : [ {
                                             "r" : "97",
                                             "s" : [ {
                                                "value" : [ "period" ]
                                             } ]
                                          }, {
                                             "value" : [ "." ]
                                          }, {
                                             "r" : "98",
                                             "s" : [ {
                                                "value" : [ "value" ]
                                             } ]
                                          } ]
                                       } ]
                                    }, {
                                       "value" : [ ")" ]
                                    } ]
                                 } ]
                              }, {
                                 "r" : "101",
                                 "value" : [ " / ","24" ]
                              } ]
                           } ]
                        }, {
                           "value" : [ "\n    " ]
                        }, {
                           "r" : "115",
                           "s" : [ {
                              "value" : [ "when " ]
                           }, {
                              "r" : "104",
                              "s" : [ {
                                 "value" : [ "'wk'" ]
                              } ]
                           }, {
                              "value" : [ " then " ]
                           }, {
                              "r" : "114",
                              "s" : [ {
                                 "r" : "110",
                                 "s" : [ {
                                    "r" : "105",
                                    "s" : [ {
                                       "value" : [ "frequency" ]
                                    } ]
                                 }, {
                                    "value" : [ " * " ]
                                 }, {
                                    "r" : "109",
                                    "s" : [ {
                                       "value" : [ "(" ]
                                    }, {
                                       "r" : "109",
                                       "s" : [ {
                                          "r" : "106",
                                          "value" : [ "24.0"," / " ]
                                       }, {
                                          "r" : "108",
                                          "s" : [ {
                                             "r" : "107",
                                             "s" : [ {
                                                "value" : [ "period" ]
                                             } ]
                                          }, {
                                             "value" : [ "." ]
                                          }, {
                                             "r" : "108",
                                             "s" : [ {
                                                "value" : [ "value" ]
                                             } ]
                                          } ]
                                       } ]
                                    }, {
                                       "value" : [ ")" ]
                                    } ]
                                 } ]
                              }, {
                                 "value" : [ " / " ]
                              }, {
                                 "r" : "113",
                                 "s" : [ {
                                    "value" : [ "(" ]
                                 }, {
                                    "r" : "113",
                                    "s" : [ {
                                       "r" : "111",
                                       "value" : [ "24"," * ","7" ]
                                    } ]
                                 }, {
                                    "value" : [ ")" ]
                                 } ]
                              } ]
                           } ]
                        }, {
                           "value" : [ "\n    " ]
                        }, {
                           "r" : "127",
                           "s" : [ {
                              "value" : [ "when " ]
                           }, {
                              "r" : "116",
                              "s" : [ {
                                 "value" : [ "'mo'" ]
                              } ]
                           }, {
                              "value" : [ " then " ]
                           }, {
                              "r" : "126",
                              "s" : [ {
                                 "r" : "122",
                                 "s" : [ {
                                    "r" : "117",
                                    "s" : [ {
                                       "value" : [ "frequency" ]
                                    } ]
                                 }, {
                                    "value" : [ " * " ]
                                 }, {
                                    "r" : "121",
                                    "s" : [ {
                                       "value" : [ "(" ]
                                    }, {
                                       "r" : "121",
                                       "s" : [ {
                                          "r" : "118",
                                          "value" : [ "24.0"," / " ]
                                       }, {
                                          "r" : "120",
                                          "s" : [ {
                                             "r" : "119",
                                             "s" : [ {
                                                "value" : [ "period" ]
                                             } ]
                                          }, {
                                             "value" : [ "." ]
                                          }, {
                                             "r" : "120",
                                             "s" : [ {
                                                "value" : [ "value" ]
                                             } ]
                                          } ]
                                       } ]
                                    }, {
                                       "value" : [ ")" ]
                                    } ]
                                 } ]
                              }, {
                                 "value" : [ " / " ]
                              }, {
                                 "r" : "125",
                                 "s" : [ {
                                    "value" : [ "(" ]
                                 }, {
                                    "r" : "125",
                                    "s" : [ {
                                       "r" : "123",
                                       "value" : [ "24"," * ","30" ]
                                    } ]
                                 }, {
                                    "value" : [ ")" ]
                                 } ]
                              } ]
                           } ]
                        }, {
                           "value" : [ " /* assuming 30 days in month */\n    " ]
                        }, {
                           "r" : "139",
                           "s" : [ {
                              "value" : [ "when " ]
                           }, {
                              "r" : "128",
                              "s" : [ {
                                 "value" : [ "'a'" ]
                              } ]
                           }, {
                              "value" : [ " then " ]
                           }, {
                              "r" : "138",
                              "s" : [ {
                                 "r" : "134",
                                 "s" : [ {
                                    "r" : "129",
                                    "s" : [ {
                                       "value" : [ "frequency" ]
                                    } ]
                                 }, {
                                    "value" : [ " * " ]
                                 }, {
                                    "r" : "133",
                                    "s" : [ {
                                       "value" : [ "(" ]
                                    }, {
                                       "r" : "133",
                                       "s" : [ {
                                          "r" : "130",
                                          "value" : [ "24.0"," / " ]
                                       }, {
                                          "r" : "132",
                                          "s" : [ {
                                             "r" : "131",
                                             "s" : [ {
                                                "value" : [ "period" ]
                                             } ]
                                          }, {
                                             "value" : [ "." ]
                                          }, {
                                             "r" : "132",
                                             "s" : [ {
                                                "value" : [ "value" ]
                                             } ]
                                          } ]
                                       } ]
                                    }, {
                                       "value" : [ ")" ]
                                    } ]
                                 } ]
                              }, {
                                 "value" : [ " / " ]
                              }, {
                                 "r" : "137",
                                 "s" : [ {
                                    "value" : [ "(" ]
                                 }, {
                                    "r" : "137",
                                    "s" : [ {
                                       "r" : "135",
                                       "value" : [ "24"," * ","365" ]
                                    } ]
                                 }, {
                                    "value" : [ ")" ]
                                 } ]
                              } ]
                           } ]
                        }, {
                           "value" : [ " /* assuming 365 days in year */\n    " ]
                        }, {
                           "r" : "147",
                           "s" : [ {
                              "value" : [ "when " ]
                           }, {
                              "r" : "140",
                              "s" : [ {
                                 "value" : [ "'hour'" ]
                              } ]
                           }, {
                              "value" : [ " then " ]
                           }, {
                              "r" : "146",
                              "s" : [ {
                                 "r" : "141",
                                 "s" : [ {
                                    "value" : [ "frequency" ]
                                 } ]
                              }, {
                                 "value" : [ " * " ]
                              }, {
                                 "r" : "145",
                                 "s" : [ {
                                    "value" : [ "(" ]
                                 }, {
                                    "r" : "145",
                                    "s" : [ {
                                       "r" : "142",
                                       "value" : [ "24.0"," / " ]
                                    }, {
                                       "r" : "144",
                                       "s" : [ {
                                          "r" : "143",
                                          "s" : [ {
                                             "value" : [ "period" ]
                                          } ]
                                       }, {
                                          "value" : [ "." ]
                                       }, {
                                          "r" : "144",
                                          "s" : [ {
                                             "value" : [ "value" ]
                                          } ]
                                       } ]
                                    } ]
                                 }, {
                                    "value" : [ ")" ]
                                 } ]
                              } ]
                           } ]
                        }, {
                           "value" : [ "\n    " ]
                        }, {
                           "r" : "157",
                           "s" : [ {
                              "value" : [ "when " ]
                           }, {
                              "r" : "148",
                              "s" : [ {
                                 "value" : [ "'minute'" ]
                              } ]
                           }, {
                              "value" : [ " then " ]
                           }, {
                              "r" : "156",
                              "s" : [ {
                                 "r" : "154",
                                 "s" : [ {
                                    "r" : "149",
                                    "s" : [ {
                                       "value" : [ "frequency" ]
                                    } ]
                                 }, {
                                    "value" : [ " * " ]
                                 }, {
                                    "r" : "153",
                                    "s" : [ {
                                       "value" : [ "(" ]
                                    }, {
                                       "r" : "153",
                                       "s" : [ {
                                          "r" : "150",
                                          "value" : [ "24.0"," / " ]
                                       }, {
                                          "r" : "152",
                                          "s" : [ {
                                             "r" : "151",
                                             "s" : [ {
                                                "value" : [ "period" ]
                                             } ]
                                          }, {
                                             "value" : [ "." ]
                                          }, {
                                             "r" : "152",
                                             "s" : [ {
                                                "value" : [ "value" ]
                                             } ]
                                          } ]
                                       } ]
                                    }, {
                                       "value" : [ ")" ]
                                    } ]
                                 } ]
                              }, {
                                 "r" : "155",
                                 "value" : [ " * ","60" ]
                              } ]
                           } ]
                        }, {
                           "value" : [ "\n    " ]
                        }, {
                           "r" : "169",
                           "s" : [ {
                              "value" : [ "when " ]
                           }, {
                              "r" : "158",
                              "s" : [ {
                                 "value" : [ "'second'" ]
                              } ]
                           }, {
                              "value" : [ " then " ]
                           }, {
                              "r" : "168",
                              "s" : [ {
                                 "r" : "166",
                                 "s" : [ {
                                    "r" : "164",
                                    "s" : [ {
                                       "r" : "159",
                                       "s" : [ {
                                          "value" : [ "frequency" ]
                                       } ]
                                    }, {
                                       "value" : [ " * " ]
                                    }, {
                                       "r" : "163",
                                       "s" : [ {
                                          "value" : [ "(" ]
                                       }, {
                                          "r" : "163",
                                          "s" : [ {
                                             "r" : "160",
                                             "value" : [ "24.0"," / " ]
                                          }, {
                                             "r" : "162",
                                             "s" : [ {
                                                "r" : "161",
                                                "s" : [ {
                                                   "value" : [ "period" ]
                                                } ]
                                             }, {
                                                "value" : [ "." ]
                                             }, {
                                                "r" : "162",
                                                "s" : [ {
                                                   "value" : [ "value" ]
                                                } ]
                                             } ]
                                          } ]
                                       }, {
                                          "value" : [ ")" ]
                                       } ]
                                    } ]
                                 }, {
                                    "r" : "165",
                                    "value" : [ " * ","60" ]
                                 } ]
                              }, {
                                 "r" : "167",
                                 "value" : [ " * ","60" ]
                              } ]
                           } ]
                        }, {
                           "value" : [ "\n    " ]
                        }, {
                           "r" : "179",
                           "s" : [ {
                              "value" : [ "when " ]
                           }, {
                              "r" : "170",
                              "s" : [ {
                                 "value" : [ "'day'" ]
                              } ]
                           }, {
                              "value" : [ " then " ]
                           }, {
                              "r" : "178",
                              "s" : [ {
                                 "r" : "176",
                                 "s" : [ {
                                    "r" : "171",
                                    "s" : [ {
                                       "value" : [ "frequency" ]
                                    } ]
                                 }, {
                                    "value" : [ " * " ]
                                 }, {
                                    "r" : "175",
                                    "s" : [ {
                                       "value" : [ "(" ]
                                    }, {
                                       "r" : "175",
                                       "s" : [ {
                                          "r" : "172",
                                          "value" : [ "24.0"," / " ]
                                       }, {
                                          "r" : "174",
                                          "s" : [ {
                                             "r" : "173",
                                             "s" : [ {
                                                "value" : [ "period" ]
                                             } ]
                                          }, {
                                             "value" : [ "." ]
                                          }, {
                                             "r" : "174",
                                             "s" : [ {
                                                "value" : [ "value" ]
                                             } ]
                                          } ]
                                       } ]
                                    }, {
                                       "value" : [ ")" ]
                                    } ]
                                 } ]
                              }, {
                                 "r" : "177",
                                 "value" : [ " / ","24" ]
                              } ]
                           } ]
                        }, {
                           "value" : [ "\n    " ]
                        }, {
                           "r" : "191",
                           "s" : [ {
                              "value" : [ "when " ]
                           }, {
                              "r" : "180",
                              "s" : [ {
                                 "value" : [ "'week'" ]
                              } ]
                           }, {
                              "value" : [ " then " ]
                           }, {
                              "r" : "190",
                              "s" : [ {
                                 "r" : "186",
                                 "s" : [ {
                                    "r" : "181",
                                    "s" : [ {
                                       "value" : [ "frequency" ]
                                    } ]
                                 }, {
                                    "value" : [ " * " ]
                                 }, {
                                    "r" : "185",
                                    "s" : [ {
                                       "value" : [ "(" ]
                                    }, {
                                       "r" : "185",
                                       "s" : [ {
                                          "r" : "182",
                                          "value" : [ "24.0"," / " ]
                                       }, {
                                          "r" : "184",
                                          "s" : [ {
                                             "r" : "183",
                                             "s" : [ {
                                                "value" : [ "period" ]
                                             } ]
                                          }, {
                                             "value" : [ "." ]
                                          }, {
                                             "r" : "184",
                                             "s" : [ {
                                                "value" : [ "value" ]
                                             } ]
                                          } ]
                                       } ]
                                    }, {
                                       "value" : [ ")" ]
                                    } ]
                                 } ]
                              }, {
                                 "value" : [ " / " ]
                              }, {
                                 "r" : "189",
                                 "s" : [ {
                                    "value" : [ "(" ]
                                 }, {
                                    "r" : "189",
                                    "s" : [ {
                                       "r" : "187",
                                       "value" : [ "24"," * ","7" ]
                                    } ]
                                 }, {
                                    "value" : [ ")" ]
                                 } ]
                              } ]
                           } ]
                        }, {
                           "value" : [ "\n    " ]
                        }, {
                           "r" : "203",
                           "s" : [ {
                              "value" : [ "when " ]
                           }, {
                              "r" : "192",
                              "s" : [ {
                                 "value" : [ "'month'" ]
                              } ]
                           }, {
                              "value" : [ " then " ]
                           }, {
                              "r" : "202",
                              "s" : [ {
                                 "r" : "198",
                                 "s" : [ {
                                    "r" : "193",
                                    "s" : [ {
                                       "value" : [ "frequency" ]
                                    } ]
                                 }, {
                                    "value" : [ " * " ]
                                 }, {
                                    "r" : "197",
                                    "s" : [ {
                                       "value" : [ "(" ]
                                    }, {
                                       "r" : "197",
                                       "s" : [ {
                                          "r" : "194",
                                          "value" : [ "24.0"," / " ]
                                       }, {
                                          "r" : "196",
                                          "s" : [ {
                                             "r" : "195",
                                             "s" : [ {
                                                "value" : [ "period" ]
                                             } ]
                                          }, {
                                             "value" : [ "." ]
                                          }, {
                                             "r" : "196",
                                             "s" : [ {
                                                "value" : [ "value" ]
                                             } ]
                                          } ]
                                       } ]
                                    }, {
                                       "value" : [ ")" ]
                                    } ]
                                 } ]
                              }, {
                                 "value" : [ " / " ]
                              }, {
                                 "r" : "201",
                                 "s" : [ {
                                    "value" : [ "(" ]
                                 }, {
                                    "r" : "201",
                                    "s" : [ {
                                       "r" : "199",
                                       "value" : [ "24"," * ","30" ]
                                    } ]
                                 }, {
                                    "value" : [ ")" ]
                                 } ]
                              } ]
                           } ]
                        }, {
                           "value" : [ " /* assuming 30 days in month */\n    " ]
                        }, {
                           "r" : "215",
                           "s" : [ {
                              "value" : [ "when " ]
                           }, {
                              "r" : "204",
                              "s" : [ {
                                 "value" : [ "'year'" ]
                              } ]
                           }, {
                              "value" : [ " then " ]
                           }, {
                              "r" : "214",
                              "s" : [ {
                                 "r" : "210",
                                 "s" : [ {
                                    "r" : "205",
                                    "s" : [ {
                                       "value" : [ "frequency" ]
                                    } ]
                                 }, {
                                    "value" : [ " * " ]
                                 }, {
                                    "r" : "209",
                                    "s" : [ {
                                       "value" : [ "(" ]
                                    }, {
                                       "r" : "209",
                                       "s" : [ {
                                          "r" : "206",
                                          "value" : [ "24.0"," / " ]
                                       }, {
                                          "r" : "208",
                                          "s" : [ {
                                             "r" : "207",
                                             "s" : [ {
                                                "value" : [ "period" ]
                                             } ]
                                          }, {
                                             "value" : [ "." ]
                                          }, {
                                             "r" : "208",
                                             "s" : [ {
                                                "value" : [ "value" ]
                                             } ]
                                          } ]
                                       } ]
                                    }, {
                                       "value" : [ ")" ]
                                    } ]
                                 } ]
                              }, {
                                 "value" : [ " / " ]
                              }, {
                                 "r" : "213",
                                 "s" : [ {
                                    "value" : [ "(" ]
                                 }, {
                                    "r" : "213",
                                    "s" : [ {
                                       "r" : "211",
                                       "value" : [ "24"," * ","365" ]
                                    } ]
                                 }, {
                                    "value" : [ ")" ]
                                 } ]
                              } ]
                           } ]
                        }, {
                           "value" : [ " /* assuming 365 days in year */\n    " ]
                        }, {
                           "r" : "223",
                           "s" : [ {
                              "value" : [ "when " ]
                           }, {
                              "r" : "216",
                              "s" : [ {
                                 "value" : [ "'hours'" ]
                              } ]
                           }, {
                              "value" : [ " then " ]
                           }, {
                              "r" : "222",
                              "s" : [ {
                                 "r" : "217",
                                 "s" : [ {
                                    "value" : [ "frequency" ]
                                 } ]
                              }, {
                                 "value" : [ " * " ]
                              }, {
                                 "r" : "221",
                                 "s" : [ {
                                    "value" : [ "(" ]
                                 }, {
                                    "r" : "221",
                                    "s" : [ {
                                       "r" : "218",
                                       "value" : [ "24.0"," / " ]
                                    }, {
                                       "r" : "220",
                                       "s" : [ {
                                          "r" : "219",
                                          "s" : [ {
                                             "value" : [ "period" ]
                                          } ]
                                       }, {
                                          "value" : [ "." ]
                                       }, {
                                          "r" : "220",
                                          "s" : [ {
                                             "value" : [ "value" ]
                                          } ]
                                       } ]
                                    } ]
                                 }, {
                                    "value" : [ ")" ]
                                 } ]
                              } ]
                           } ]
                        }, {
                           "value" : [ "\n    " ]
                        }, {
                           "r" : "233",
                           "s" : [ {
                              "value" : [ "when " ]
                           }, {
                              "r" : "224",
                              "s" : [ {
                                 "value" : [ "'minutes'" ]
                              } ]
                           }, {
                              "value" : [ " then " ]
                           }, {
                              "r" : "232",
                              "s" : [ {
                                 "r" : "230",
                                 "s" : [ {
                                    "r" : "225",
                                    "s" : [ {
                                       "value" : [ "frequency" ]
                                    } ]
                                 }, {
                                    "value" : [ " * " ]
                                 }, {
                                    "r" : "229",
                                    "s" : [ {
                                       "value" : [ "(" ]
                                    }, {
                                       "r" : "229",
                                       "s" : [ {
                                          "r" : "226",
                                          "value" : [ "24.0"," / " ]
                                       }, {
                                          "r" : "228",
                                          "s" : [ {
                                             "r" : "227",
                                             "s" : [ {
                                                "value" : [ "period" ]
                                             } ]
                                          }, {
                                             "value" : [ "." ]
                                          }, {
                                             "r" : "228",
                                             "s" : [ {
                                                "value" : [ "value" ]
                                             } ]
                                          } ]
                                       } ]
                                    }, {
                                       "value" : [ ")" ]
                                    } ]
                                 } ]
                              }, {
                                 "r" : "231",
                                 "value" : [ " * ","60" ]
                              } ]
                           } ]
                        }, {
                           "value" : [ "\n    " ]
                        }, {
                           "r" : "245",
                           "s" : [ {
                              "value" : [ "when " ]
                           }, {
                              "r" : "234",
                              "s" : [ {
                                 "value" : [ "'seconds'" ]
                              } ]
                           }, {
                              "value" : [ " then " ]
                           }, {
                              "r" : "244",
                              "s" : [ {
                                 "r" : "242",
                                 "s" : [ {
                                    "r" : "240",
                                    "s" : [ {
                                       "r" : "235",
                                       "s" : [ {
                                          "value" : [ "frequency" ]
                                       } ]
                                    }, {
                                       "value" : [ " * " ]
                                    }, {
                                       "r" : "239",
                                       "s" : [ {
                                          "value" : [ "(" ]
                                       }, {
                                          "r" : "239",
                                          "s" : [ {
                                             "r" : "236",
                                             "value" : [ "24.0"," / " ]
                                          }, {
                                             "r" : "238",
                                             "s" : [ {
                                                "r" : "237",
                                                "s" : [ {
                                                   "value" : [ "period" ]
                                                } ]
                                             }, {
                                                "value" : [ "." ]
                                             }, {
                                                "r" : "238",
                                                "s" : [ {
                                                   "value" : [ "value" ]
                                                } ]
                                             } ]
                                          } ]
                                       }, {
                                          "value" : [ ")" ]
                                       } ]
                                    } ]
                                 }, {
                                    "r" : "241",
                                    "value" : [ " * ","60" ]
                                 } ]
                              }, {
                                 "r" : "243",
                                 "value" : [ " * ","60" ]
                              } ]
                           } ]
                        }, {
                           "value" : [ "\n    " ]
                        }, {
                           "r" : "255",
                           "s" : [ {
                              "value" : [ "when " ]
                           }, {
                              "r" : "246",
                              "s" : [ {
                                 "value" : [ "'days'" ]
                              } ]
                           }, {
                              "value" : [ " then " ]
                           }, {
                              "r" : "254",
                              "s" : [ {
                                 "r" : "252",
                                 "s" : [ {
                                    "r" : "247",
                                    "s" : [ {
                                       "value" : [ "frequency" ]
                                    } ]
                                 }, {
                                    "value" : [ " * " ]
                                 }, {
                                    "r" : "251",
                                    "s" : [ {
                                       "value" : [ "(" ]
                                    }, {
                                       "r" : "251",
                                       "s" : [ {
                                          "r" : "248",
                                          "value" : [ "24.0"," / " ]
                                       }, {
                                          "r" : "250",
                                          "s" : [ {
                                             "r" : "249",
                                             "s" : [ {
                                                "value" : [ "period" ]
                                             } ]
                                          }, {
                                             "value" : [ "." ]
                                          }, {
                                             "r" : "250",
                                             "s" : [ {
                                                "value" : [ "value" ]
                                             } ]
                                          } ]
                                       } ]
                                    }, {
                                       "value" : [ ")" ]
                                    } ]
                                 } ]
                              }, {
                                 "r" : "253",
                                 "value" : [ " / ","24" ]
                              } ]
                           } ]
                        }, {
                           "value" : [ "\n    " ]
                        }, {
                           "r" : "267",
                           "s" : [ {
                              "value" : [ "when " ]
                           }, {
                              "r" : "256",
                              "s" : [ {
                                 "value" : [ "'weeks'" ]
                              } ]
                           }, {
                              "value" : [ " then " ]
                           }, {
                              "r" : "266",
                              "s" : [ {
                                 "r" : "262",
                                 "s" : [ {
                                    "r" : "257",
                                    "s" : [ {
                                       "value" : [ "frequency" ]
                                    } ]
                                 }, {
                                    "value" : [ " * " ]
                                 }, {
                                    "r" : "261",
                                    "s" : [ {
                                       "value" : [ "(" ]
                                    }, {
                                       "r" : "261",
                                       "s" : [ {
                                          "r" : "258",
                                          "value" : [ "24.0"," / " ]
                                       }, {
                                          "r" : "260",
                                          "s" : [ {
                                             "r" : "259",
                                             "s" : [ {
                                                "value" : [ "period" ]
                                             } ]
                                          }, {
                                             "value" : [ "." ]
                                          }, {
                                             "r" : "260",
                                             "s" : [ {
                                                "value" : [ "value" ]
                                             } ]
                                          } ]
                                       } ]
                                    }, {
                                       "value" : [ ")" ]
                                    } ]
                                 } ]
                              }, {
                                 "value" : [ " / " ]
                              }, {
                                 "r" : "265",
                                 "s" : [ {
                                    "value" : [ "(" ]
                                 }, {
                                    "r" : "265",
                                    "s" : [ {
                                       "r" : "263",
                                       "value" : [ "24"," * ","7" ]
                                    } ]
                                 }, {
                                    "value" : [ ")" ]
                                 } ]
                              } ]
                           } ]
                        }, {
                           "value" : [ "\n    " ]
                        }, {
                           "r" : "279",
                           "s" : [ {
                              "value" : [ "when " ]
                           }, {
                              "r" : "268",
                              "s" : [ {
                                 "value" : [ "'months'" ]
                              } ]
                           }, {
                              "value" : [ " then " ]
                           }, {
                              "r" : "278",
                              "s" : [ {
                                 "r" : "274",
                                 "s" : [ {
                                    "r" : "269",
                                    "s" : [ {
                                       "value" : [ "frequency" ]
                                    } ]
                                 }, {
                                    "value" : [ " * " ]
                                 }, {
                                    "r" : "273",
                                    "s" : [ {
                                       "value" : [ "(" ]
                                    }, {
                                       "r" : "273",
                                       "s" : [ {
                                          "r" : "270",
                                          "value" : [ "24.0"," / " ]
                                       }, {
                                          "r" : "272",
                                          "s" : [ {
                                             "r" : "271",
                                             "s" : [ {
                                                "value" : [ "period" ]
                                             } ]
                                          }, {
                                             "value" : [ "." ]
                                          }, {
                                             "r" : "272",
                                             "s" : [ {
                                                "value" : [ "value" ]
                                             } ]
                                          } ]
                                       } ]
                                    }, {
                                       "value" : [ ")" ]
                                    } ]
                                 } ]
                              }, {
                                 "value" : [ " / " ]
                              }, {
                                 "r" : "277",
                                 "s" : [ {
                                    "value" : [ "(" ]
                                 }, {
                                    "r" : "277",
                                    "s" : [ {
                                       "r" : "275",
                                       "value" : [ "24"," * ","30" ]
                                    } ]
                                 }, {
                                    "value" : [ ")" ]
                                 } ]
                              } ]
                           } ]
                        }, {
                           "value" : [ " /* assuming 30 days in month */\n    " ]
                        }, {
                           "r" : "291",
                           "s" : [ {
                              "value" : [ "when " ]
                           }, {
                              "r" : "280",
                              "s" : [ {
                                 "value" : [ "'years'" ]
                              } ]
                           }, {
                              "value" : [ " then " ]
                           }, {
                              "r" : "290",
                              "s" : [ {
                                 "r" : "286",
                                 "s" : [ {
                                    "r" : "281",
                                    "s" : [ {
                                       "value" : [ "frequency" ]
                                    } ]
                                 }, {
                                    "value" : [ " * " ]
                                 }, {
                                    "r" : "285",
                                    "s" : [ {
                                       "value" : [ "(" ]
                                    }, {
                                       "r" : "285",
                                       "s" : [ {
                                          "r" : "282",
                                          "value" : [ "24.0"," / " ]
                                       }, {
                                          "r" : "284",
                                          "s" : [ {
                                             "r" : "283",
                                             "s" : [ {
                                                "value" : [ "period" ]
                                             } ]
                                          }, {
                                             "value" : [ "." ]
                                          }, {
                                             "r" : "284",
                                             "s" : [ {
                                                "value" : [ "value" ]
                                             } ]
                                          } ]
                                       } ]
                                    }, {
                                       "value" : [ ")" ]
                                    } ]
                                 } ]
                              }, {
                                 "value" : [ " / " ]
                              }, {
                                 "r" : "289",
                                 "s" : [ {
                                    "value" : [ "(" ]
                                 }, {
                                    "r" : "289",
                                    "s" : [ {
                                       "r" : "287",
                                       "value" : [ "24"," * ","365" ]
                                    } ]
                                 }, {
                                    "value" : [ ")" ]
                                 } ]
                              } ]
                           } ]
                        }, {
                           "value" : [ " /* assuming 365 days in year */\n    else " ]
                        }, {
                           "r" : "300",
                           "s" : [ {
                              "r" : "292",
                              "value" : [ "Message","(","null",", ","true",", " ]
                           }, {
                              "r" : "294",
                              "s" : [ {
                                 "value" : [ "'CMDLogic.ToDaily.UnknownUnit'" ]
                              } ]
                           }, {
                              "value" : [ ", " ]
                           }, {
                              "r" : "295",
                              "s" : [ {
                                 "value" : [ "ErrorLevel" ]
                              } ]
                           }, {
                              "value" : [ ", " ]
                           }, {
                              "r" : "299",
                              "s" : [ {
                                 "r" : "296",
                                 "s" : [ {
                                    "value" : [ "'Unknown unit '" ]
                                 } ]
                              }, {
                                 "value" : [ " & " ]
                              }, {
                                 "r" : "298",
                                 "s" : [ {
                                    "r" : "297",
                                    "s" : [ {
                                       "value" : [ "period" ]
                                    } ]
                                 }, {
                                    "value" : [ "." ]
                                 }, {
                                    "r" : "298",
                                    "s" : [ {
                                       "value" : [ "unit" ]
                                    } ]
                                 } ]
                              } ]
                           }, {
                              "value" : [ ")" ]
                           } ]
                        }, {
                           "value" : [ "\n  end" ]
                        } ]
                     } ]
                  } ]
               }
            } ],
            "expression" : {
               "localId" : "301",
               "locator" : "43:3-66:5",
               "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
               "type" : "Case",
               "comparand" : {
                  "localId" : "63",
                  "locator" : "43:8-43:18",
                  "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
                  "path" : "unit",
                  "type" : "Property",
                  "source" : {
                     "localId" : "62",
                     "locator" : "43:8-43:13",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                     "name" : "period",
                     "type" : "OperandRef"
                  }
               },
               "caseItem" : [ {
                  "localId" : "71",
                  "locator" : "44:5-44:51",
                  "when" : {
                     "localId" : "64",
                     "locator" : "44:10-44:12",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "h",
                     "type" : "Literal"
                  },
                  "then" : {
                     "localId" : "70",
                     "locator" : "44:19-44:51",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                     "type" : "Multiply",
                     "operand" : [ {
                        "type" : "ToDecimal",
                        "operand" : {
                           "localId" : "65",
                           "locator" : "44:19-44:27",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                           "name" : "frequency",
                           "type" : "OperandRef"
                        }
                     }, {
                        "localId" : "69",
                        "locator" : "44:31-44:51",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                        "type" : "Divide",
                        "operand" : [ {
                           "localId" : "66",
                           "locator" : "44:32-44:35",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                           "valueType" : "{urn:hl7-org:elm-types:r1}Decimal",
                           "value" : "24.0",
                           "type" : "Literal"
                        }, {
                           "localId" : "68",
                           "locator" : "44:39-44:50",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                           "path" : "value",
                           "type" : "Property",
                           "source" : {
                              "localId" : "67",
                              "locator" : "44:39-44:44",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                              "name" : "period",
                              "type" : "OperandRef"
                           }
                        } ]
                     } ]
                  }
               }, {
                  "localId" : "81",
                  "locator" : "45:5-45:58",
                  "when" : {
                     "localId" : "72",
                     "locator" : "45:10-45:14",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "min",
                     "type" : "Literal"
                  },
                  "then" : {
                     "localId" : "80",
                     "locator" : "45:21-45:58",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                     "type" : "Multiply",
                     "operand" : [ {
                        "localId" : "78",
                        "locator" : "45:21-45:53",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                        "type" : "Multiply",
                        "operand" : [ {
                           "type" : "ToDecimal",
                           "operand" : {
                              "localId" : "73",
                              "locator" : "45:21-45:29",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                              "name" : "frequency",
                              "type" : "OperandRef"
                           }
                        }, {
                           "localId" : "77",
                           "locator" : "45:33-45:53",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                           "type" : "Divide",
                           "operand" : [ {
                              "localId" : "74",
                              "locator" : "45:34-45:37",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "valueType" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "value" : "24.0",
                              "type" : "Literal"
                           }, {
                              "localId" : "76",
                              "locator" : "45:41-45:52",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "path" : "value",
                              "type" : "Property",
                              "source" : {
                                 "localId" : "75",
                                 "locator" : "45:41-45:46",
                                 "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                                 "name" : "period",
                                 "type" : "OperandRef"
                              }
                           } ]
                        } ]
                     }, {
                        "type" : "ToDecimal",
                        "operand" : {
                           "localId" : "79",
                           "locator" : "45:57-45:58",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                           "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                           "value" : "60",
                           "type" : "Literal"
                        }
                     } ]
                  }
               }, {
                  "localId" : "93",
                  "locator" : "46:5-46:61",
                  "when" : {
                     "localId" : "82",
                     "locator" : "46:10-46:12",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "s",
                     "type" : "Literal"
                  },
                  "then" : {
                     "localId" : "92",
                     "locator" : "46:19-46:61",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                     "type" : "Multiply",
                     "operand" : [ {
                        "localId" : "90",
                        "locator" : "46:19-46:56",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                        "type" : "Multiply",
                        "operand" : [ {
                           "localId" : "88",
                           "locator" : "46:19-46:51",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                           "type" : "Multiply",
                           "operand" : [ {
                              "type" : "ToDecimal",
                              "operand" : {
                                 "localId" : "83",
                                 "locator" : "46:19-46:27",
                                 "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                                 "name" : "frequency",
                                 "type" : "OperandRef"
                              }
                           }, {
                              "localId" : "87",
                              "locator" : "46:31-46:51",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "type" : "Divide",
                              "operand" : [ {
                                 "localId" : "84",
                                 "locator" : "46:32-46:35",
                                 "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                                 "valueType" : "{urn:hl7-org:elm-types:r1}Decimal",
                                 "value" : "24.0",
                                 "type" : "Literal"
                              }, {
                                 "localId" : "86",
                                 "locator" : "46:39-46:50",
                                 "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                                 "path" : "value",
                                 "type" : "Property",
                                 "source" : {
                                    "localId" : "85",
                                    "locator" : "46:39-46:44",
                                    "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                                    "name" : "period",
                                    "type" : "OperandRef"
                                 }
                              } ]
                           } ]
                        }, {
                           "type" : "ToDecimal",
                           "operand" : {
                              "localId" : "89",
                              "locator" : "46:55-46:56",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "60",
                              "type" : "Literal"
                           }
                        } ]
                     }, {
                        "type" : "ToDecimal",
                        "operand" : {
                           "localId" : "91",
                           "locator" : "46:60-46:61",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                           "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                           "value" : "60",
                           "type" : "Literal"
                        }
                     } ]
                  }
               }, {
                  "localId" : "103",
                  "locator" : "47:5-47:56",
                  "when" : {
                     "localId" : "94",
                     "locator" : "47:10-47:12",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "d",
                     "type" : "Literal"
                  },
                  "then" : {
                     "localId" : "102",
                     "locator" : "47:19-47:56",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                     "type" : "Divide",
                     "operand" : [ {
                        "localId" : "100",
                        "locator" : "47:19-47:51",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                        "type" : "Multiply",
                        "operand" : [ {
                           "type" : "ToDecimal",
                           "operand" : {
                              "localId" : "95",
                              "locator" : "47:19-47:27",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                              "name" : "frequency",
                              "type" : "OperandRef"
                           }
                        }, {
                           "localId" : "99",
                           "locator" : "47:31-47:51",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                           "type" : "Divide",
                           "operand" : [ {
                              "localId" : "96",
                              "locator" : "47:32-47:35",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "valueType" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "value" : "24.0",
                              "type" : "Literal"
                           }, {
                              "localId" : "98",
                              "locator" : "47:39-47:50",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "path" : "value",
                              "type" : "Property",
                              "source" : {
                                 "localId" : "97",
                                 "locator" : "47:39-47:44",
                                 "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                                 "name" : "period",
                                 "type" : "OperandRef"
                              }
                           } ]
                        } ]
                     }, {
                        "type" : "ToDecimal",
                        "operand" : {
                           "localId" : "101",
                           "locator" : "47:55-47:56",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                           "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                           "value" : "24",
                           "type" : "Literal"
                        }
                     } ]
                  }
               }, {
                  "localId" : "115",
                  "locator" : "48:5-48:63",
                  "when" : {
                     "localId" : "104",
                     "locator" : "48:10-48:13",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "wk",
                     "type" : "Literal"
                  },
                  "then" : {
                     "localId" : "114",
                     "locator" : "48:20-48:63",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                     "type" : "Divide",
                     "operand" : [ {
                        "localId" : "110",
                        "locator" : "48:20-48:52",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                        "type" : "Multiply",
                        "operand" : [ {
                           "type" : "ToDecimal",
                           "operand" : {
                              "localId" : "105",
                              "locator" : "48:20-48:28",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                              "name" : "frequency",
                              "type" : "OperandRef"
                           }
                        }, {
                           "localId" : "109",
                           "locator" : "48:32-48:52",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                           "type" : "Divide",
                           "operand" : [ {
                              "localId" : "106",
                              "locator" : "48:33-48:36",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "valueType" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "value" : "24.0",
                              "type" : "Literal"
                           }, {
                              "localId" : "108",
                              "locator" : "48:40-48:51",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "path" : "value",
                              "type" : "Property",
                              "source" : {
                                 "localId" : "107",
                                 "locator" : "48:40-48:45",
                                 "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                                 "name" : "period",
                                 "type" : "OperandRef"
                              }
                           } ]
                        } ]
                     }, {
                        "type" : "ToDecimal",
                        "operand" : {
                           "localId" : "113",
                           "locator" : "48:56-48:63",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                           "type" : "Multiply",
                           "operand" : [ {
                              "localId" : "111",
                              "locator" : "48:57-48:58",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "24",
                              "type" : "Literal"
                           }, {
                              "localId" : "112",
                              "locator" : "48:62",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "7",
                              "type" : "Literal"
                           } ]
                        }
                     } ]
                  }
               }, {
                  "localId" : "127",
                  "locator" : "49:5-49:64",
                  "when" : {
                     "localId" : "116",
                     "locator" : "49:10-49:13",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "mo",
                     "type" : "Literal"
                  },
                  "then" : {
                     "localId" : "126",
                     "locator" : "49:20-49:64",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                     "type" : "Divide",
                     "operand" : [ {
                        "localId" : "122",
                        "locator" : "49:20-49:52",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                        "type" : "Multiply",
                        "operand" : [ {
                           "type" : "ToDecimal",
                           "operand" : {
                              "localId" : "117",
                              "locator" : "49:20-49:28",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                              "name" : "frequency",
                              "type" : "OperandRef"
                           }
                        }, {
                           "localId" : "121",
                           "locator" : "49:32-49:52",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                           "type" : "Divide",
                           "operand" : [ {
                              "localId" : "118",
                              "locator" : "49:33-49:36",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "valueType" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "value" : "24.0",
                              "type" : "Literal"
                           }, {
                              "localId" : "120",
                              "locator" : "49:40-49:51",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "path" : "value",
                              "type" : "Property",
                              "source" : {
                                 "localId" : "119",
                                 "locator" : "49:40-49:45",
                                 "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                                 "name" : "period",
                                 "type" : "OperandRef"
                              }
                           } ]
                        } ]
                     }, {
                        "type" : "ToDecimal",
                        "operand" : {
                           "localId" : "125",
                           "locator" : "49:56-49:64",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                           "type" : "Multiply",
                           "operand" : [ {
                              "localId" : "123",
                              "locator" : "49:57-49:58",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "24",
                              "type" : "Literal"
                           }, {
                              "localId" : "124",
                              "locator" : "49:62-49:63",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "30",
                              "type" : "Literal"
                           } ]
                        }
                     } ]
                  }
               }, {
                  "localId" : "139",
                  "locator" : "50:5-50:64",
                  "when" : {
                     "localId" : "128",
                     "locator" : "50:10-50:12",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "a",
                     "type" : "Literal"
                  },
                  "then" : {
                     "localId" : "138",
                     "locator" : "50:19-50:64",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                     "type" : "Divide",
                     "operand" : [ {
                        "localId" : "134",
                        "locator" : "50:19-50:51",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                        "type" : "Multiply",
                        "operand" : [ {
                           "type" : "ToDecimal",
                           "operand" : {
                              "localId" : "129",
                              "locator" : "50:19-50:27",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                              "name" : "frequency",
                              "type" : "OperandRef"
                           }
                        }, {
                           "localId" : "133",
                           "locator" : "50:31-50:51",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                           "type" : "Divide",
                           "operand" : [ {
                              "localId" : "130",
                              "locator" : "50:32-50:35",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "valueType" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "value" : "24.0",
                              "type" : "Literal"
                           }, {
                              "localId" : "132",
                              "locator" : "50:39-50:50",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "path" : "value",
                              "type" : "Property",
                              "source" : {
                                 "localId" : "131",
                                 "locator" : "50:39-50:44",
                                 "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                                 "name" : "period",
                                 "type" : "OperandRef"
                              }
                           } ]
                        } ]
                     }, {
                        "type" : "ToDecimal",
                        "operand" : {
                           "localId" : "137",
                           "locator" : "50:55-50:64",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                           "type" : "Multiply",
                           "operand" : [ {
                              "localId" : "135",
                              "locator" : "50:56-50:57",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "24",
                              "type" : "Literal"
                           }, {
                              "localId" : "136",
                              "locator" : "50:61-50:63",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "365",
                              "type" : "Literal"
                           } ]
                        }
                     } ]
                  }
               }, {
                  "localId" : "147",
                  "locator" : "51:5-51:54",
                  "when" : {
                     "localId" : "140",
                     "locator" : "51:10-51:15",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "hour",
                     "type" : "Literal"
                  },
                  "then" : {
                     "localId" : "146",
                     "locator" : "51:22-51:54",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                     "type" : "Multiply",
                     "operand" : [ {
                        "type" : "ToDecimal",
                        "operand" : {
                           "localId" : "141",
                           "locator" : "51:22-51:30",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                           "name" : "frequency",
                           "type" : "OperandRef"
                        }
                     }, {
                        "localId" : "145",
                        "locator" : "51:34-51:54",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                        "type" : "Divide",
                        "operand" : [ {
                           "localId" : "142",
                           "locator" : "51:35-51:38",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                           "valueType" : "{urn:hl7-org:elm-types:r1}Decimal",
                           "value" : "24.0",
                           "type" : "Literal"
                        }, {
                           "localId" : "144",
                           "locator" : "51:42-51:53",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                           "path" : "value",
                           "type" : "Property",
                           "source" : {
                              "localId" : "143",
                              "locator" : "51:42-51:47",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                              "name" : "period",
                              "type" : "OperandRef"
                           }
                        } ]
                     } ]
                  }
               }, {
                  "localId" : "157",
                  "locator" : "52:5-52:61",
                  "when" : {
                     "localId" : "148",
                     "locator" : "52:10-52:17",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "minute",
                     "type" : "Literal"
                  },
                  "then" : {
                     "localId" : "156",
                     "locator" : "52:24-52:61",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                     "type" : "Multiply",
                     "operand" : [ {
                        "localId" : "154",
                        "locator" : "52:24-52:56",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                        "type" : "Multiply",
                        "operand" : [ {
                           "type" : "ToDecimal",
                           "operand" : {
                              "localId" : "149",
                              "locator" : "52:24-52:32",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                              "name" : "frequency",
                              "type" : "OperandRef"
                           }
                        }, {
                           "localId" : "153",
                           "locator" : "52:36-52:56",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                           "type" : "Divide",
                           "operand" : [ {
                              "localId" : "150",
                              "locator" : "52:37-52:40",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "valueType" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "value" : "24.0",
                              "type" : "Literal"
                           }, {
                              "localId" : "152",
                              "locator" : "52:44-52:55",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "path" : "value",
                              "type" : "Property",
                              "source" : {
                                 "localId" : "151",
                                 "locator" : "52:44-52:49",
                                 "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                                 "name" : "period",
                                 "type" : "OperandRef"
                              }
                           } ]
                        } ]
                     }, {
                        "type" : "ToDecimal",
                        "operand" : {
                           "localId" : "155",
                           "locator" : "52:60-52:61",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                           "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                           "value" : "60",
                           "type" : "Literal"
                        }
                     } ]
                  }
               }, {
                  "localId" : "169",
                  "locator" : "53:5-53:66",
                  "when" : {
                     "localId" : "158",
                     "locator" : "53:10-53:17",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "second",
                     "type" : "Literal"
                  },
                  "then" : {
                     "localId" : "168",
                     "locator" : "53:24-53:66",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                     "type" : "Multiply",
                     "operand" : [ {
                        "localId" : "166",
                        "locator" : "53:24-53:61",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                        "type" : "Multiply",
                        "operand" : [ {
                           "localId" : "164",
                           "locator" : "53:24-53:56",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                           "type" : "Multiply",
                           "operand" : [ {
                              "type" : "ToDecimal",
                              "operand" : {
                                 "localId" : "159",
                                 "locator" : "53:24-53:32",
                                 "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                                 "name" : "frequency",
                                 "type" : "OperandRef"
                              }
                           }, {
                              "localId" : "163",
                              "locator" : "53:36-53:56",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "type" : "Divide",
                              "operand" : [ {
                                 "localId" : "160",
                                 "locator" : "53:37-53:40",
                                 "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                                 "valueType" : "{urn:hl7-org:elm-types:r1}Decimal",
                                 "value" : "24.0",
                                 "type" : "Literal"
                              }, {
                                 "localId" : "162",
                                 "locator" : "53:44-53:55",
                                 "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                                 "path" : "value",
                                 "type" : "Property",
                                 "source" : {
                                    "localId" : "161",
                                    "locator" : "53:44-53:49",
                                    "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                                    "name" : "period",
                                    "type" : "OperandRef"
                                 }
                              } ]
                           } ]
                        }, {
                           "type" : "ToDecimal",
                           "operand" : {
                              "localId" : "165",
                              "locator" : "53:60-53:61",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "60",
                              "type" : "Literal"
                           }
                        } ]
                     }, {
                        "type" : "ToDecimal",
                        "operand" : {
                           "localId" : "167",
                           "locator" : "53:65-53:66",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                           "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                           "value" : "60",
                           "type" : "Literal"
                        }
                     } ]
                  }
               }, {
                  "localId" : "179",
                  "locator" : "54:5-54:58",
                  "when" : {
                     "localId" : "170",
                     "locator" : "54:10-54:14",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "day",
                     "type" : "Literal"
                  },
                  "then" : {
                     "localId" : "178",
                     "locator" : "54:21-54:58",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                     "type" : "Divide",
                     "operand" : [ {
                        "localId" : "176",
                        "locator" : "54:21-54:53",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                        "type" : "Multiply",
                        "operand" : [ {
                           "type" : "ToDecimal",
                           "operand" : {
                              "localId" : "171",
                              "locator" : "54:21-54:29",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                              "name" : "frequency",
                              "type" : "OperandRef"
                           }
                        }, {
                           "localId" : "175",
                           "locator" : "54:33-54:53",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                           "type" : "Divide",
                           "operand" : [ {
                              "localId" : "172",
                              "locator" : "54:34-54:37",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "valueType" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "value" : "24.0",
                              "type" : "Literal"
                           }, {
                              "localId" : "174",
                              "locator" : "54:41-54:52",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "path" : "value",
                              "type" : "Property",
                              "source" : {
                                 "localId" : "173",
                                 "locator" : "54:41-54:46",
                                 "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                                 "name" : "period",
                                 "type" : "OperandRef"
                              }
                           } ]
                        } ]
                     }, {
                        "type" : "ToDecimal",
                        "operand" : {
                           "localId" : "177",
                           "locator" : "54:57-54:58",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                           "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                           "value" : "24",
                           "type" : "Literal"
                        }
                     } ]
                  }
               }, {
                  "localId" : "191",
                  "locator" : "55:5-55:65",
                  "when" : {
                     "localId" : "180",
                     "locator" : "55:10-55:15",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "week",
                     "type" : "Literal"
                  },
                  "then" : {
                     "localId" : "190",
                     "locator" : "55:22-55:65",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                     "type" : "Divide",
                     "operand" : [ {
                        "localId" : "186",
                        "locator" : "55:22-55:54",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                        "type" : "Multiply",
                        "operand" : [ {
                           "type" : "ToDecimal",
                           "operand" : {
                              "localId" : "181",
                              "locator" : "55:22-55:30",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                              "name" : "frequency",
                              "type" : "OperandRef"
                           }
                        }, {
                           "localId" : "185",
                           "locator" : "55:34-55:54",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                           "type" : "Divide",
                           "operand" : [ {
                              "localId" : "182",
                              "locator" : "55:35-55:38",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "valueType" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "value" : "24.0",
                              "type" : "Literal"
                           }, {
                              "localId" : "184",
                              "locator" : "55:42-55:53",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "path" : "value",
                              "type" : "Property",
                              "source" : {
                                 "localId" : "183",
                                 "locator" : "55:42-55:47",
                                 "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                                 "name" : "period",
                                 "type" : "OperandRef"
                              }
                           } ]
                        } ]
                     }, {
                        "type" : "ToDecimal",
                        "operand" : {
                           "localId" : "189",
                           "locator" : "55:58-55:65",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                           "type" : "Multiply",
                           "operand" : [ {
                              "localId" : "187",
                              "locator" : "55:59-55:60",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "24",
                              "type" : "Literal"
                           }, {
                              "localId" : "188",
                              "locator" : "55:64",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "7",
                              "type" : "Literal"
                           } ]
                        }
                     } ]
                  }
               }, {
                  "localId" : "203",
                  "locator" : "56:5-56:67",
                  "when" : {
                     "localId" : "192",
                     "locator" : "56:10-56:16",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "month",
                     "type" : "Literal"
                  },
                  "then" : {
                     "localId" : "202",
                     "locator" : "56:23-56:67",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                     "type" : "Divide",
                     "operand" : [ {
                        "localId" : "198",
                        "locator" : "56:23-56:55",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                        "type" : "Multiply",
                        "operand" : [ {
                           "type" : "ToDecimal",
                           "operand" : {
                              "localId" : "193",
                              "locator" : "56:23-56:31",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                              "name" : "frequency",
                              "type" : "OperandRef"
                           }
                        }, {
                           "localId" : "197",
                           "locator" : "56:35-56:55",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                           "type" : "Divide",
                           "operand" : [ {
                              "localId" : "194",
                              "locator" : "56:36-56:39",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "valueType" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "value" : "24.0",
                              "type" : "Literal"
                           }, {
                              "localId" : "196",
                              "locator" : "56:43-56:54",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "path" : "value",
                              "type" : "Property",
                              "source" : {
                                 "localId" : "195",
                                 "locator" : "56:43-56:48",
                                 "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                                 "name" : "period",
                                 "type" : "OperandRef"
                              }
                           } ]
                        } ]
                     }, {
                        "type" : "ToDecimal",
                        "operand" : {
                           "localId" : "201",
                           "locator" : "56:59-56:67",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                           "type" : "Multiply",
                           "operand" : [ {
                              "localId" : "199",
                              "locator" : "56:60-56:61",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "24",
                              "type" : "Literal"
                           }, {
                              "localId" : "200",
                              "locator" : "56:65-56:66",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "30",
                              "type" : "Literal"
                           } ]
                        }
                     } ]
                  }
               }, {
                  "localId" : "215",
                  "locator" : "57:5-57:67",
                  "when" : {
                     "localId" : "204",
                     "locator" : "57:10-57:15",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "year",
                     "type" : "Literal"
                  },
                  "then" : {
                     "localId" : "214",
                     "locator" : "57:22-57:67",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                     "type" : "Divide",
                     "operand" : [ {
                        "localId" : "210",
                        "locator" : "57:22-57:54",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                        "type" : "Multiply",
                        "operand" : [ {
                           "type" : "ToDecimal",
                           "operand" : {
                              "localId" : "205",
                              "locator" : "57:22-57:30",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                              "name" : "frequency",
                              "type" : "OperandRef"
                           }
                        }, {
                           "localId" : "209",
                           "locator" : "57:34-57:54",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                           "type" : "Divide",
                           "operand" : [ {
                              "localId" : "206",
                              "locator" : "57:35-57:38",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "valueType" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "value" : "24.0",
                              "type" : "Literal"
                           }, {
                              "localId" : "208",
                              "locator" : "57:42-57:53",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "path" : "value",
                              "type" : "Property",
                              "source" : {
                                 "localId" : "207",
                                 "locator" : "57:42-57:47",
                                 "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                                 "name" : "period",
                                 "type" : "OperandRef"
                              }
                           } ]
                        } ]
                     }, {
                        "type" : "ToDecimal",
                        "operand" : {
                           "localId" : "213",
                           "locator" : "57:58-57:67",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                           "type" : "Multiply",
                           "operand" : [ {
                              "localId" : "211",
                              "locator" : "57:59-57:60",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "24",
                              "type" : "Literal"
                           }, {
                              "localId" : "212",
                              "locator" : "57:64-57:66",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "365",
                              "type" : "Literal"
                           } ]
                        }
                     } ]
                  }
               }, {
                  "localId" : "223",
                  "locator" : "58:5-58:55",
                  "when" : {
                     "localId" : "216",
                     "locator" : "58:10-58:16",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "hours",
                     "type" : "Literal"
                  },
                  "then" : {
                     "localId" : "222",
                     "locator" : "58:23-58:55",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                     "type" : "Multiply",
                     "operand" : [ {
                        "type" : "ToDecimal",
                        "operand" : {
                           "localId" : "217",
                           "locator" : "58:23-58:31",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                           "name" : "frequency",
                           "type" : "OperandRef"
                        }
                     }, {
                        "localId" : "221",
                        "locator" : "58:35-58:55",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                        "type" : "Divide",
                        "operand" : [ {
                           "localId" : "218",
                           "locator" : "58:36-58:39",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                           "valueType" : "{urn:hl7-org:elm-types:r1}Decimal",
                           "value" : "24.0",
                           "type" : "Literal"
                        }, {
                           "localId" : "220",
                           "locator" : "58:43-58:54",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                           "path" : "value",
                           "type" : "Property",
                           "source" : {
                              "localId" : "219",
                              "locator" : "58:43-58:48",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                              "name" : "period",
                              "type" : "OperandRef"
                           }
                        } ]
                     } ]
                  }
               }, {
                  "localId" : "233",
                  "locator" : "59:5-59:62",
                  "when" : {
                     "localId" : "224",
                     "locator" : "59:10-59:18",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "minutes",
                     "type" : "Literal"
                  },
                  "then" : {
                     "localId" : "232",
                     "locator" : "59:25-59:62",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                     "type" : "Multiply",
                     "operand" : [ {
                        "localId" : "230",
                        "locator" : "59:25-59:57",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                        "type" : "Multiply",
                        "operand" : [ {
                           "type" : "ToDecimal",
                           "operand" : {
                              "localId" : "225",
                              "locator" : "59:25-59:33",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                              "name" : "frequency",
                              "type" : "OperandRef"
                           }
                        }, {
                           "localId" : "229",
                           "locator" : "59:37-59:57",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                           "type" : "Divide",
                           "operand" : [ {
                              "localId" : "226",
                              "locator" : "59:38-59:41",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "valueType" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "value" : "24.0",
                              "type" : "Literal"
                           }, {
                              "localId" : "228",
                              "locator" : "59:45-59:56",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "path" : "value",
                              "type" : "Property",
                              "source" : {
                                 "localId" : "227",
                                 "locator" : "59:45-59:50",
                                 "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                                 "name" : "period",
                                 "type" : "OperandRef"
                              }
                           } ]
                        } ]
                     }, {
                        "type" : "ToDecimal",
                        "operand" : {
                           "localId" : "231",
                           "locator" : "59:61-59:62",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                           "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                           "value" : "60",
                           "type" : "Literal"
                        }
                     } ]
                  }
               }, {
                  "localId" : "245",
                  "locator" : "60:5-60:67",
                  "when" : {
                     "localId" : "234",
                     "locator" : "60:10-60:18",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "seconds",
                     "type" : "Literal"
                  },
                  "then" : {
                     "localId" : "244",
                     "locator" : "60:25-60:67",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                     "type" : "Multiply",
                     "operand" : [ {
                        "localId" : "242",
                        "locator" : "60:25-60:62",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                        "type" : "Multiply",
                        "operand" : [ {
                           "localId" : "240",
                           "locator" : "60:25-60:57",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                           "type" : "Multiply",
                           "operand" : [ {
                              "type" : "ToDecimal",
                              "operand" : {
                                 "localId" : "235",
                                 "locator" : "60:25-60:33",
                                 "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                                 "name" : "frequency",
                                 "type" : "OperandRef"
                              }
                           }, {
                              "localId" : "239",
                              "locator" : "60:37-60:57",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "type" : "Divide",
                              "operand" : [ {
                                 "localId" : "236",
                                 "locator" : "60:38-60:41",
                                 "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                                 "valueType" : "{urn:hl7-org:elm-types:r1}Decimal",
                                 "value" : "24.0",
                                 "type" : "Literal"
                              }, {
                                 "localId" : "238",
                                 "locator" : "60:45-60:56",
                                 "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                                 "path" : "value",
                                 "type" : "Property",
                                 "source" : {
                                    "localId" : "237",
                                    "locator" : "60:45-60:50",
                                    "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                                    "name" : "period",
                                    "type" : "OperandRef"
                                 }
                              } ]
                           } ]
                        }, {
                           "type" : "ToDecimal",
                           "operand" : {
                              "localId" : "241",
                              "locator" : "60:61-60:62",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "60",
                              "type" : "Literal"
                           }
                        } ]
                     }, {
                        "type" : "ToDecimal",
                        "operand" : {
                           "localId" : "243",
                           "locator" : "60:66-60:67",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                           "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                           "value" : "60",
                           "type" : "Literal"
                        }
                     } ]
                  }
               }, {
                  "localId" : "255",
                  "locator" : "61:5-61:59",
                  "when" : {
                     "localId" : "246",
                     "locator" : "61:10-61:15",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "days",
                     "type" : "Literal"
                  },
                  "then" : {
                     "localId" : "254",
                     "locator" : "61:22-61:59",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                     "type" : "Divide",
                     "operand" : [ {
                        "localId" : "252",
                        "locator" : "61:22-61:54",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                        "type" : "Multiply",
                        "operand" : [ {
                           "type" : "ToDecimal",
                           "operand" : {
                              "localId" : "247",
                              "locator" : "61:22-61:30",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                              "name" : "frequency",
                              "type" : "OperandRef"
                           }
                        }, {
                           "localId" : "251",
                           "locator" : "61:34-61:54",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                           "type" : "Divide",
                           "operand" : [ {
                              "localId" : "248",
                              "locator" : "61:35-61:38",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "valueType" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "value" : "24.0",
                              "type" : "Literal"
                           }, {
                              "localId" : "250",
                              "locator" : "61:42-61:53",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "path" : "value",
                              "type" : "Property",
                              "source" : {
                                 "localId" : "249",
                                 "locator" : "61:42-61:47",
                                 "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                                 "name" : "period",
                                 "type" : "OperandRef"
                              }
                           } ]
                        } ]
                     }, {
                        "type" : "ToDecimal",
                        "operand" : {
                           "localId" : "253",
                           "locator" : "61:58-61:59",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                           "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                           "value" : "24",
                           "type" : "Literal"
                        }
                     } ]
                  }
               }, {
                  "localId" : "267",
                  "locator" : "62:5-62:66",
                  "when" : {
                     "localId" : "256",
                     "locator" : "62:10-62:16",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "weeks",
                     "type" : "Literal"
                  },
                  "then" : {
                     "localId" : "266",
                     "locator" : "62:23-62:66",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                     "type" : "Divide",
                     "operand" : [ {
                        "localId" : "262",
                        "locator" : "62:23-62:55",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                        "type" : "Multiply",
                        "operand" : [ {
                           "type" : "ToDecimal",
                           "operand" : {
                              "localId" : "257",
                              "locator" : "62:23-62:31",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                              "name" : "frequency",
                              "type" : "OperandRef"
                           }
                        }, {
                           "localId" : "261",
                           "locator" : "62:35-62:55",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                           "type" : "Divide",
                           "operand" : [ {
                              "localId" : "258",
                              "locator" : "62:36-62:39",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "valueType" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "value" : "24.0",
                              "type" : "Literal"
                           }, {
                              "localId" : "260",
                              "locator" : "62:43-62:54",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "path" : "value",
                              "type" : "Property",
                              "source" : {
                                 "localId" : "259",
                                 "locator" : "62:43-62:48",
                                 "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                                 "name" : "period",
                                 "type" : "OperandRef"
                              }
                           } ]
                        } ]
                     }, {
                        "type" : "ToDecimal",
                        "operand" : {
                           "localId" : "265",
                           "locator" : "62:59-62:66",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                           "type" : "Multiply",
                           "operand" : [ {
                              "localId" : "263",
                              "locator" : "62:60-62:61",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "24",
                              "type" : "Literal"
                           }, {
                              "localId" : "264",
                              "locator" : "62:65",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "7",
                              "type" : "Literal"
                           } ]
                        }
                     } ]
                  }
               }, {
                  "localId" : "279",
                  "locator" : "63:5-63:68",
                  "when" : {
                     "localId" : "268",
                     "locator" : "63:10-63:17",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "months",
                     "type" : "Literal"
                  },
                  "then" : {
                     "localId" : "278",
                     "locator" : "63:24-63:68",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                     "type" : "Divide",
                     "operand" : [ {
                        "localId" : "274",
                        "locator" : "63:24-63:56",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                        "type" : "Multiply",
                        "operand" : [ {
                           "type" : "ToDecimal",
                           "operand" : {
                              "localId" : "269",
                              "locator" : "63:24-63:32",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                              "name" : "frequency",
                              "type" : "OperandRef"
                           }
                        }, {
                           "localId" : "273",
                           "locator" : "63:36-63:56",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                           "type" : "Divide",
                           "operand" : [ {
                              "localId" : "270",
                              "locator" : "63:37-63:40",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "valueType" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "value" : "24.0",
                              "type" : "Literal"
                           }, {
                              "localId" : "272",
                              "locator" : "63:44-63:55",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "path" : "value",
                              "type" : "Property",
                              "source" : {
                                 "localId" : "271",
                                 "locator" : "63:44-63:49",
                                 "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                                 "name" : "period",
                                 "type" : "OperandRef"
                              }
                           } ]
                        } ]
                     }, {
                        "type" : "ToDecimal",
                        "operand" : {
                           "localId" : "277",
                           "locator" : "63:60-63:68",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                           "type" : "Multiply",
                           "operand" : [ {
                              "localId" : "275",
                              "locator" : "63:61-63:62",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "24",
                              "type" : "Literal"
                           }, {
                              "localId" : "276",
                              "locator" : "63:66-63:67",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "30",
                              "type" : "Literal"
                           } ]
                        }
                     } ]
                  }
               }, {
                  "localId" : "291",
                  "locator" : "64:5-64:68",
                  "when" : {
                     "localId" : "280",
                     "locator" : "64:10-64:16",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "years",
                     "type" : "Literal"
                  },
                  "then" : {
                     "localId" : "290",
                     "locator" : "64:23-64:68",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                     "type" : "Divide",
                     "operand" : [ {
                        "localId" : "286",
                        "locator" : "64:23-64:55",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                        "type" : "Multiply",
                        "operand" : [ {
                           "type" : "ToDecimal",
                           "operand" : {
                              "localId" : "281",
                              "locator" : "64:23-64:31",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                              "name" : "frequency",
                              "type" : "OperandRef"
                           }
                        }, {
                           "localId" : "285",
                           "locator" : "64:35-64:55",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                           "type" : "Divide",
                           "operand" : [ {
                              "localId" : "282",
                              "locator" : "64:36-64:39",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "valueType" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "value" : "24.0",
                              "type" : "Literal"
                           }, {
                              "localId" : "284",
                              "locator" : "64:43-64:54",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                              "path" : "value",
                              "type" : "Property",
                              "source" : {
                                 "localId" : "283",
                                 "locator" : "64:43-64:48",
                                 "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                                 "name" : "period",
                                 "type" : "OperandRef"
                              }
                           } ]
                        } ]
                     }, {
                        "type" : "ToDecimal",
                        "operand" : {
                           "localId" : "289",
                           "locator" : "64:59-64:68",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                           "type" : "Multiply",
                           "operand" : [ {
                              "localId" : "287",
                              "locator" : "64:60-64:61",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "24",
                              "type" : "Literal"
                           }, {
                              "localId" : "288",
                              "locator" : "64:65-64:67",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "365",
                              "type" : "Literal"
                           } ]
                        }
                     } ]
                  }
               } ],
               "else" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Decimal",
                  "type" : "As",
                  "operand" : {
                     "localId" : "300",
                     "locator" : "65:10-65:103",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Any",
                     "type" : "Message",
                     "source" : {
                        "localId" : "292",
                        "locator" : "65:18-65:21",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Any",
                        "type" : "Null"
                     },
                     "condition" : {
                        "localId" : "293",
                        "locator" : "65:24-65:27",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Boolean",
                        "valueType" : "{urn:hl7-org:elm-types:r1}Boolean",
                        "value" : "true",
                        "type" : "Literal"
                     },
                     "code" : {
                        "localId" : "294",
                        "locator" : "65:30-65:59",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
                        "valueType" : "{urn:hl7-org:elm-types:r1}String",
                        "value" : "CMDLogic.ToDaily.UnknownUnit",
                        "type" : "Literal"
                     },
                     "severity" : {
                        "localId" : "295",
                        "locator" : "65:62-65:71",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
                        "name" : "ErrorLevel",
                        "type" : "ParameterRef"
                     },
                     "message" : {
                        "localId" : "299",
                        "locator" : "65:74-65:102",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
                        "type" : "Concatenate",
                        "operand" : [ {
                           "type" : "Coalesce",
                           "operand" : [ {
                              "localId" : "296",
                              "locator" : "65:74-65:88",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
                              "valueType" : "{urn:hl7-org:elm-types:r1}String",
                              "value" : "Unknown unit ",
                              "type" : "Literal"
                           }, {
                              "valueType" : "{urn:hl7-org:elm-types:r1}String",
                              "value" : "",
                              "type" : "Literal"
                           } ]
                        }, {
                           "type" : "Coalesce",
                           "operand" : [ {
                              "localId" : "298",
                              "locator" : "65:92-65:102",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
                              "path" : "unit",
                              "type" : "Property",
                              "source" : {
                                 "localId" : "297",
                                 "locator" : "65:92-65:97",
                                 "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                                 "name" : "period",
                                 "type" : "OperandRef"
                              }
                           }, {
                              "valueType" : "{urn:hl7-org:elm-types:r1}String",
                              "value" : "",
                              "type" : "Literal"
                           } ]
                        } ]
                     }
                  }
               }
            },
            "operand" : [ {
               "name" : "frequency",
               "operandTypeSpecifier" : {
                  "localId" : "60",
                  "locator" : "42:37-42:50",
                  "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                  "name" : "{urn:hl7-org:elm-types:r1}Integer",
                  "type" : "NamedTypeSpecifier"
               }
            }, {
               "name" : "period",
               "operandTypeSpecifier" : {
                  "localId" : "61",
                  "locator" : "42:60-42:74",
                  "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                  "name" : "{urn:hl7-org:elm-types:r1}Quantity",
                  "type" : "NamedTypeSpecifier"
               }
            } ]
         }, {
            "localId" : "318",
            "locator" : "72:1-77:5",
            "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
            "name" : "ToDaily",
            "context" : "Patient",
            "accessLevel" : "Public",
            "type" : "FunctionDef",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "318",
                  "s" : [ {
                     "value" : [ "/*Returns a daily frequency for the given code representation of frequency.\n  The function expects codes from the [EventTiming](http://hl7.org/fhir/codesystem-event-timing.html) or\n  [V3TimingEvent](http://hl7.org/fhir/v3/TimingEvent/cs.html) code systems.\n  // TODO: Determine whether or not we should use timing.code at all....*/\n","define function ","\"ToDaily\"","(","frequency"," " ]
                  }, {
                     "r" : "303",
                     "s" : [ {
                        "value" : [ "Code" ]
                     } ]
                  }, {
                     "value" : [ " ):\n  " ]
                  }, {
                     "r" : "317",
                     "s" : [ {
                        "r" : "317",
                        "s" : [ {
                           "value" : [ "case " ]
                        }, {
                           "r" : "304",
                           "s" : [ {
                              "value" : [ "frequency" ]
                           } ]
                        }, {
                           "value" : [ "\n    " ]
                        }, {
                           "r" : "307",
                           "s" : [ {
                              "value" : [ "when " ]
                           }, {
                              "r" : "305",
                              "s" : [ {
                                 "value" : [ "\"C\"" ]
                              } ]
                           }, {
                              "r" : "306",
                              "value" : [ " then ","3.0" ]
                           } ]
                        }, {
                           "value" : [ "\n    // etc.\n    else " ]
                        }, {
                           "r" : "316",
                           "s" : [ {
                              "r" : "308",
                              "value" : [ "Message","(","null",", ","true",", " ]
                           }, {
                              "r" : "310",
                              "s" : [ {
                                 "value" : [ "'CMDLogic.ToDaily.UnknownFrequencyCode'" ]
                              } ]
                           }, {
                              "value" : [ ", " ]
                           }, {
                              "r" : "311",
                              "s" : [ {
                                 "value" : [ "ErrorLevel" ]
                              } ]
                           }, {
                              "value" : [ ", " ]
                           }, {
                              "r" : "315",
                              "s" : [ {
                                 "r" : "312",
                                 "s" : [ {
                                    "value" : [ "'Unknown frequency code '" ]
                                 } ]
                              }, {
                                 "value" : [ " & " ]
                              }, {
                                 "r" : "314",
                                 "s" : [ {
                                    "r" : "313",
                                    "s" : [ {
                                       "value" : [ "frequency" ]
                                    } ]
                                 }, {
                                    "value" : [ "." ]
                                 }, {
                                    "r" : "314",
                                    "s" : [ {
                                       "value" : [ "code" ]
                                    } ]
                                 } ]
                              } ]
                           }, {
                              "value" : [ ")" ]
                           } ]
                        }, {
                           "value" : [ "\n  end" ]
                        } ]
                     } ]
                  } ]
               }
            } ],
            "expression" : {
               "localId" : "317",
               "locator" : "73:3-77:5",
               "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
               "type" : "Case",
               "comparand" : {
                  "localId" : "304",
                  "locator" : "73:8-73:16",
                  "resultTypeName" : "{urn:hl7-org:elm-types:r1}Code",
                  "name" : "frequency",
                  "type" : "OperandRef"
               },
               "caseItem" : [ {
                  "localId" : "307",
                  "locator" : "74:5-74:21",
                  "when" : {
                     "localId" : "305",
                     "locator" : "74:10-74:12",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Code",
                     "name" : "C",
                     "type" : "CodeRef"
                  },
                  "then" : {
                     "localId" : "306",
                     "locator" : "74:19-74:21",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                     "valueType" : "{urn:hl7-org:elm-types:r1}Decimal",
                     "value" : "3.0",
                     "type" : "Literal"
                  }
               } ],
               "else" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Decimal",
                  "type" : "As",
                  "operand" : {
                     "localId" : "316",
                     "locator" : "76:10-76:125",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Any",
                     "type" : "Message",
                     "source" : {
                        "localId" : "308",
                        "locator" : "76:18-76:21",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Any",
                        "type" : "Null"
                     },
                     "condition" : {
                        "localId" : "309",
                        "locator" : "76:24-76:27",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Boolean",
                        "valueType" : "{urn:hl7-org:elm-types:r1}Boolean",
                        "value" : "true",
                        "type" : "Literal"
                     },
                     "code" : {
                        "localId" : "310",
                        "locator" : "76:30-76:68",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
                        "valueType" : "{urn:hl7-org:elm-types:r1}String",
                        "value" : "CMDLogic.ToDaily.UnknownFrequencyCode",
                        "type" : "Literal"
                     },
                     "severity" : {
                        "localId" : "311",
                        "locator" : "76:71-76:80",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
                        "name" : "ErrorLevel",
                        "type" : "ParameterRef"
                     },
                     "message" : {
                        "localId" : "315",
                        "locator" : "76:83-76:124",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
                        "type" : "Concatenate",
                        "operand" : [ {
                           "type" : "Coalesce",
                           "operand" : [ {
                              "localId" : "312",
                              "locator" : "76:83-76:107",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
                              "valueType" : "{urn:hl7-org:elm-types:r1}String",
                              "value" : "Unknown frequency code ",
                              "type" : "Literal"
                           }, {
                              "valueType" : "{urn:hl7-org:elm-types:r1}String",
                              "value" : "",
                              "type" : "Literal"
                           } ]
                        }, {
                           "type" : "Coalesce",
                           "operand" : [ {
                              "localId" : "314",
                              "locator" : "76:111-76:124",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
                              "path" : "code",
                              "type" : "Property",
                              "source" : {
                                 "localId" : "313",
                                 "locator" : "76:111-76:119",
                                 "resultTypeName" : "{urn:hl7-org:elm-types:r1}Code",
                                 "name" : "frequency",
                                 "type" : "OperandRef"
                              }
                           }, {
                              "valueType" : "{urn:hl7-org:elm-types:r1}String",
                              "value" : "",
                              "type" : "Literal"
                           } ]
                        } ]
                     }
                  }
               }
            },
            "operand" : [ {
               "name" : "frequency",
               "operandTypeSpecifier" : {
                  "localId" : "303",
                  "locator" : "72:37-72:40",
                  "resultTypeName" : "{urn:hl7-org:elm-types:r1}Code",
                  "name" : "{urn:hl7-org:elm-types:r1}Code",
                  "type" : "NamedTypeSpecifier"
               }
            } ]
         }, {
            "localId" : "437",
            "locator" : "154:1-180:110",
            "name" : "MedicationRequestPeriod",
            "context" : "Patient",
            "accessLevel" : "Public",
            "type" : "FunctionDef",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "437",
                  "s" : [ {
                     "value" : [ "/*\n  Now that we have a ToDaily function, we can approach calculation of the\n  duration of medication for an order. First, consider the definitions\n  for each element:\n  \n  * 1 and only 1 dosageInstruction\n  * 1 and only 1 doseAndRate\n  * 1 timing with 1 repeat\n  * frequency, frequencyMax, defaulting to 1\n  * period, periodUnit, defaulting to 1 'd'\n  * doseQuantity or doseRange\n  * timeOfDay\n  \n  * authoredOn: The date the prescription was written\n  * dispenseRequest.validityPeriod: Time period supply is authorized for\n  * dispenseRequest.quantity: amount of medication supplied per dispense\n  * dispenseRequest.numberOfRepeatsAllowed: number of refills authorized\n  * dispenseRequest.expectedSupplyDuration: number of days supply per dispense\n  * dosageInstruction.timing.repeat.boundsDuration: total duration of the repeat\n  * dosageInstruction.timing.repeat.boundsRange: range of durations of the repeat\n  * dosageInstruction.timing.repeat.boundsPeriod: period bounds of the repeat\n  * dosageInstruction.timing.repeat.count: number of times to repeat\n  * dosageInstruction.timing.repeat.countMax: maximum number of times to repeat\n  * dosageInstruction.timing.repeat.frequency: event occurs frequency times per period\n  * dosageInstruction.timing.repeat.frequencyMax: event occurs up to frequencyMax times per period\n  * dosageInstruction.timing.repeat.period: event occurs frequency times per period\n  * dosageInstruction.timing.repeat.periodMax: upper limit of period\n  * dosageInstruction.timing.repeat.periodUnit: period duration (s | min | h | d | wk | mo | a)\n  * dosageInstruction.timing.repeat.timeOfDay: time of day for the event (0..*)\n  * dosageInstruction.timing.repeat.when: event timing (HS | WAKE | C | CM | CD | CV | AC | ACM...)\n  * dosageInstruction.timing.code: BID | TID | QID | AM | PM | QD | QOD...\n  * dosageInstruction.asNeeded\n  * dosageInstruction.doseAndRate.doseQuantity\n  * dosageInstruction.doseAndRate.doseRange\n  \n  If the boundsPeriod is present (and completely specified), we can use that directly\n  \n    dosage.timing.repeat.boundsPeriod\n  \n  If expectedSupplyDuration is present, then the duration is\n  \n    expectedSupplyDuration * (1 + numberOfRepeatsAllowed)\n  \n  If expectedSupplyDuration is not present, then it must be calculated based on the quantity, dosage, and frequency:\n  \n    (quantity / (dosage * frequency)) * (1 + numberOfRepeatsAllowed)\n  \n    dosage: Coalesce(end of doseAndRate.doseRange, doseAndRate.doseQuantity)\n    frequency: Coalesce(frequencyMax, frequency)\n    period: Quantity(period, periodUnit)\n  \n  This calculation results in a number of days, which can then be turned into a period by anchoring that to the\n  start of the validityPeriod or the authoredOn:\n  \n    Interval[earliestDispensable, earliestDispensable + expectedSupplyDuration]\n  \n    earliestDispensable: Coalesce(start of validityPeriod, authoredOn)\n  \n  The following function illustrates this completely:\n  */\n\n/*Calculates the Medication Period for a single MedicationRequest.\nMedicationRequest instances provided to this function are expected\nto conform to the [MMEMedicationRequest](http://build.fhir.org/ig/cqframework/opioid-mme-r4/StructureDefinition-mmemedicationrequest.html)\nprofile, which expects:\n* 1 and only 1 dosageInstruction, multiple dosageInstruction elements will result in an error\n* 1 and only 1 doseAndRate, multiple doseAndRate elements will result in an error\n* 1 timing with 1 repeat, missing timing or repeat elements will result in a null\n* frequency, frequencyMax, defaulting to 1\n* period, periodUnit, defaulting to 1 'd'\n* timeOfDay\n* doseQuantity or doseRange, missing doseQuantity and doseRange will result in a null\nNote that MedicationRequest status is not considered by this calculation, as the\nlist of MedicationRequest instances provided to this function should already have\nconsidered appropriate statuses, depending on the use case, typically `completed`.*/\n","define function ","\"MedicationRequestPeriod\"","(","Request"," " ]
                  }, {
                     "r" : "319",
                     "s" : [ {
                        "value" : [ "\"MedicationRequest\"" ]
                     } ]
                  }, {
                     "value" : [ " ):\n  " ]
                  }, {
                     "r" : "436",
                     "s" : [ {
                        "r" : "436",
                        "s" : [ {
                           "s" : [ {
                              "r" : "321",
                              "s" : [ {
                                 "r" : "320",
                                 "s" : [ {
                                    "s" : [ {
                                       "value" : [ "Request" ]
                                    } ]
                                 } ]
                              }, {
                                 "value" : [ " ","R" ]
                              } ]
                           } ]
                        }, {
                           "value" : [ "\n    " ]
                        }, {
                           "s" : [ {
                              "value" : [ "let\n      " ]
                           }, {
                              "r" : "325",
                              "s" : [ {
                                 "value" : [ "dosage",": " ]
                              }, {
                                 "r" : "324",
                                 "s" : [ {
                                    "value" : [ "singleton from " ]
                                 }, {
                                    "r" : "323",
                                    "s" : [ {
                                       "r" : "322",
                                       "s" : [ {
                                          "value" : [ "R" ]
                                       } ]
                                    }, {
                                       "value" : [ "." ]
                                    }, {
                                       "r" : "323",
                                       "s" : [ {
                                          "value" : [ "dosageInstruction" ]
                                       } ]
                                    } ]
                                 } ]
                              } ]
                           }, {
                              "value" : [ ",\n      " ]
                           }, {
                              "r" : "329",
                              "s" : [ {
                                 "value" : [ "doseAndRate",": " ]
                              }, {
                                 "r" : "328",
                                 "s" : [ {
                                    "value" : [ "singleton from " ]
                                 }, {
                                    "r" : "327",
                                    "s" : [ {
                                       "r" : "326",
                                       "s" : [ {
                                          "value" : [ "dosage" ]
                                       } ]
                                    }, {
                                       "value" : [ "." ]
                                    }, {
                                       "r" : "327",
                                       "s" : [ {
                                          "value" : [ "doseAndRate" ]
                                       } ]
                                    } ]
                                 } ]
                              } ]
                           }, {
                              "value" : [ ",\n      " ]
                           }, {
                              "r" : "334",
                              "s" : [ {
                                 "value" : [ "doseRange",": " ]
                              }, {
                                 "r" : "333",
                                 "s" : [ {
                                    "r" : "331",
                                    "s" : [ {
                                       "r" : "330",
                                       "s" : [ {
                                          "value" : [ "doseAndRate" ]
                                       } ]
                                    }, {
                                       "value" : [ "." ]
                                    }, {
                                       "r" : "331",
                                       "s" : [ {
                                          "value" : [ "dose" ]
                                       } ]
                                    } ]
                                 }, {
                                    "value" : [ " as " ]
                                 }, {
                                    "r" : "332",
                                    "s" : [ {
                                       "value" : [ "Range" ]
                                    } ]
                                 } ]
                              } ]
                           }, {
                              "value" : [ ",\n      " ]
                           }, {
                              "r" : "339",
                              "s" : [ {
                                 "value" : [ "doseQuantity",": " ]
                              }, {
                                 "r" : "338",
                                 "s" : [ {
                                    "r" : "336",
                                    "s" : [ {
                                       "r" : "335",
                                       "s" : [ {
                                          "value" : [ "doseAndRate" ]
                                       } ]
                                    }, {
                                       "value" : [ "." ]
                                    }, {
                                       "r" : "336",
                                       "s" : [ {
                                          "value" : [ "dose" ]
                                       } ]
                                    } ]
                                 }, {
                                    "value" : [ " as " ]
                                 }, {
                                    "r" : "337",
                                    "s" : [ {
                                       "value" : [ "SimpleQuantity" ]
                                    } ]
                                 } ]
                              } ]
                           }, {
                              "value" : [ ",\n      " ]
                           }, {
                              "r" : "344",
                              "s" : [ {
                                 "value" : [ "dose",": " ]
                              }, {
                                 "r" : "343",
                                 "s" : [ {
                                    "value" : [ "Coalesce","(" ]
                                 }, {
                                    "r" : "341",
                                    "s" : [ {
                                       "value" : [ "end of " ]
                                    }, {
                                       "r" : "340",
                                       "s" : [ {
                                          "value" : [ "doseRange" ]
                                       } ]
                                    } ]
                                 }, {
                                    "value" : [ ", " ]
                                 }, {
                                    "r" : "342",
                                    "s" : [ {
                                       "value" : [ "doseQuantity" ]
                                    } ]
                                 }, {
                                    "value" : [ ")" ]
                                 } ]
                              } ]
                           }, {
                              "value" : [ ",\n      " ]
                           }, {
                              "r" : "347",
                              "s" : [ {
                                 "value" : [ "timing",": " ]
                              }, {
                                 "r" : "346",
                                 "s" : [ {
                                    "r" : "345",
                                    "s" : [ {
                                       "value" : [ "dosage" ]
                                    } ]
                                 }, {
                                    "value" : [ "." ]
                                 }, {
                                    "r" : "346",
                                    "s" : [ {
                                       "value" : [ "timing" ]
                                    } ]
                                 } ]
                              } ]
                           }, {
                              "value" : [ ",\n      " ]
                           }, {
                              "r" : "355",
                              "s" : [ {
                                 "value" : [ "frequency",": " ]
                              }, {
                                 "r" : "354",
                                 "s" : [ {
                                    "value" : [ "Coalesce","(" ]
                                 }, {
                                    "r" : "350",
                                    "s" : [ {
                                       "r" : "349",
                                       "s" : [ {
                                          "r" : "348",
                                          "s" : [ {
                                             "value" : [ "timing" ]
                                          } ]
                                       }, {
                                          "value" : [ "." ]
                                       }, {
                                          "r" : "349",
                                          "s" : [ {
                                             "value" : [ "repeat" ]
                                          } ]
                                       } ]
                                    }, {
                                       "value" : [ "." ]
                                    }, {
                                       "r" : "350",
                                       "s" : [ {
                                          "value" : [ "frequencyMax" ]
                                       } ]
                                    } ]
                                 }, {
                                    "value" : [ ", " ]
                                 }, {
                                    "r" : "353",
                                    "s" : [ {
                                       "r" : "352",
                                       "s" : [ {
                                          "r" : "351",
                                          "s" : [ {
                                             "value" : [ "timing" ]
                                          } ]
                                       }, {
                                          "value" : [ "." ]
                                       }, {
                                          "r" : "352",
                                          "s" : [ {
                                             "value" : [ "repeat" ]
                                          } ]
                                       } ]
                                    }, {
                                       "value" : [ "." ]
                                    }, {
                                       "r" : "353",
                                       "s" : [ {
                                          "value" : [ "frequency" ]
                                       } ]
                                    } ]
                                 }, {
                                    "value" : [ ")" ]
                                 } ]
                              } ]
                           }, {
                              "value" : [ ",\n      " ]
                           }, {
                              "r" : "364",
                              "s" : [ {
                                 "value" : [ "period",": " ]
                              }, {
                                 "r" : "363",
                                 "s" : [ {
                                    "value" : [ "System",".","Quantity"," { " ]
                                 }, {
                                    "s" : [ {
                                       "value" : [ "value",": " ]
                                    }, {
                                       "r" : "358",
                                       "s" : [ {
                                          "r" : "357",
                                          "s" : [ {
                                             "r" : "356",
                                             "s" : [ {
                                                "value" : [ "timing" ]
                                             } ]
                                          }, {
                                             "value" : [ "." ]
                                          }, {
                                             "r" : "357",
                                             "s" : [ {
                                                "value" : [ "repeat" ]
                                             } ]
                                          } ]
                                       }, {
                                          "value" : [ "." ]
                                       }, {
                                          "r" : "358",
                                          "s" : [ {
                                             "value" : [ "period" ]
                                          } ]
                                       } ]
                                    } ]
                                 }, {
                                    "value" : [ ", " ]
                                 }, {
                                    "s" : [ {
                                       "value" : [ "unit",": " ]
                                    }, {
                                       "r" : "362",
                                       "s" : [ {
                                          "r" : "361",
                                          "s" : [ {
                                             "r" : "360",
                                             "s" : [ {
                                                "r" : "359",
                                                "s" : [ {
                                                   "value" : [ "timing" ]
                                                } ]
                                             }, {
                                                "value" : [ "." ]
                                             }, {
                                                "r" : "360",
                                                "s" : [ {
                                                   "value" : [ "repeat" ]
                                                } ]
                                             } ]
                                          }, {
                                             "value" : [ "." ]
                                          }, {
                                             "r" : "361",
                                             "s" : [ {
                                                "value" : [ "periodUnit" ]
                                             } ]
                                          } ]
                                       }, {
                                          "value" : [ "." ]
                                       }, {
                                          "r" : "362",
                                          "s" : [ {
                                             "value" : [ "value" ]
                                          } ]
                                       } ]
                                    } ]
                                 }, {
                                    "value" : [ " }" ]
                                 } ]
                              } ]
                           }, {
                              "value" : [ ",\n      " ]
                           }, {
                              "r" : "374",
                              "s" : [ {
                                 "value" : [ "dosesPerDay",": " ]
                              }, {
                                 "r" : "373",
                                 "s" : [ {
                                    "value" : [ "Coalesce","(" ]
                                 }, {
                                    "r" : "367",
                                    "s" : [ {
                                       "value" : [ "ToDaily","(" ]
                                    }, {
                                       "r" : "365",
                                       "s" : [ {
                                          "value" : [ "frequency" ]
                                       } ]
                                    }, {
                                       "value" : [ ", " ]
                                    }, {
                                       "r" : "366",
                                       "s" : [ {
                                          "value" : [ "period" ]
                                       } ]
                                    }, {
                                       "value" : [ ")" ]
                                    } ]
                                 }, {
                                    "value" : [ ", " ]
                                 }, {
                                    "r" : "371",
                                    "s" : [ {
                                       "value" : [ "Count","(" ]
                                    }, {
                                       "r" : "370",
                                       "s" : [ {
                                          "r" : "369",
                                          "s" : [ {
                                             "r" : "368",
                                             "s" : [ {
                                                "value" : [ "timing" ]
                                             } ]
                                          }, {
                                             "value" : [ "." ]
                                          }, {
                                             "r" : "369",
                                             "s" : [ {
                                                "value" : [ "repeat" ]
                                             } ]
                                          } ]
                                       }, {
                                          "value" : [ "." ]
                                       }, {
                                          "r" : "370",
                                          "s" : [ {
                                             "value" : [ "timeOfDay" ]
                                          } ]
                                       } ]
                                    }, {
                                       "value" : [ ")" ]
                                    } ]
                                 }, {
                                    "r" : "372",
                                    "value" : [ ", ","1.0",")" ]
                                 } ]
                              } ]
                           }, {
                              "value" : [ ",\n      " ]
                           }, {
                              "r" : "380",
                              "s" : [ {
                                 "value" : [ "boundsPeriod",": " ]
                              }, {
                                 "r" : "379",
                                 "s" : [ {
                                    "r" : "377",
                                    "s" : [ {
                                       "r" : "376",
                                       "s" : [ {
                                          "r" : "375",
                                          "s" : [ {
                                             "value" : [ "timing" ]
                                          } ]
                                       }, {
                                          "value" : [ "." ]
                                       }, {
                                          "r" : "376",
                                          "s" : [ {
                                             "value" : [ "repeat" ]
                                          } ]
                                       } ]
                                    }, {
                                       "value" : [ "." ]
                                    }, {
                                       "r" : "377",
                                       "s" : [ {
                                          "value" : [ "bounds" ]
                                       } ]
                                    } ]
                                 }, {
                                    "value" : [ " as " ]
                                 }, {
                                    "r" : "378",
                                    "s" : [ {
                                       "value" : [ "Period" ]
                                    } ]
                                 } ]
                              } ]
                           }, {
                              "value" : [ ",\n      " ]
                           }, {
                              "r" : "384",
                              "s" : [ {
                                 "value" : [ "daysSupply",": " ]
                              }, {
                                 "r" : "383",
                                 "s" : [ {
                                    "r" : "382",
                                    "s" : [ {
                                       "r" : "381",
                                       "s" : [ {
                                          "value" : [ "R" ]
                                       } ]
                                    }, {
                                       "value" : [ "." ]
                                    }, {
                                       "r" : "382",
                                       "s" : [ {
                                          "value" : [ "dispenseRequest" ]
                                       } ]
                                    } ]
                                 }, {
                                    "value" : [ "." ]
                                 }, {
                                    "r" : "383",
                                    "s" : [ {
                                       "value" : [ "expectedSupplyDuration" ]
                                    } ]
                                 } ]
                              } ]
                           }, {
                              "value" : [ ",\n      " ]
                           }, {
                              "r" : "388",
                              "s" : [ {
                                 "value" : [ "quantity",": " ]
                              }, {
                                 "r" : "387",
                                 "s" : [ {
                                    "r" : "386",
                                    "s" : [ {
                                       "r" : "385",
                                       "s" : [ {
                                          "value" : [ "R" ]
                                       } ]
                                    }, {
                                       "value" : [ "." ]
                                    }, {
                                       "r" : "386",
                                       "s" : [ {
                                          "value" : [ "dispenseRequest" ]
                                       } ]
                                    } ]
                                 }, {
                                    "value" : [ "." ]
                                 }, {
                                    "r" : "387",
                                    "s" : [ {
                                       "value" : [ "quantity" ]
                                    } ]
                                 } ]
                              } ]
                           }, {
                              "value" : [ ",\n      " ]
                           }, {
                              "r" : "394",
                              "s" : [ {
                                 "value" : [ "refills",": " ]
                              }, {
                                 "r" : "393",
                                 "s" : [ {
                                    "value" : [ "Coalesce","(" ]
                                 }, {
                                    "r" : "391",
                                    "s" : [ {
                                       "r" : "390",
                                       "s" : [ {
                                          "r" : "389",
                                          "s" : [ {
                                             "value" : [ "R" ]
                                          } ]
                                       }, {
                                          "value" : [ "." ]
                                       }, {
                                          "r" : "390",
                                          "s" : [ {
                                             "value" : [ "dispenseRequest" ]
                                          } ]
                                       } ]
                                    }, {
                                       "value" : [ "." ]
                                    }, {
                                       "r" : "391",
                                       "s" : [ {
                                          "value" : [ "numberOfRepeatsAllowed" ]
                                       } ]
                                    } ]
                                 }, {
                                    "r" : "392",
                                    "value" : [ ", ","0",")" ]
                                 } ]
                              } ]
                           }, {
                              "value" : [ ",\n      " ]
                           }, {
                              "r" : "404",
                              "s" : [ {
                                 "value" : [ "startDate",":\n        " ]
                              }, {
                                 "r" : "403",
                                 "s" : [ {
                                    "value" : [ "Coalesce","(\n          " ]
                                 }, {
                                    "r" : "396",
                                    "s" : [ {
                                       "value" : [ "start of " ]
                                    }, {
                                       "r" : "395",
                                       "s" : [ {
                                          "value" : [ "boundsPeriod" ]
                                       } ]
                                    } ]
                                 }, {
                                    "value" : [ ",\n          " ]
                                 }, {
                                    "r" : "400",
                                    "s" : [ {
                                       "value" : [ "start of " ]
                                    }, {
                                       "r" : "399",
                                       "s" : [ {
                                          "r" : "398",
                                          "s" : [ {
                                             "r" : "397",
                                             "s" : [ {
                                                "value" : [ "R" ]
                                             } ]
                                          }, {
                                             "value" : [ "." ]
                                          }, {
                                             "r" : "398",
                                             "s" : [ {
                                                "value" : [ "dispenseRequest" ]
                                             } ]
                                          } ]
                                       }, {
                                          "value" : [ "." ]
                                       }, {
                                          "r" : "399",
                                          "s" : [ {
                                             "value" : [ "validityPeriod" ]
                                          } ]
                                       } ]
                                    } ]
                                 }, {
                                    "value" : [ ",\n          " ]
                                 }, {
                                    "r" : "402",
                                    "s" : [ {
                                       "r" : "401",
                                       "s" : [ {
                                          "value" : [ "R" ]
                                       } ]
                                    }, {
                                       "value" : [ "." ]
                                    }, {
                                       "r" : "402",
                                       "s" : [ {
                                          "value" : [ "authoredOn" ]
                                       } ]
                                    } ]
                                 }, {
                                    "value" : [ "\n        )" ]
                                 } ]
                              } ]
                           } ]
                        }, {
                           "value" : [ "\n    " ]
                        }, {
                           "r" : "435",
                           "s" : [ {
                              "value" : [ "return\n      " ]
                           }, {
                              "r" : "434",
                              "s" : [ {
                                 "value" : [ "if " ]
                              }, {
                                 "r" : "414",
                                 "s" : [ {
                                    "value" : [ "not " ]
                                 }, {
                                    "r" : "413",
                                    "s" : [ {
                                       "value" : [ "(" ]
                                    }, {
                                       "r" : "413",
                                       "s" : [ {
                                          "r" : "407",
                                          "s" : [ {
                                             "r" : "406",
                                             "s" : [ {
                                                "value" : [ "end of " ]
                                             }, {
                                                "r" : "405",
                                                "s" : [ {
                                                   "value" : [ "boundsPeriod" ]
                                                } ]
                                             } ]
                                          }, {
                                             "value" : [ " is null" ]
                                          } ]
                                       }, {
                                          "value" : [ " or " ]
                                       }, {
                                          "r" : "412",
                                          "s" : [ {
                                             "r" : "409",
                                             "s" : [ {
                                                "value" : [ "end of " ]
                                             }, {
                                                "r" : "408",
                                                "s" : [ {
                                                   "value" : [ "boundsPeriod" ]
                                                } ]
                                             } ]
                                          }, {
                                             "value" : [ " ","="," " ]
                                          }, {
                                             "r" : "411",
                                             "s" : [ {
                                                "value" : [ "maximum"," " ]
                                             }, {
                                                "r" : "410",
                                                "s" : [ {
                                                   "value" : [ "DateTime" ]
                                                } ]
                                             } ]
                                          } ]
                                       } ]
                                    }, {
                                       "value" : [ ")" ]
                                    } ]
                                 } ]
                              }, {
                                 "value" : [ " then\n        " ]
                              }, {
                                 "r" : "418",
                                 "s" : [ {
                                    "value" : [ "Interval[" ]
                                 }, {
                                    "r" : "415",
                                    "s" : [ {
                                       "value" : [ "startDate" ]
                                    } ]
                                 }, {
                                    "value" : [ ", " ]
                                 }, {
                                    "r" : "417",
                                    "s" : [ {
                                       "value" : [ "end of " ]
                                    }, {
                                       "r" : "416",
                                       "s" : [ {
                                          "value" : [ "boundsPeriod" ]
                                       } ]
                                    } ]
                                 }, {
                                    "value" : [ "]" ]
                                 } ]
                              }, {
                                 "value" : [ "\n      else\n        " ]
                              }, {
                                 "r" : "433",
                                 "s" : [ {
                                    "value" : [ "Interval[" ]
                                 }, {
                                    "r" : "419",
                                    "s" : [ {
                                       "value" : [ "startDate" ]
                                    } ]
                                 }, {
                                    "value" : [ ", " ]
                                 }, {
                                    "r" : "432",
                                    "s" : [ {
                                       "r" : "420",
                                       "s" : [ {
                                          "value" : [ "startDate" ]
                                       } ]
                                    }, {
                                       "value" : [ " + " ]
                                    }, {
                                       "r" : "431",
                                       "s" : [ {
                                          "r" : "427",
                                          "s" : [ {
                                             "value" : [ "Coalesce","(" ]
                                          }, {
                                             "r" : "421",
                                             "s" : [ {
                                                "value" : [ "daysSupply" ]
                                             } ]
                                          }, {
                                             "value" : [ ", " ]
                                          }, {
                                             "r" : "426",
                                             "s" : [ {
                                                "r" : "422",
                                                "s" : [ {
                                                   "value" : [ "quantity" ]
                                                } ]
                                             }, {
                                                "value" : [ " / " ]
                                             }, {
                                                "r" : "425",
                                                "s" : [ {
                                                   "value" : [ "(" ]
                                                }, {
                                                   "r" : "425",
                                                   "s" : [ {
                                                      "r" : "423",
                                                      "s" : [ {
                                                         "value" : [ "dose" ]
                                                      } ]
                                                   }, {
                                                      "value" : [ " * " ]
                                                   }, {
                                                      "r" : "424",
                                                      "s" : [ {
                                                         "value" : [ "dosesPerDay" ]
                                                      } ]
                                                   } ]
                                                }, {
                                                   "value" : [ ")" ]
                                                } ]
                                             } ]
                                          }, {
                                             "value" : [ ")" ]
                                          } ]
                                       }, {
                                          "value" : [ " * " ]
                                       }, {
                                          "r" : "430",
                                          "s" : [ {
                                             "value" : [ "(" ]
                                          }, {
                                             "r" : "430",
                                             "s" : [ {
                                                "r" : "428",
                                                "value" : [ "1"," + " ]
                                             }, {
                                                "r" : "429",
                                                "s" : [ {
                                                   "value" : [ "refills" ]
                                                } ]
                                             } ]
                                          }, {
                                             "value" : [ ")" ]
                                          } ]
                                       } ]
                                    } ]
                                 }, {
                                    "value" : [ "]" ]
                                 } ]
                              } ]
                           } ]
                        } ]
                     } ]
                  } ]
               }
            } ],
            "resultTypeSpecifier" : {
               "type" : "IntervalTypeSpecifier",
               "pointType" : {
                  "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                  "type" : "NamedTypeSpecifier"
               }
            },
            "expression" : {
               "localId" : "436",
               "locator" : "155:3-180:110",
               "type" : "Query",
               "resultTypeSpecifier" : {
                  "type" : "IntervalTypeSpecifier",
                  "pointType" : {
                     "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                     "type" : "NamedTypeSpecifier"
                  }
               },
               "source" : [ {
                  "localId" : "321",
                  "locator" : "155:3-155:11",
                  "resultTypeName" : "{http://hl7.org/fhir}MedicationRequest",
                  "alias" : "R",
                  "expression" : {
                     "localId" : "320",
                     "locator" : "155:3-155:9",
                     "resultTypeName" : "{http://hl7.org/fhir}MedicationRequest",
                     "name" : "Request",
                     "type" : "OperandRef"
                  }
               } ],
               "let" : [ {
                  "localId" : "325",
                  "locator" : "157:7-157:48",
                  "resultTypeName" : "{http://hl7.org/fhir}Dosage",
                  "identifier" : "dosage",
                  "expression" : {
                     "localId" : "324",
                     "locator" : "157:15-157:48",
                     "resultTypeName" : "{http://hl7.org/fhir}Dosage",
                     "type" : "SingletonFrom",
                     "operand" : {
                        "localId" : "323",
                        "locator" : "157:30-157:48",
                        "path" : "dosageInstruction",
                        "scope" : "R",
                        "type" : "Property",
                        "resultTypeSpecifier" : {
                           "type" : "ListTypeSpecifier",
                           "elementType" : {
                              "name" : "{http://hl7.org/fhir}Dosage",
                              "type" : "NamedTypeSpecifier"
                           }
                        }
                     }
                  }
               }, {
                  "localId" : "329",
                  "locator" : "158:7-158:52",
                  "resultTypeName" : "{http://hl7.org/fhir}Dosage.DoseAndRate",
                  "identifier" : "doseAndRate",
                  "expression" : {
                     "localId" : "328",
                     "locator" : "158:20-158:52",
                     "resultTypeName" : "{http://hl7.org/fhir}Dosage.DoseAndRate",
                     "type" : "SingletonFrom",
                     "operand" : {
                        "localId" : "327",
                        "locator" : "158:35-158:52",
                        "path" : "doseAndRate",
                        "type" : "Property",
                        "resultTypeSpecifier" : {
                           "type" : "ListTypeSpecifier",
                           "elementType" : {
                              "name" : "{http://hl7.org/fhir}Dosage.DoseAndRate",
                              "type" : "NamedTypeSpecifier"
                           }
                        },
                        "source" : {
                           "localId" : "326",
                           "locator" : "158:35-158:40",
                           "resultTypeName" : "{http://hl7.org/fhir}Dosage",
                           "name" : "dosage",
                           "type" : "QueryLetRef"
                        }
                     }
                  }
               }, {
                  "localId" : "334",
                  "locator" : "159:7-159:42",
                  "resultTypeName" : "{http://hl7.org/fhir}Range",
                  "identifier" : "doseRange",
                  "expression" : {
                     "localId" : "333",
                     "locator" : "159:18-159:42",
                     "resultTypeName" : "{http://hl7.org/fhir}Range",
                     "strict" : false,
                     "type" : "As",
                     "operand" : {
                        "localId" : "331",
                        "locator" : "159:18-159:33",
                        "path" : "dose",
                        "type" : "Property",
                        "resultTypeSpecifier" : {
                           "type" : "ChoiceTypeSpecifier",
                           "choice" : [ {
                              "name" : "{http://hl7.org/fhir}Range",
                              "type" : "NamedTypeSpecifier"
                           }, {
                              "name" : "{http://hl7.org/fhir}SimpleQuantity",
                              "type" : "NamedTypeSpecifier"
                           } ]
                        },
                        "source" : {
                           "localId" : "330",
                           "locator" : "159:18-159:28",
                           "resultTypeName" : "{http://hl7.org/fhir}Dosage.DoseAndRate",
                           "name" : "doseAndRate",
                           "type" : "QueryLetRef"
                        }
                     },
                     "asTypeSpecifier" : {
                        "localId" : "332",
                        "locator" : "159:38-159:42",
                        "resultTypeName" : "{http://hl7.org/fhir}Range",
                        "name" : "{http://hl7.org/fhir}Range",
                        "type" : "NamedTypeSpecifier"
                     }
                  }
               }, {
                  "localId" : "339",
                  "locator" : "160:7-160:54",
                  "resultTypeName" : "{http://hl7.org/fhir}SimpleQuantity",
                  "identifier" : "doseQuantity",
                  "expression" : {
                     "localId" : "338",
                     "locator" : "160:21-160:54",
                     "resultTypeName" : "{http://hl7.org/fhir}SimpleQuantity",
                     "strict" : false,
                     "type" : "As",
                     "operand" : {
                        "localId" : "336",
                        "locator" : "160:21-160:36",
                        "path" : "dose",
                        "type" : "Property",
                        "resultTypeSpecifier" : {
                           "type" : "ChoiceTypeSpecifier",
                           "choice" : [ {
                              "name" : "{http://hl7.org/fhir}Range",
                              "type" : "NamedTypeSpecifier"
                           }, {
                              "name" : "{http://hl7.org/fhir}SimpleQuantity",
                              "type" : "NamedTypeSpecifier"
                           } ]
                        },
                        "source" : {
                           "localId" : "335",
                           "locator" : "160:21-160:31",
                           "resultTypeName" : "{http://hl7.org/fhir}Dosage.DoseAndRate",
                           "name" : "doseAndRate",
                           "type" : "QueryLetRef"
                        }
                     },
                     "asTypeSpecifier" : {
                        "localId" : "337",
                        "locator" : "160:41-160:54",
                        "resultTypeName" : "{http://hl7.org/fhir}SimpleQuantity",
                        "name" : "{http://hl7.org/fhir}SimpleQuantity",
                        "type" : "NamedTypeSpecifier"
                     }
                  }
               }, {
                  "localId" : "344",
                  "locator" : "161:7-161:52",
                  "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                  "identifier" : "dose",
                  "expression" : {
                     "localId" : "343",
                     "locator" : "161:13-161:52",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                     "type" : "Coalesce",
                     "operand" : [ {
                        "localId" : "341",
                        "locator" : "161:22-161:37",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                        "type" : "End",
                        "operand" : {
                           "name" : "ToInterval",
                           "libraryName" : "FHIRHelpers",
                           "type" : "FunctionRef",
                           "operand" : [ {
                              "localId" : "340",
                              "locator" : "161:29-161:37",
                              "resultTypeName" : "{http://hl7.org/fhir}Range",
                              "name" : "doseRange",
                              "type" : "QueryLetRef"
                           } ]
                        }
                     }, {
                        "name" : "ToQuantity",
                        "libraryName" : "FHIRHelpers",
                        "type" : "FunctionRef",
                        "operand" : [ {
                           "localId" : "342",
                           "locator" : "161:40-161:51",
                           "resultTypeName" : "{http://hl7.org/fhir}SimpleQuantity",
                           "name" : "doseQuantity",
                           "type" : "QueryLetRef"
                        } ]
                     } ]
                  }
               }, {
                  "localId" : "347",
                  "locator" : "162:7-162:27",
                  "resultTypeName" : "{http://hl7.org/fhir}Timing",
                  "identifier" : "timing",
                  "expression" : {
                     "localId" : "346",
                     "locator" : "162:15-162:27",
                     "resultTypeName" : "{http://hl7.org/fhir}Timing",
                     "path" : "timing",
                     "type" : "Property",
                     "source" : {
                        "localId" : "345",
                        "locator" : "162:15-162:20",
                        "resultTypeName" : "{http://hl7.org/fhir}Dosage",
                        "name" : "dosage",
                        "type" : "QueryLetRef"
                     }
                  }
               }, {
                  "localId" : "355",
                  "locator" : "163:7-163:78",
                  "resultTypeName" : "{http://hl7.org/fhir}positiveInt",
                  "identifier" : "frequency",
                  "expression" : {
                     "localId" : "354",
                     "locator" : "163:18-163:78",
                     "resultTypeName" : "{http://hl7.org/fhir}positiveInt",
                     "type" : "Coalesce",
                     "operand" : [ {
                        "localId" : "350",
                        "locator" : "163:27-163:52",
                        "resultTypeName" : "{http://hl7.org/fhir}positiveInt",
                        "path" : "frequencyMax",
                        "type" : "Property",
                        "source" : {
                           "localId" : "349",
                           "locator" : "163:27-163:39",
                           "resultTypeName" : "{http://hl7.org/fhir}Timing.Repeat",
                           "path" : "repeat",
                           "type" : "Property",
                           "source" : {
                              "localId" : "348",
                              "locator" : "163:27-163:32",
                              "resultTypeName" : "{http://hl7.org/fhir}Timing",
                              "name" : "timing",
                              "type" : "QueryLetRef"
                           }
                        }
                     }, {
                        "localId" : "353",
                        "locator" : "163:55-163:77",
                        "resultTypeName" : "{http://hl7.org/fhir}positiveInt",
                        "path" : "frequency",
                        "type" : "Property",
                        "source" : {
                           "localId" : "352",
                           "locator" : "163:55-163:67",
                           "resultTypeName" : "{http://hl7.org/fhir}Timing.Repeat",
                           "path" : "repeat",
                           "type" : "Property",
                           "source" : {
                              "localId" : "351",
                              "locator" : "163:55-163:60",
                              "resultTypeName" : "{http://hl7.org/fhir}Timing",
                              "name" : "timing",
                              "type" : "QueryLetRef"
                           }
                        }
                     } ]
                  }
               }, {
                  "localId" : "364",
                  "locator" : "164:7-164:99",
                  "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                  "identifier" : "period",
                  "expression" : {
                     "localId" : "363",
                     "locator" : "164:15-164:99",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                     "classType" : "{urn:hl7-org:elm-types:r1}Quantity",
                     "type" : "Instance",
                     "element" : [ {
                        "name" : "value",
                        "value" : {
                           "name" : "ToDecimal",
                           "libraryName" : "FHIRHelpers",
                           "type" : "FunctionRef",
                           "operand" : [ {
                              "localId" : "358",
                              "locator" : "164:40-164:59",
                              "resultTypeName" : "{http://hl7.org/fhir}decimal",
                              "path" : "period",
                              "type" : "Property",
                              "source" : {
                                 "localId" : "357",
                                 "locator" : "164:40-164:52",
                                 "resultTypeName" : "{http://hl7.org/fhir}Timing.Repeat",
                                 "path" : "repeat",
                                 "type" : "Property",
                                 "source" : {
                                    "localId" : "356",
                                    "locator" : "164:40-164:45",
                                    "resultTypeName" : "{http://hl7.org/fhir}Timing",
                                    "name" : "timing",
                                    "type" : "QueryLetRef"
                                 }
                              }
                           } ]
                        }
                     }, {
                        "name" : "unit",
                        "value" : {
                           "localId" : "362",
                           "locator" : "164:68-164:97",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
                           "path" : "value",
                           "type" : "Property",
                           "source" : {
                              "localId" : "361",
                              "locator" : "164:68-164:91",
                              "resultTypeName" : "{http://hl7.org/fhir}UnitsOfTime",
                              "path" : "periodUnit",
                              "type" : "Property",
                              "source" : {
                                 "localId" : "360",
                                 "locator" : "164:68-164:80",
                                 "resultTypeName" : "{http://hl7.org/fhir}Timing.Repeat",
                                 "path" : "repeat",
                                 "type" : "Property",
                                 "source" : {
                                    "localId" : "359",
                                    "locator" : "164:68-164:73",
                                    "resultTypeName" : "{http://hl7.org/fhir}Timing",
                                    "name" : "timing",
                                    "type" : "QueryLetRef"
                                 }
                              }
                           }
                        }
                     } ]
                  }
               }, {
                  "localId" : "374",
                  "locator" : "165:7-165:92",
                  "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                  "identifier" : "dosesPerDay",
                  "expression" : {
                     "localId" : "373",
                     "locator" : "165:20-165:92",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                     "type" : "Coalesce",
                     "operand" : [ {
                        "localId" : "367",
                        "locator" : "165:29-165:54",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                        "name" : "ToDaily",
                        "type" : "FunctionRef",
                        "operand" : [ {
                           "name" : "ToInteger",
                           "libraryName" : "FHIRHelpers",
                           "type" : "FunctionRef",
                           "operand" : [ {
                              "localId" : "365",
                              "locator" : "165:37-165:45",
                              "resultTypeName" : "{http://hl7.org/fhir}positiveInt",
                              "name" : "frequency",
                              "type" : "QueryLetRef"
                           } ]
                        }, {
                           "localId" : "366",
                           "locator" : "165:48-165:53",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                           "name" : "period",
                           "type" : "QueryLetRef"
                        } ]
                     }, {
                        "type" : "ToDecimal",
                        "operand" : {
                           "localId" : "371",
                           "locator" : "165:57-165:86",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                           "type" : "Count",
                           "source" : {
                              "localId" : "370",
                              "locator" : "165:63-165:85",
                              "path" : "timeOfDay",
                              "type" : "Property",
                              "resultTypeSpecifier" : {
                                 "type" : "ListTypeSpecifier",
                                 "elementType" : {
                                    "name" : "{http://hl7.org/fhir}time",
                                    "type" : "NamedTypeSpecifier"
                                 }
                              },
                              "source" : {
                                 "localId" : "369",
                                 "locator" : "165:63-165:75",
                                 "resultTypeName" : "{http://hl7.org/fhir}Timing.Repeat",
                                 "path" : "repeat",
                                 "type" : "Property",
                                 "source" : {
                                    "localId" : "368",
                                    "locator" : "165:63-165:68",
                                    "resultTypeName" : "{http://hl7.org/fhir}Timing",
                                    "name" : "timing",
                                    "type" : "QueryLetRef"
                                 }
                              }
                           }
                        }
                     }, {
                        "localId" : "372",
                        "locator" : "165:89-165:91",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                        "valueType" : "{urn:hl7-org:elm-types:r1}Decimal",
                        "value" : "1.0",
                        "type" : "Literal"
                     } ]
                  }
               }, {
                  "localId" : "380",
                  "locator" : "166:7-166:50",
                  "resultTypeName" : "{http://hl7.org/fhir}Period",
                  "identifier" : "boundsPeriod",
                  "expression" : {
                     "localId" : "379",
                     "locator" : "166:21-166:50",
                     "resultTypeName" : "{http://hl7.org/fhir}Period",
                     "strict" : false,
                     "type" : "As",
                     "operand" : {
                        "localId" : "377",
                        "locator" : "166:21-166:40",
                        "path" : "bounds",
                        "type" : "Property",
                        "resultTypeSpecifier" : {
                           "type" : "ChoiceTypeSpecifier",
                           "choice" : [ {
                              "name" : "{http://hl7.org/fhir}Duration",
                              "type" : "NamedTypeSpecifier"
                           }, {
                              "name" : "{http://hl7.org/fhir}Range",
                              "type" : "NamedTypeSpecifier"
                           }, {
                              "name" : "{http://hl7.org/fhir}Period",
                              "type" : "NamedTypeSpecifier"
                           } ]
                        },
                        "source" : {
                           "localId" : "376",
                           "locator" : "166:21-166:33",
                           "resultTypeName" : "{http://hl7.org/fhir}Timing.Repeat",
                           "path" : "repeat",
                           "type" : "Property",
                           "source" : {
                              "localId" : "375",
                              "locator" : "166:21-166:26",
                              "resultTypeName" : "{http://hl7.org/fhir}Timing",
                              "name" : "timing",
                              "type" : "QueryLetRef"
                           }
                        }
                     },
                     "asTypeSpecifier" : {
                        "localId" : "378",
                        "locator" : "166:45-166:50",
                        "resultTypeName" : "{http://hl7.org/fhir}Period",
                        "name" : "{http://hl7.org/fhir}Period",
                        "type" : "NamedTypeSpecifier"
                     }
                  }
               }, {
                  "localId" : "384",
                  "locator" : "167:7-167:58",
                  "resultTypeName" : "{http://hl7.org/fhir}Duration",
                  "identifier" : "daysSupply",
                  "expression" : {
                     "localId" : "383",
                     "locator" : "167:19-167:58",
                     "resultTypeName" : "{http://hl7.org/fhir}Duration",
                     "path" : "expectedSupplyDuration",
                     "type" : "Property",
                     "source" : {
                        "localId" : "382",
                        "locator" : "167:19-167:35",
                        "resultTypeName" : "{http://hl7.org/fhir}MedicationRequest.DispenseRequest",
                        "path" : "dispenseRequest",
                        "scope" : "R",
                        "type" : "Property"
                     }
                  }
               }, {
                  "localId" : "388",
                  "locator" : "168:7-168:42",
                  "resultTypeName" : "{http://hl7.org/fhir}SimpleQuantity",
                  "identifier" : "quantity",
                  "expression" : {
                     "localId" : "387",
                     "locator" : "168:17-168:42",
                     "resultTypeName" : "{http://hl7.org/fhir}SimpleQuantity",
                     "path" : "quantity",
                     "type" : "Property",
                     "source" : {
                        "localId" : "386",
                        "locator" : "168:17-168:33",
                        "resultTypeName" : "{http://hl7.org/fhir}MedicationRequest.DispenseRequest",
                        "path" : "dispenseRequest",
                        "scope" : "R",
                        "type" : "Property"
                     }
                  }
               }, {
                  "localId" : "394",
                  "locator" : "169:7-169:68",
                  "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                  "identifier" : "refills",
                  "expression" : {
                     "localId" : "393",
                     "locator" : "169:16-169:68",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                     "type" : "Coalesce",
                     "operand" : [ {
                        "name" : "ToInteger",
                        "libraryName" : "FHIRHelpers",
                        "type" : "FunctionRef",
                        "operand" : [ {
                           "localId" : "391",
                           "locator" : "169:25-169:64",
                           "resultTypeName" : "{http://hl7.org/fhir}unsignedInt",
                           "path" : "numberOfRepeatsAllowed",
                           "type" : "Property",
                           "source" : {
                              "localId" : "390",
                              "locator" : "169:25-169:41",
                              "resultTypeName" : "{http://hl7.org/fhir}MedicationRequest.DispenseRequest",
                              "path" : "dispenseRequest",
                              "scope" : "R",
                              "type" : "Property"
                           }
                        } ]
                     }, {
                        "localId" : "392",
                        "locator" : "169:67",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                        "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                        "value" : "0",
                        "type" : "Literal"
                     } ]
                  }
               }, {
                  "localId" : "404",
                  "locator" : "170:7-175:9",
                  "resultTypeName" : "{urn:hl7-org:elm-types:r1}DateTime",
                  "identifier" : "startDate",
                  "expression" : {
                     "localId" : "403",
                     "locator" : "171:9-175:9",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}DateTime",
                     "type" : "Coalesce",
                     "operand" : [ {
                        "localId" : "396",
                        "locator" : "172:11-172:31",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}DateTime",
                        "type" : "Start",
                        "operand" : {
                           "name" : "ToInterval",
                           "libraryName" : "FHIRHelpers",
                           "type" : "FunctionRef",
                           "operand" : [ {
                              "localId" : "395",
                              "locator" : "172:20-172:31",
                              "resultTypeName" : "{http://hl7.org/fhir}Period",
                              "name" : "boundsPeriod",
                              "type" : "QueryLetRef"
                           } ]
                        }
                     }, {
                        "localId" : "400",
                        "locator" : "173:11-173:51",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}DateTime",
                        "type" : "Start",
                        "operand" : {
                           "name" : "ToInterval",
                           "libraryName" : "FHIRHelpers",
                           "type" : "FunctionRef",
                           "operand" : [ {
                              "localId" : "399",
                              "locator" : "173:20-173:51",
                              "resultTypeName" : "{http://hl7.org/fhir}Period",
                              "path" : "validityPeriod",
                              "type" : "Property",
                              "source" : {
                                 "localId" : "398",
                                 "locator" : "173:20-173:36",
                                 "resultTypeName" : "{http://hl7.org/fhir}MedicationRequest.DispenseRequest",
                                 "path" : "dispenseRequest",
                                 "scope" : "R",
                                 "type" : "Property"
                              }
                           } ]
                        }
                     }, {
                        "name" : "ToDateTime",
                        "libraryName" : "FHIRHelpers",
                        "type" : "FunctionRef",
                        "operand" : [ {
                           "localId" : "402",
                           "locator" : "174:11-174:22",
                           "resultTypeName" : "{http://hl7.org/fhir}dateTime",
                           "path" : "authoredOn",
                           "scope" : "R",
                           "type" : "Property"
                        } ]
                     } ]
                  }
               } ],
               "relationship" : [ ],
               "return" : {
                  "localId" : "435",
                  "locator" : "176:5-180:110",
                  "resultTypeSpecifier" : {
                     "type" : "IntervalTypeSpecifier",
                     "pointType" : {
                        "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                        "type" : "NamedTypeSpecifier"
                     }
                  },
                  "expression" : {
                     "localId" : "434",
                     "locator" : "177:7-180:110",
                     "type" : "If",
                     "resultTypeSpecifier" : {
                        "type" : "IntervalTypeSpecifier",
                        "pointType" : {
                           "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                           "type" : "NamedTypeSpecifier"
                        }
                     },
                     "condition" : {
                        "localId" : "414",
                        "locator" : "177:10-177:84",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Boolean",
                        "type" : "Not",
                        "operand" : {
                           "localId" : "413",
                           "locator" : "177:14-177:84",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Boolean",
                           "type" : "Or",
                           "operand" : [ {
                              "localId" : "407",
                              "locator" : "177:15-177:41",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Boolean",
                              "type" : "IsNull",
                              "operand" : {
                                 "localId" : "406",
                                 "locator" : "177:15-177:33",
                                 "resultTypeName" : "{urn:hl7-org:elm-types:r1}DateTime",
                                 "type" : "End",
                                 "operand" : {
                                    "name" : "ToInterval",
                                    "libraryName" : "FHIRHelpers",
                                    "type" : "FunctionRef",
                                    "operand" : [ {
                                       "localId" : "405",
                                       "locator" : "177:22-177:33",
                                       "resultTypeName" : "{http://hl7.org/fhir}Period",
                                       "name" : "boundsPeriod",
                                       "type" : "QueryLetRef"
                                    } ]
                                 }
                              }
                           }, {
                              "localId" : "412",
                              "locator" : "177:46-177:83",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Boolean",
                              "type" : "Equal",
                              "operand" : [ {
                                 "localId" : "409",
                                 "locator" : "177:46-177:64",
                                 "resultTypeName" : "{urn:hl7-org:elm-types:r1}DateTime",
                                 "type" : "End",
                                 "operand" : {
                                    "name" : "ToInterval",
                                    "libraryName" : "FHIRHelpers",
                                    "type" : "FunctionRef",
                                    "operand" : [ {
                                       "localId" : "408",
                                       "locator" : "177:53-177:64",
                                       "resultTypeName" : "{http://hl7.org/fhir}Period",
                                       "name" : "boundsPeriod",
                                       "type" : "QueryLetRef"
                                    } ]
                                 }
                              }, {
                                 "localId" : "411",
                                 "locator" : "177:68-177:83",
                                 "resultTypeName" : "{urn:hl7-org:elm-types:r1}DateTime",
                                 "valueType" : "{urn:hl7-org:elm-types:r1}DateTime",
                                 "type" : "MaxValue"
                              } ]
                           } ]
                        }
                     },
                     "then" : {
                        "localId" : "418",
                        "locator" : "178:9-178:48",
                        "lowClosed" : true,
                        "highClosed" : true,
                        "type" : "Interval",
                        "resultTypeSpecifier" : {
                           "type" : "IntervalTypeSpecifier",
                           "pointType" : {
                              "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                              "type" : "NamedTypeSpecifier"
                           }
                        },
                        "low" : {
                           "localId" : "415",
                           "locator" : "178:18-178:26",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}DateTime",
                           "name" : "startDate",
                           "type" : "QueryLetRef"
                        },
                        "high" : {
                           "localId" : "417",
                           "locator" : "178:29-178:47",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}DateTime",
                           "type" : "End",
                           "operand" : {
                              "name" : "ToInterval",
                              "libraryName" : "FHIRHelpers",
                              "type" : "FunctionRef",
                              "operand" : [ {
                                 "localId" : "416",
                                 "locator" : "178:36-178:47",
                                 "resultTypeName" : "{http://hl7.org/fhir}Period",
                                 "name" : "boundsPeriod",
                                 "type" : "QueryLetRef"
                              } ]
                           }
                        }
                     },
                     "else" : {
                        "localId" : "433",
                        "locator" : "180:9-180:110",
                        "lowClosed" : true,
                        "highClosed" : true,
                        "type" : "Interval",
                        "resultTypeSpecifier" : {
                           "type" : "IntervalTypeSpecifier",
                           "pointType" : {
                              "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                              "type" : "NamedTypeSpecifier"
                           }
                        },
                        "low" : {
                           "localId" : "419",
                           "locator" : "180:18-180:26",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}DateTime",
                           "name" : "startDate",
                           "type" : "QueryLetRef"
                        },
                        "high" : {
                           "localId" : "432",
                           "locator" : "180:29-180:109",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}DateTime",
                           "type" : "Add",
                           "operand" : [ {
                              "localId" : "420",
                              "locator" : "180:29-180:37",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}DateTime",
                              "name" : "startDate",
                              "type" : "QueryLetRef"
                           }, {
                              "localId" : "431",
                              "locator" : "180:41-180:109",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                              "type" : "Multiply",
                              "operand" : [ {
                                 "localId" : "427",
                                 "locator" : "180:41-180:93",
                                 "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                                 "type" : "Coalesce",
                                 "operand" : [ {
                                    "name" : "ToQuantity",
                                    "libraryName" : "FHIRHelpers",
                                    "type" : "FunctionRef",
                                    "operand" : [ {
                                       "localId" : "421",
                                       "locator" : "180:50-180:59",
                                       "resultTypeName" : "{http://hl7.org/fhir}Duration",
                                       "name" : "daysSupply",
                                       "type" : "QueryLetRef"
                                    } ]
                                 }, {
                                    "localId" : "426",
                                    "locator" : "180:62-180:92",
                                    "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                                    "type" : "Divide",
                                    "operand" : [ {
                                       "name" : "ToQuantity",
                                       "libraryName" : "FHIRHelpers",
                                       "type" : "FunctionRef",
                                       "operand" : [ {
                                          "localId" : "422",
                                          "locator" : "180:62-180:69",
                                          "resultTypeName" : "{http://hl7.org/fhir}SimpleQuantity",
                                          "name" : "quantity",
                                          "type" : "QueryLetRef"
                                       } ]
                                    }, {
                                       "localId" : "425",
                                       "locator" : "180:73-180:92",
                                       "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                                       "type" : "Multiply",
                                       "operand" : [ {
                                          "localId" : "423",
                                          "locator" : "180:74-180:77",
                                          "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                                          "name" : "dose",
                                          "type" : "QueryLetRef"
                                       }, {
                                          "type" : "ToQuantity",
                                          "operand" : {
                                             "localId" : "424",
                                             "locator" : "180:81-180:91",
                                             "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                                             "name" : "dosesPerDay",
                                             "type" : "QueryLetRef"
                                          }
                                       } ]
                                    } ]
                                 } ]
                              }, {
                                 "type" : "ToQuantity",
                                 "operand" : {
                                    "localId" : "430",
                                    "locator" : "180:97-180:109",
                                    "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                                    "type" : "Add",
                                    "operand" : [ {
                                       "localId" : "428",
                                       "locator" : "180:98",
                                       "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                                       "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                                       "value" : "1",
                                       "type" : "Literal"
                                    }, {
                                       "localId" : "429",
                                       "locator" : "180:102-180:108",
                                       "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                                       "name" : "refills",
                                       "type" : "QueryLetRef"
                                    } ]
                                 }
                              } ]
                           } ]
                        }
                     }
                  }
               }
            },
            "operand" : [ {
               "name" : "Request",
               "operandTypeSpecifier" : {
                  "localId" : "319",
                  "locator" : "154:51-154:69",
                  "resultTypeName" : "{http://hl7.org/fhir}MedicationRequest",
                  "name" : "{http://hl7.org/fhir}MedicationRequest",
                  "type" : "NamedTypeSpecifier"
               }
            } ]
         }, {
            "localId" : "515",
            "locator" : "262:1-280:98",
            "name" : "MedicationDispensePeriod",
            "context" : "Patient",
            "accessLevel" : "Public",
            "type" : "FunctionDef",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "515",
                  "s" : [ {
                     "value" : [ "/*\n  Next, consider the MedicationDispense case:\n  \n  * whenPrepared: When product was prepared\n  * whenHandedOver: When product was given out\n  * quantity: Amount dispensed\n  * daysSupply: Amount of medication expressed as a timing amount\n  * dosageInstruction.timing.repeat.boundsDuration: total duration of the repeat\n  * dosageInstruction.timing.repeat.boundsRange: range of durations of the repeat\n  * dosageInstruction.timing.repeat.boundsPeriod: period bounds of the repeat\n  * dosageInstruction.timing.repeat.count: number of times to repeat\n  * dosageInstruction.timing.repeat.countMax: maximum number of times to repeat\n  * dosageInstruction.timing.repeat.frequency: event occurs frequency times per period\n  * dosageInstruction.timing.repeat.frequencyMax: event occurs up to frequencyMax times per period\n  * dosageInstruction.timing.repeat.period: event occurs frequency times per period\n  * dosageInstruction.timing.repeat.periodMax: upper limit of period\n  * dosageInstruction.timing.repeat.periodUnit: period duration (s | min | h | d | wk | mo | a)\n  * dosageInstruction.timing.repeat.timeOfDay: time of day for the event (0..*)\n  * dosageInstruction.timing.repeat.when: event timing (HS | WAKE | C | CM | CD | CV | AC | ACM...)\n  * dosageInstruction.timing.code: BID | TID | QID | AM | PM | QD | QOD...\n  * dosageInstruction.asNeeded\n  * dosageInstruction.doseAndRate.doseQuantity\n  * dosageInstruction.doseAndRate.doseRange\n  \n  We have effectively the same elements, with the same meanings, with the exception that the\n  event is documenting a single dispense, and does not contain refill information. In addition,\n  multiple dispense events would typically be present, and those would all have to be considered\n  as part of an overall calculation. That will be considered when we combine results, but for\n  this function, we'll focus on calculating the duration of a single dispense.\n  \n  With a MedicationDispense, dosage information is expected to be the same as the related\n  MedicationRequest, so boundsPeriod would still cover the entire prescription (including refills)\n  and so cannot be used to calculate the interval covered by the dispense.\n  \n  If the daysSupply element is present, then the duration in days is simply\n  \n    daysSupply\n  \n  Note specifically that we are not considering refills, as those would be covered\n  by subsequent dispense records.\n  \n  If daysSupplied is not present, then daysSupplied must be calculated based on\n  the quantity, dosage, and frequency:\n  \n    (quantity / (dosage * frequency))\n  \n  This calculation results in a number of days, which can then be turned into a\n  period by anchoring that to the startDate, as determined by the first available\n  value of the start of the boundsPeriod, whenHandedOver, and whenPrepared.\n  \n   Interval[startDate, startDate + durationInDays]\n  */\n\n/*Calculates Medication Period for a given MedicationDispense\nMedicationDispense instances provided to this function are expected\nto conform to the [TODO: MMEMedicationDispense](http://build.fhir.org/ig/cqframework/opioid-mme-r4/StructureDefinition-mmemedicationdispense.html)\nprofile, which expects:\n* 1 and only 1 dosageInstruction, multiple dosageInstruction elements will result in an error\n* 1 and only 1 doseAndRate, multiple doseAndRate elements will result in an error\n* 1 timing with 1 repeat, missing timing or repeat elements will result in a null\n* frequency, frequencyMax, defaulting to 1\n* period, periodUnit, defaulting to 1 'd'\n* timeOfDay\n* doseQuantity or doseRange, missing doseQuantity and doseRange will result in a null\n* whenHandedOver or whenPrepared, if missing both whenHandedOver and whenPrepared will result in a null\n\nNote that MedicationDispense status is not considered by this calculation, as the\nlist of MedicationDispense instances provided to this function should already have\nconsidered appropriate statuses, depending on the use case, typically `completed`,\nespecially since whenHandedOver would be expected to be present for a completed\nMedicationDispense.\n\nNote also that the dosage information recorded in a dispense is expected to be a copy of the\ndispense information from the related medication request. As such, the boundsPeriod would be expected\nto cover the entire range, and should _not_ be used for timing of the event.\n\nThere is also active discussion in the Pharmacy WG about what date should be used if whenPrepared/whenHandedOver is not present.\nThis may take the form of an \"original creation date\", but may also be a \"status change date\" for dispense events that are updating\nstatus of an existing dispense. That discussion is ongoing, so until that is resolved, this logic will return\nnull if whenPrepared/whenHandedOver are not available.*/\n","define function ","\"MedicationDispensePeriod\"","(","Dispense"," " ]
                  }, {
                     "r" : "438",
                     "s" : [ {
                        "value" : [ "\"MedicationDispense\"" ]
                     } ]
                  }, {
                     "value" : [ " ):\n  " ]
                  }, {
                     "r" : "514",
                     "s" : [ {
                        "r" : "514",
                        "s" : [ {
                           "s" : [ {
                              "r" : "440",
                              "s" : [ {
                                 "r" : "439",
                                 "s" : [ {
                                    "s" : [ {
                                       "value" : [ "Dispense" ]
                                    } ]
                                 } ]
                              }, {
                                 "value" : [ " ","D" ]
                              } ]
                           } ]
                        }, {
                           "value" : [ "\n    " ]
                        }, {
                           "s" : [ {
                              "value" : [ "let\n      " ]
                           }, {
                              "r" : "444",
                              "s" : [ {
                                 "value" : [ "dosage",": " ]
                              }, {
                                 "r" : "443",
                                 "s" : [ {
                                    "value" : [ "singleton from " ]
                                 }, {
                                    "r" : "442",
                                    "s" : [ {
                                       "r" : "441",
                                       "s" : [ {
                                          "value" : [ "D" ]
                                       } ]
                                    }, {
                                       "value" : [ "." ]
                                    }, {
                                       "r" : "442",
                                       "s" : [ {
                                          "value" : [ "dosageInstruction" ]
                                       } ]
                                    } ]
                                 } ]
                              } ]
                           }, {
                              "value" : [ ",\n      " ]
                           }, {
                              "r" : "448",
                              "s" : [ {
                                 "value" : [ "doseAndRate",": " ]
                              }, {
                                 "r" : "447",
                                 "s" : [ {
                                    "value" : [ "singleton from " ]
                                 }, {
                                    "r" : "446",
                                    "s" : [ {
                                       "r" : "445",
                                       "s" : [ {
                                          "value" : [ "dosage" ]
                                       } ]
                                    }, {
                                       "value" : [ "." ]
                                    }, {
                                       "r" : "446",
                                       "s" : [ {
                                          "value" : [ "doseAndRate" ]
                                       } ]
                                    } ]
                                 } ]
                              } ]
                           }, {
                              "value" : [ ",\n      " ]
                           }, {
                              "r" : "453",
                              "s" : [ {
                                 "value" : [ "doseRange",": " ]
                              }, {
                                 "r" : "452",
                                 "s" : [ {
                                    "r" : "450",
                                    "s" : [ {
                                       "r" : "449",
                                       "s" : [ {
                                          "value" : [ "doseAndRate" ]
                                       } ]
                                    }, {
                                       "value" : [ "." ]
                                    }, {
                                       "r" : "450",
                                       "s" : [ {
                                          "value" : [ "dose" ]
                                       } ]
                                    } ]
                                 }, {
                                    "value" : [ " as " ]
                                 }, {
                                    "r" : "451",
                                    "s" : [ {
                                       "value" : [ "Range" ]
                                    } ]
                                 } ]
                              } ]
                           }, {
                              "value" : [ ",\n      " ]
                           }, {
                              "r" : "458",
                              "s" : [ {
                                 "value" : [ "doseQuantity",": " ]
                              }, {
                                 "r" : "457",
                                 "s" : [ {
                                    "r" : "455",
                                    "s" : [ {
                                       "r" : "454",
                                       "s" : [ {
                                          "value" : [ "doseAndRate" ]
                                       } ]
                                    }, {
                                       "value" : [ "." ]
                                    }, {
                                       "r" : "455",
                                       "s" : [ {
                                          "value" : [ "dose" ]
                                       } ]
                                    } ]
                                 }, {
                                    "value" : [ " as " ]
                                 }, {
                                    "r" : "456",
                                    "s" : [ {
                                       "value" : [ "SimpleQuantity" ]
                                    } ]
                                 } ]
                              } ]
                           }, {
                              "value" : [ ",\n      " ]
                           }, {
                              "r" : "463",
                              "s" : [ {
                                 "value" : [ "dose",": " ]
                              }, {
                                 "r" : "462",
                                 "s" : [ {
                                    "value" : [ "Coalesce","(" ]
                                 }, {
                                    "r" : "460",
                                    "s" : [ {
                                       "value" : [ "end of " ]
                                    }, {
                                       "r" : "459",
                                       "s" : [ {
                                          "value" : [ "doseRange" ]
                                       } ]
                                    } ]
                                 }, {
                                    "value" : [ ", " ]
                                 }, {
                                    "r" : "461",
                                    "s" : [ {
                                       "value" : [ "doseQuantity" ]
                                    } ]
                                 }, {
                                    "value" : [ ")" ]
                                 } ]
                              } ]
                           }, {
                              "value" : [ ",\n      " ]
                           }, {
                              "r" : "466",
                              "s" : [ {
                                 "value" : [ "timing",": " ]
                              }, {
                                 "r" : "465",
                                 "s" : [ {
                                    "r" : "464",
                                    "s" : [ {
                                       "value" : [ "dosage" ]
                                    } ]
                                 }, {
                                    "value" : [ "." ]
                                 }, {
                                    "r" : "465",
                                    "s" : [ {
                                       "value" : [ "timing" ]
                                    } ]
                                 } ]
                              } ]
                           }, {
                              "value" : [ ",\n      " ]
                           }, {
                              "r" : "474",
                              "s" : [ {
                                 "value" : [ "frequency",": " ]
                              }, {
                                 "r" : "473",
                                 "s" : [ {
                                    "value" : [ "Coalesce","(" ]
                                 }, {
                                    "r" : "469",
                                    "s" : [ {
                                       "r" : "468",
                                       "s" : [ {
                                          "r" : "467",
                                          "s" : [ {
                                             "value" : [ "timing" ]
                                          } ]
                                       }, {
                                          "value" : [ "." ]
                                       }, {
                                          "r" : "468",
                                          "s" : [ {
                                             "value" : [ "repeat" ]
                                          } ]
                                       } ]
                                    }, {
                                       "value" : [ "." ]
                                    }, {
                                       "r" : "469",
                                       "s" : [ {
                                          "value" : [ "frequencyMax" ]
                                       } ]
                                    } ]
                                 }, {
                                    "value" : [ ", " ]
                                 }, {
                                    "r" : "472",
                                    "s" : [ {
                                       "r" : "471",
                                       "s" : [ {
                                          "r" : "470",
                                          "s" : [ {
                                             "value" : [ "timing" ]
                                          } ]
                                       }, {
                                          "value" : [ "." ]
                                       }, {
                                          "r" : "471",
                                          "s" : [ {
                                             "value" : [ "repeat" ]
                                          } ]
                                       } ]
                                    }, {
                                       "value" : [ "." ]
                                    }, {
                                       "r" : "472",
                                       "s" : [ {
                                          "value" : [ "frequency" ]
                                       } ]
                                    } ]
                                 }, {
                                    "value" : [ ")" ]
                                 } ]
                              } ]
                           }, {
                              "value" : [ ",\n      " ]
                           }, {
                              "r" : "483",
                              "s" : [ {
                                 "value" : [ "period",": " ]
                              }, {
                                 "r" : "482",
                                 "s" : [ {
                                    "value" : [ "System",".","Quantity"," { " ]
                                 }, {
                                    "s" : [ {
                                       "value" : [ "value",": " ]
                                    }, {
                                       "r" : "477",
                                       "s" : [ {
                                          "r" : "476",
                                          "s" : [ {
                                             "r" : "475",
                                             "s" : [ {
                                                "value" : [ "timing" ]
                                             } ]
                                          }, {
                                             "value" : [ "." ]
                                          }, {
                                             "r" : "476",
                                             "s" : [ {
                                                "value" : [ "repeat" ]
                                             } ]
                                          } ]
                                       }, {
                                          "value" : [ "." ]
                                       }, {
                                          "r" : "477",
                                          "s" : [ {
                                             "value" : [ "period" ]
                                          } ]
                                       } ]
                                    } ]
                                 }, {
                                    "value" : [ ", " ]
                                 }, {
                                    "s" : [ {
                                       "value" : [ "unit",": " ]
                                    }, {
                                       "r" : "481",
                                       "s" : [ {
                                          "r" : "480",
                                          "s" : [ {
                                             "r" : "479",
                                             "s" : [ {
                                                "r" : "478",
                                                "s" : [ {
                                                   "value" : [ "timing" ]
                                                } ]
                                             }, {
                                                "value" : [ "." ]
                                             }, {
                                                "r" : "479",
                                                "s" : [ {
                                                   "value" : [ "repeat" ]
                                                } ]
                                             } ]
                                          }, {
                                             "value" : [ "." ]
                                          }, {
                                             "r" : "480",
                                             "s" : [ {
                                                "value" : [ "periodUnit" ]
                                             } ]
                                          } ]
                                       }, {
                                          "value" : [ "." ]
                                       }, {
                                          "r" : "481",
                                          "s" : [ {
                                             "value" : [ "value" ]
                                          } ]
                                       } ]
                                    } ]
                                 }, {
                                    "value" : [ " }" ]
                                 } ]
                              } ]
                           }, {
                              "value" : [ ",\n      " ]
                           }, {
                              "r" : "493",
                              "s" : [ {
                                 "value" : [ "dosesPerDay",": " ]
                              }, {
                                 "r" : "492",
                                 "s" : [ {
                                    "value" : [ "Coalesce","(" ]
                                 }, {
                                    "r" : "486",
                                    "s" : [ {
                                       "value" : [ "ToDaily","(" ]
                                    }, {
                                       "r" : "484",
                                       "s" : [ {
                                          "value" : [ "frequency" ]
                                       } ]
                                    }, {
                                       "value" : [ ", " ]
                                    }, {
                                       "r" : "485",
                                       "s" : [ {
                                          "value" : [ "period" ]
                                       } ]
                                    }, {
                                       "value" : [ ")" ]
                                    } ]
                                 }, {
                                    "value" : [ ", " ]
                                 }, {
                                    "r" : "490",
                                    "s" : [ {
                                       "value" : [ "Count","(" ]
                                    }, {
                                       "r" : "489",
                                       "s" : [ {
                                          "r" : "488",
                                          "s" : [ {
                                             "r" : "487",
                                             "s" : [ {
                                                "value" : [ "timing" ]
                                             } ]
                                          }, {
                                             "value" : [ "." ]
                                          }, {
                                             "r" : "488",
                                             "s" : [ {
                                                "value" : [ "repeat" ]
                                             } ]
                                          } ]
                                       }, {
                                          "value" : [ "." ]
                                       }, {
                                          "r" : "489",
                                          "s" : [ {
                                             "value" : [ "timeOfDay" ]
                                          } ]
                                       } ]
                                    }, {
                                       "value" : [ ")" ]
                                    } ]
                                 }, {
                                    "r" : "491",
                                    "value" : [ ", ","1.0",")" ]
                                 } ]
                              } ]
                           }, {
                              "value" : [ ",\n      " ]
                           }, {
                              "r" : "499",
                              "s" : [ {
                                 "value" : [ "startDate",":\n        " ]
                              }, {
                                 "r" : "498",
                                 "s" : [ {
                                    "value" : [ "Coalesce","(\n          " ]
                                 }, {
                                    "r" : "495",
                                    "s" : [ {
                                       "r" : "494",
                                       "s" : [ {
                                          "value" : [ "D" ]
                                       } ]
                                    }, {
                                       "value" : [ "." ]
                                    }, {
                                       "r" : "495",
                                       "s" : [ {
                                          "value" : [ "whenHandedOver" ]
                                       } ]
                                    } ]
                                 }, {
                                    "value" : [ ",\n          " ]
                                 }, {
                                    "r" : "497",
                                    "s" : [ {
                                       "r" : "496",
                                       "s" : [ {
                                          "value" : [ "D" ]
                                       } ]
                                    }, {
                                       "value" : [ "." ]
                                    }, {
                                       "r" : "497",
                                       "s" : [ {
                                          "value" : [ "whenPrepared" ]
                                       } ]
                                    } ]
                                 }, {
                                    "value" : [ "\n        )" ]
                                 } ]
                              } ]
                           } ]
                        }, {
                           "value" : [ "\n    " ]
                        }, {
                           "r" : "513",
                           "s" : [ {
                              "value" : [ "return\n        " ]
                           }, {
                              "r" : "512",
                              "s" : [ {
                                 "value" : [ "Interval[" ]
                              }, {
                                 "r" : "500",
                                 "s" : [ {
                                    "value" : [ "startDate" ]
                                 } ]
                              }, {
                                 "value" : [ ", " ]
                              }, {
                                 "r" : "511",
                                 "s" : [ {
                                    "r" : "501",
                                    "s" : [ {
                                       "value" : [ "startDate" ]
                                    } ]
                                 }, {
                                    "value" : [ " + " ]
                                 }, {
                                    "r" : "510",
                                    "s" : [ {
                                       "value" : [ "Coalesce","(" ]
                                    }, {
                                       "r" : "503",
                                       "s" : [ {
                                          "r" : "502",
                                          "s" : [ {
                                             "value" : [ "D" ]
                                          } ]
                                       }, {
                                          "value" : [ "." ]
                                       }, {
                                          "r" : "503",
                                          "s" : [ {
                                             "value" : [ "daysSupply" ]
                                          } ]
                                       } ]
                                    }, {
                                       "value" : [ ", " ]
                                    }, {
                                       "r" : "509",
                                       "s" : [ {
                                          "r" : "505",
                                          "s" : [ {
                                             "r" : "504",
                                             "s" : [ {
                                                "value" : [ "D" ]
                                             } ]
                                          }, {
                                             "value" : [ "." ]
                                          }, {
                                             "r" : "505",
                                             "s" : [ {
                                                "value" : [ "quantity" ]
                                             } ]
                                          } ]
                                       }, {
                                          "value" : [ " / " ]
                                       }, {
                                          "r" : "508",
                                          "s" : [ {
                                             "value" : [ "(" ]
                                          }, {
                                             "r" : "508",
                                             "s" : [ {
                                                "r" : "506",
                                                "s" : [ {
                                                   "value" : [ "dose" ]
                                                } ]
                                             }, {
                                                "value" : [ " * " ]
                                             }, {
                                                "r" : "507",
                                                "s" : [ {
                                                   "value" : [ "dosesPerDay" ]
                                                } ]
                                             } ]
                                          }, {
                                             "value" : [ ")" ]
                                          } ]
                                       } ]
                                    }, {
                                       "value" : [ ")" ]
                                    } ]
                                 } ]
                              }, {
                                 "value" : [ "]" ]
                              } ]
                           } ]
                        } ]
                     } ]
                  } ]
               }
            } ],
            "resultTypeSpecifier" : {
               "type" : "IntervalTypeSpecifier",
               "pointType" : {
                  "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                  "type" : "NamedTypeSpecifier"
               }
            },
            "expression" : {
               "localId" : "514",
               "locator" : "263:3-280:98",
               "type" : "Query",
               "resultTypeSpecifier" : {
                  "type" : "IntervalTypeSpecifier",
                  "pointType" : {
                     "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                     "type" : "NamedTypeSpecifier"
                  }
               },
               "source" : [ {
                  "localId" : "440",
                  "locator" : "263:3-263:12",
                  "resultTypeName" : "{http://hl7.org/fhir}MedicationDispense",
                  "alias" : "D",
                  "expression" : {
                     "localId" : "439",
                     "locator" : "263:3-263:10",
                     "resultTypeName" : "{http://hl7.org/fhir}MedicationDispense",
                     "name" : "Dispense",
                     "type" : "OperandRef"
                  }
               } ],
               "let" : [ {
                  "localId" : "444",
                  "locator" : "265:7-265:48",
                  "resultTypeName" : "{http://hl7.org/fhir}Dosage",
                  "identifier" : "dosage",
                  "expression" : {
                     "localId" : "443",
                     "locator" : "265:15-265:48",
                     "resultTypeName" : "{http://hl7.org/fhir}Dosage",
                     "type" : "SingletonFrom",
                     "operand" : {
                        "localId" : "442",
                        "locator" : "265:30-265:48",
                        "path" : "dosageInstruction",
                        "scope" : "D",
                        "type" : "Property",
                        "resultTypeSpecifier" : {
                           "type" : "ListTypeSpecifier",
                           "elementType" : {
                              "name" : "{http://hl7.org/fhir}Dosage",
                              "type" : "NamedTypeSpecifier"
                           }
                        }
                     }
                  }
               }, {
                  "localId" : "448",
                  "locator" : "266:7-266:52",
                  "resultTypeName" : "{http://hl7.org/fhir}Dosage.DoseAndRate",
                  "identifier" : "doseAndRate",
                  "expression" : {
                     "localId" : "447",
                     "locator" : "266:20-266:52",
                     "resultTypeName" : "{http://hl7.org/fhir}Dosage.DoseAndRate",
                     "type" : "SingletonFrom",
                     "operand" : {
                        "localId" : "446",
                        "locator" : "266:35-266:52",
                        "path" : "doseAndRate",
                        "type" : "Property",
                        "resultTypeSpecifier" : {
                           "type" : "ListTypeSpecifier",
                           "elementType" : {
                              "name" : "{http://hl7.org/fhir}Dosage.DoseAndRate",
                              "type" : "NamedTypeSpecifier"
                           }
                        },
                        "source" : {
                           "localId" : "445",
                           "locator" : "266:35-266:40",
                           "resultTypeName" : "{http://hl7.org/fhir}Dosage",
                           "name" : "dosage",
                           "type" : "QueryLetRef"
                        }
                     }
                  }
               }, {
                  "localId" : "453",
                  "locator" : "267:7-267:42",
                  "resultTypeName" : "{http://hl7.org/fhir}Range",
                  "identifier" : "doseRange",
                  "expression" : {
                     "localId" : "452",
                     "locator" : "267:18-267:42",
                     "resultTypeName" : "{http://hl7.org/fhir}Range",
                     "strict" : false,
                     "type" : "As",
                     "operand" : {
                        "localId" : "450",
                        "locator" : "267:18-267:33",
                        "path" : "dose",
                        "type" : "Property",
                        "resultTypeSpecifier" : {
                           "type" : "ChoiceTypeSpecifier",
                           "choice" : [ {
                              "name" : "{http://hl7.org/fhir}Range",
                              "type" : "NamedTypeSpecifier"
                           }, {
                              "name" : "{http://hl7.org/fhir}SimpleQuantity",
                              "type" : "NamedTypeSpecifier"
                           } ]
                        },
                        "source" : {
                           "localId" : "449",
                           "locator" : "267:18-267:28",
                           "resultTypeName" : "{http://hl7.org/fhir}Dosage.DoseAndRate",
                           "name" : "doseAndRate",
                           "type" : "QueryLetRef"
                        }
                     },
                     "asTypeSpecifier" : {
                        "localId" : "451",
                        "locator" : "267:38-267:42",
                        "resultTypeName" : "{http://hl7.org/fhir}Range",
                        "name" : "{http://hl7.org/fhir}Range",
                        "type" : "NamedTypeSpecifier"
                     }
                  }
               }, {
                  "localId" : "458",
                  "locator" : "268:7-268:54",
                  "resultTypeName" : "{http://hl7.org/fhir}SimpleQuantity",
                  "identifier" : "doseQuantity",
                  "expression" : {
                     "localId" : "457",
                     "locator" : "268:21-268:54",
                     "resultTypeName" : "{http://hl7.org/fhir}SimpleQuantity",
                     "strict" : false,
                     "type" : "As",
                     "operand" : {
                        "localId" : "455",
                        "locator" : "268:21-268:36",
                        "path" : "dose",
                        "type" : "Property",
                        "resultTypeSpecifier" : {
                           "type" : "ChoiceTypeSpecifier",
                           "choice" : [ {
                              "name" : "{http://hl7.org/fhir}Range",
                              "type" : "NamedTypeSpecifier"
                           }, {
                              "name" : "{http://hl7.org/fhir}SimpleQuantity",
                              "type" : "NamedTypeSpecifier"
                           } ]
                        },
                        "source" : {
                           "localId" : "454",
                           "locator" : "268:21-268:31",
                           "resultTypeName" : "{http://hl7.org/fhir}Dosage.DoseAndRate",
                           "name" : "doseAndRate",
                           "type" : "QueryLetRef"
                        }
                     },
                     "asTypeSpecifier" : {
                        "localId" : "456",
                        "locator" : "268:41-268:54",
                        "resultTypeName" : "{http://hl7.org/fhir}SimpleQuantity",
                        "name" : "{http://hl7.org/fhir}SimpleQuantity",
                        "type" : "NamedTypeSpecifier"
                     }
                  }
               }, {
                  "localId" : "463",
                  "locator" : "269:7-269:52",
                  "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                  "identifier" : "dose",
                  "expression" : {
                     "localId" : "462",
                     "locator" : "269:13-269:52",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                     "type" : "Coalesce",
                     "operand" : [ {
                        "localId" : "460",
                        "locator" : "269:22-269:37",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                        "type" : "End",
                        "operand" : {
                           "name" : "ToInterval",
                           "libraryName" : "FHIRHelpers",
                           "type" : "FunctionRef",
                           "operand" : [ {
                              "localId" : "459",
                              "locator" : "269:29-269:37",
                              "resultTypeName" : "{http://hl7.org/fhir}Range",
                              "name" : "doseRange",
                              "type" : "QueryLetRef"
                           } ]
                        }
                     }, {
                        "name" : "ToQuantity",
                        "libraryName" : "FHIRHelpers",
                        "type" : "FunctionRef",
                        "operand" : [ {
                           "localId" : "461",
                           "locator" : "269:40-269:51",
                           "resultTypeName" : "{http://hl7.org/fhir}SimpleQuantity",
                           "name" : "doseQuantity",
                           "type" : "QueryLetRef"
                        } ]
                     } ]
                  }
               }, {
                  "localId" : "466",
                  "locator" : "270:7-270:27",
                  "resultTypeName" : "{http://hl7.org/fhir}Timing",
                  "identifier" : "timing",
                  "expression" : {
                     "localId" : "465",
                     "locator" : "270:15-270:27",
                     "resultTypeName" : "{http://hl7.org/fhir}Timing",
                     "path" : "timing",
                     "type" : "Property",
                     "source" : {
                        "localId" : "464",
                        "locator" : "270:15-270:20",
                        "resultTypeName" : "{http://hl7.org/fhir}Dosage",
                        "name" : "dosage",
                        "type" : "QueryLetRef"
                     }
                  }
               }, {
                  "localId" : "474",
                  "locator" : "271:7-271:78",
                  "resultTypeName" : "{http://hl7.org/fhir}positiveInt",
                  "identifier" : "frequency",
                  "expression" : {
                     "localId" : "473",
                     "locator" : "271:18-271:78",
                     "resultTypeName" : "{http://hl7.org/fhir}positiveInt",
                     "type" : "Coalesce",
                     "operand" : [ {
                        "localId" : "469",
                        "locator" : "271:27-271:52",
                        "resultTypeName" : "{http://hl7.org/fhir}positiveInt",
                        "path" : "frequencyMax",
                        "type" : "Property",
                        "source" : {
                           "localId" : "468",
                           "locator" : "271:27-271:39",
                           "resultTypeName" : "{http://hl7.org/fhir}Timing.Repeat",
                           "path" : "repeat",
                           "type" : "Property",
                           "source" : {
                              "localId" : "467",
                              "locator" : "271:27-271:32",
                              "resultTypeName" : "{http://hl7.org/fhir}Timing",
                              "name" : "timing",
                              "type" : "QueryLetRef"
                           }
                        }
                     }, {
                        "localId" : "472",
                        "locator" : "271:55-271:77",
                        "resultTypeName" : "{http://hl7.org/fhir}positiveInt",
                        "path" : "frequency",
                        "type" : "Property",
                        "source" : {
                           "localId" : "471",
                           "locator" : "271:55-271:67",
                           "resultTypeName" : "{http://hl7.org/fhir}Timing.Repeat",
                           "path" : "repeat",
                           "type" : "Property",
                           "source" : {
                              "localId" : "470",
                              "locator" : "271:55-271:60",
                              "resultTypeName" : "{http://hl7.org/fhir}Timing",
                              "name" : "timing",
                              "type" : "QueryLetRef"
                           }
                        }
                     } ]
                  }
               }, {
                  "localId" : "483",
                  "locator" : "272:7-272:99",
                  "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                  "identifier" : "period",
                  "expression" : {
                     "localId" : "482",
                     "locator" : "272:15-272:99",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                     "classType" : "{urn:hl7-org:elm-types:r1}Quantity",
                     "type" : "Instance",
                     "element" : [ {
                        "name" : "value",
                        "value" : {
                           "name" : "ToDecimal",
                           "libraryName" : "FHIRHelpers",
                           "type" : "FunctionRef",
                           "operand" : [ {
                              "localId" : "477",
                              "locator" : "272:40-272:59",
                              "resultTypeName" : "{http://hl7.org/fhir}decimal",
                              "path" : "period",
                              "type" : "Property",
                              "source" : {
                                 "localId" : "476",
                                 "locator" : "272:40-272:52",
                                 "resultTypeName" : "{http://hl7.org/fhir}Timing.Repeat",
                                 "path" : "repeat",
                                 "type" : "Property",
                                 "source" : {
                                    "localId" : "475",
                                    "locator" : "272:40-272:45",
                                    "resultTypeName" : "{http://hl7.org/fhir}Timing",
                                    "name" : "timing",
                                    "type" : "QueryLetRef"
                                 }
                              }
                           } ]
                        }
                     }, {
                        "name" : "unit",
                        "value" : {
                           "localId" : "481",
                           "locator" : "272:68-272:97",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
                           "path" : "value",
                           "type" : "Property",
                           "source" : {
                              "localId" : "480",
                              "locator" : "272:68-272:91",
                              "resultTypeName" : "{http://hl7.org/fhir}UnitsOfTime",
                              "path" : "periodUnit",
                              "type" : "Property",
                              "source" : {
                                 "localId" : "479",
                                 "locator" : "272:68-272:80",
                                 "resultTypeName" : "{http://hl7.org/fhir}Timing.Repeat",
                                 "path" : "repeat",
                                 "type" : "Property",
                                 "source" : {
                                    "localId" : "478",
                                    "locator" : "272:68-272:73",
                                    "resultTypeName" : "{http://hl7.org/fhir}Timing",
                                    "name" : "timing",
                                    "type" : "QueryLetRef"
                                 }
                              }
                           }
                        }
                     } ]
                  }
               }, {
                  "localId" : "493",
                  "locator" : "273:7-273:92",
                  "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                  "identifier" : "dosesPerDay",
                  "expression" : {
                     "localId" : "492",
                     "locator" : "273:20-273:92",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                     "type" : "Coalesce",
                     "operand" : [ {
                        "localId" : "486",
                        "locator" : "273:29-273:54",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                        "name" : "ToDaily",
                        "type" : "FunctionRef",
                        "operand" : [ {
                           "name" : "ToInteger",
                           "libraryName" : "FHIRHelpers",
                           "type" : "FunctionRef",
                           "operand" : [ {
                              "localId" : "484",
                              "locator" : "273:37-273:45",
                              "resultTypeName" : "{http://hl7.org/fhir}positiveInt",
                              "name" : "frequency",
                              "type" : "QueryLetRef"
                           } ]
                        }, {
                           "localId" : "485",
                           "locator" : "273:48-273:53",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                           "name" : "period",
                           "type" : "QueryLetRef"
                        } ]
                     }, {
                        "type" : "ToDecimal",
                        "operand" : {
                           "localId" : "490",
                           "locator" : "273:57-273:86",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                           "type" : "Count",
                           "source" : {
                              "localId" : "489",
                              "locator" : "273:63-273:85",
                              "path" : "timeOfDay",
                              "type" : "Property",
                              "resultTypeSpecifier" : {
                                 "type" : "ListTypeSpecifier",
                                 "elementType" : {
                                    "name" : "{http://hl7.org/fhir}time",
                                    "type" : "NamedTypeSpecifier"
                                 }
                              },
                              "source" : {
                                 "localId" : "488",
                                 "locator" : "273:63-273:75",
                                 "resultTypeName" : "{http://hl7.org/fhir}Timing.Repeat",
                                 "path" : "repeat",
                                 "type" : "Property",
                                 "source" : {
                                    "localId" : "487",
                                    "locator" : "273:63-273:68",
                                    "resultTypeName" : "{http://hl7.org/fhir}Timing",
                                    "name" : "timing",
                                    "type" : "QueryLetRef"
                                 }
                              }
                           }
                        }
                     }, {
                        "localId" : "491",
                        "locator" : "273:89-273:91",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                        "valueType" : "{urn:hl7-org:elm-types:r1}Decimal",
                        "value" : "1.0",
                        "type" : "Literal"
                     } ]
                  }
               }, {
                  "localId" : "499",
                  "locator" : "274:7-278:9",
                  "resultTypeName" : "{http://hl7.org/fhir}dateTime",
                  "identifier" : "startDate",
                  "expression" : {
                     "localId" : "498",
                     "locator" : "275:9-278:9",
                     "resultTypeName" : "{http://hl7.org/fhir}dateTime",
                     "type" : "Coalesce",
                     "operand" : [ {
                        "localId" : "495",
                        "locator" : "276:11-276:26",
                        "resultTypeName" : "{http://hl7.org/fhir}dateTime",
                        "path" : "whenHandedOver",
                        "scope" : "D",
                        "type" : "Property"
                     }, {
                        "localId" : "497",
                        "locator" : "277:11-277:24",
                        "resultTypeName" : "{http://hl7.org/fhir}dateTime",
                        "path" : "whenPrepared",
                        "scope" : "D",
                        "type" : "Property"
                     } ]
                  }
               } ],
               "relationship" : [ ],
               "return" : {
                  "localId" : "513",
                  "locator" : "279:5-280:98",
                  "resultTypeSpecifier" : {
                     "type" : "IntervalTypeSpecifier",
                     "pointType" : {
                        "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                        "type" : "NamedTypeSpecifier"
                     }
                  },
                  "expression" : {
                     "localId" : "512",
                     "locator" : "280:9-280:98",
                     "lowClosed" : true,
                     "highClosed" : true,
                     "type" : "Interval",
                     "resultTypeSpecifier" : {
                        "type" : "IntervalTypeSpecifier",
                        "pointType" : {
                           "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                           "type" : "NamedTypeSpecifier"
                        }
                     },
                     "low" : {
                        "name" : "ToDateTime",
                        "libraryName" : "FHIRHelpers",
                        "type" : "FunctionRef",
                        "operand" : [ {
                           "localId" : "500",
                           "locator" : "280:18-280:26",
                           "resultTypeName" : "{http://hl7.org/fhir}dateTime",
                           "name" : "startDate",
                           "type" : "QueryLetRef"
                        } ]
                     },
                     "high" : {
                        "localId" : "511",
                        "locator" : "280:29-280:97",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}DateTime",
                        "type" : "Add",
                        "operand" : [ {
                           "name" : "ToDateTime",
                           "libraryName" : "FHIRHelpers",
                           "type" : "FunctionRef",
                           "operand" : [ {
                              "localId" : "501",
                              "locator" : "280:29-280:37",
                              "resultTypeName" : "{http://hl7.org/fhir}dateTime",
                              "name" : "startDate",
                              "type" : "QueryLetRef"
                           } ]
                        }, {
                           "localId" : "510",
                           "locator" : "280:41-280:97",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                           "type" : "Coalesce",
                           "operand" : [ {
                              "name" : "ToQuantity",
                              "libraryName" : "FHIRHelpers",
                              "type" : "FunctionRef",
                              "operand" : [ {
                                 "localId" : "503",
                                 "locator" : "280:50-280:61",
                                 "resultTypeName" : "{http://hl7.org/fhir}SimpleQuantity",
                                 "path" : "daysSupply",
                                 "scope" : "D",
                                 "type" : "Property"
                              } ]
                           }, {
                              "localId" : "509",
                              "locator" : "280:64-280:96",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                              "type" : "Divide",
                              "operand" : [ {
                                 "name" : "ToQuantity",
                                 "libraryName" : "FHIRHelpers",
                                 "type" : "FunctionRef",
                                 "operand" : [ {
                                    "localId" : "505",
                                    "locator" : "280:64-280:73",
                                    "resultTypeName" : "{http://hl7.org/fhir}SimpleQuantity",
                                    "path" : "quantity",
                                    "scope" : "D",
                                    "type" : "Property"
                                 } ]
                              }, {
                                 "localId" : "508",
                                 "locator" : "280:77-280:96",
                                 "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                                 "type" : "Multiply",
                                 "operand" : [ {
                                    "localId" : "506",
                                    "locator" : "280:78-280:81",
                                    "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                                    "name" : "dose",
                                    "type" : "QueryLetRef"
                                 }, {
                                    "type" : "ToQuantity",
                                    "operand" : {
                                       "localId" : "507",
                                       "locator" : "280:85-280:95",
                                       "resultTypeName" : "{urn:hl7-org:elm-types:r1}Decimal",
                                       "name" : "dosesPerDay",
                                       "type" : "QueryLetRef"
                                    }
                                 } ]
                              } ]
                           } ]
                        } ]
                     }
                  }
               }
            },
            "operand" : [ {
               "name" : "Dispense",
               "operandTypeSpecifier" : {
                  "localId" : "438",
                  "locator" : "262:53-262:72",
                  "resultTypeName" : "{http://hl7.org/fhir}MedicationDispense",
                  "name" : "{http://hl7.org/fhir}MedicationDispense",
                  "type" : "NamedTypeSpecifier"
               }
            } ]
         }, {
            "localId" : "518",
            "locator" : "286:1-287:9",
            "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
            "name" : "TherapeuticDuration",
            "context" : "Patient",
            "accessLevel" : "Public",
            "type" : "FunctionDef",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "518",
                  "s" : [ {
                     "value" : [ "/*Returns the established therapeutic duration for a given medication.\nThis is likely measure specific, though could potentially be established for\nany drug and distributed as a CodeSystem supplement.\nDefaulting to 14 days here for illustration.*/\n","define function ","\"TherapeuticDuration\"","(","medication"," " ]
                  }, {
                     "r" : "516",
                     "s" : [ {
                        "value" : [ "Concept" ]
                     } ]
                  }, {
                     "value" : [ " ):\n  " ]
                  }, {
                     "r" : "517",
                     "s" : [ {
                        "r" : "517",
                        "s" : [ {
                           "value" : [ "14 ","days" ]
                        } ]
                     } ]
                  } ]
               }
            } ],
            "expression" : {
               "localId" : "517",
               "locator" : "287:3-287:9",
               "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
               "value" : 14,
               "unit" : "days",
               "type" : "Quantity"
            },
            "operand" : [ {
               "name" : "medication",
               "operandTypeSpecifier" : {
                  "localId" : "516",
                  "locator" : "286:50-286:56",
                  "resultTypeName" : "{urn:hl7-org:elm-types:r1}Concept",
                  "name" : "{urn:hl7-org:elm-types:r1}Concept",
                  "type" : "NamedTypeSpecifier"
               }
            } ]
         }, {
            "localId" : "544",
            "locator" : "306:1-315:12",
            "name" : "MedicationAdministrationPeriod",
            "context" : "Patient",
            "accessLevel" : "Public",
            "type" : "FunctionDef",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "544",
                  "s" : [ {
                     "value" : [ "/*Next we consider MedicationAdministration. This data type is typically used to\ncapture specific administration, with the relevantPeriod capturing start and stop\ntime of the administration event:\n\n* effective[x]: Start and end time of administration\n\nHowever, when calculating cumulative medication duration, it is typically the\ntherapeutic period of the medication that should be considered. Currently neither\nthe Medication nor MedicationKnowledge resources provide this information, so\nwe model it here as a function that can potentially be implemented in a variety\nof ways, including measure-specific values, as well as distribution as an RxNorm\ncode system supplement.\n\nHowever it is obtained, if therapeutic duration can be obtained, and the effective\nperiod has a start, the result will be\n\n    Interval[startDate, startDate + therapeuticDuration]*/\n","define function ","\"MedicationAdministrationPeriod\"","(","Administration"," " ]
                  }, {
                     "r" : "519",
                     "s" : [ {
                        "value" : [ "\"MedicationAdministration\"" ]
                     } ]
                  }, {
                     "value" : [ " ):\n  " ]
                  }, {
                     "r" : "543",
                     "s" : [ {
                        "r" : "543",
                        "s" : [ {
                           "s" : [ {
                              "r" : "521",
                              "s" : [ {
                                 "r" : "520",
                                 "s" : [ {
                                    "s" : [ {
                                       "value" : [ "Administration" ]
                                    } ]
                                 } ]
                              }, {
                                 "value" : [ " ","M" ]
                              } ]
                           } ]
                        }, {
                           "value" : [ "\n    " ]
                        }, {
                           "s" : [ {
                              "value" : [ "let\n      " ]
                           }, {
                              "r" : "525",
                              "s" : [ {
                                 "value" : [ "therapeuticDuration",": " ]
                              }, {
                                 "r" : "524",
                                 "s" : [ {
                                    "value" : [ "TherapeuticDuration","(" ]
                                 }, {
                                    "r" : "523",
                                    "s" : [ {
                                       "r" : "522",
                                       "s" : [ {
                                          "value" : [ "Administration" ]
                                       } ]
                                    }, {
                                       "value" : [ "." ]
                                    }, {
                                       "r" : "523",
                                       "s" : [ {
                                          "value" : [ "medication" ]
                                       } ]
                                    } ]
                                 }, {
                                    "value" : [ ")" ]
                                 } ]
                              } ]
                           }, {
                              "value" : [ ",\n      " ]
                           }, {
                              "r" : "529",
                              "s" : [ {
                                 "value" : [ "startDate",": " ]
                              }, {
                                 "r" : "528",
                                 "s" : [ {
                                    "value" : [ "start of " ]
                                 }, {
                                    "r" : "527",
                                    "s" : [ {
                                       "r" : "526",
                                       "s" : [ {
                                          "value" : [ "Administration" ]
                                       } ]
                                    }, {
                                       "value" : [ "." ]
                                    }, {
                                       "r" : "527",
                                       "s" : [ {
                                          "value" : [ "effective" ]
                                       } ]
                                    } ]
                                 } ]
                              } ]
                           } ]
                        }, {
                           "value" : [ "\n    " ]
                        }, {
                           "r" : "542",
                           "s" : [ {
                              "value" : [ "return\n      " ]
                           }, {
                              "r" : "541",
                              "s" : [ {
                                 "value" : [ "if " ]
                              }, {
                                 "r" : "534",
                                 "s" : [ {
                                    "r" : "531",
                                    "s" : [ {
                                       "r" : "530",
                                       "s" : [ {
                                          "value" : [ "startDate" ]
                                       } ]
                                    }, {
                                       "value" : [ " is not null" ]
                                    } ]
                                 }, {
                                    "value" : [ " and " ]
                                 }, {
                                    "r" : "533",
                                    "s" : [ {
                                       "r" : "532",
                                       "s" : [ {
                                          "value" : [ "therapeuticDuration" ]
                                       } ]
                                    }, {
                                       "value" : [ " is not null" ]
                                    } ]
                                 } ]
                              }, {
                                 "value" : [ " then\n        " ]
                              }, {
                                 "r" : "539",
                                 "s" : [ {
                                    "value" : [ "Interval[" ]
                                 }, {
                                    "r" : "535",
                                    "s" : [ {
                                       "value" : [ "startDate" ]
                                    } ]
                                 }, {
                                    "value" : [ ", " ]
                                 }, {
                                    "r" : "538",
                                    "s" : [ {
                                       "r" : "536",
                                       "s" : [ {
                                          "value" : [ "startDate" ]
                                       } ]
                                    }, {
                                       "value" : [ " + " ]
                                    }, {
                                       "r" : "537",
                                       "s" : [ {
                                          "value" : [ "therapeuticDuration" ]
                                       } ]
                                    } ]
                                 }, {
                                    "value" : [ "]" ]
                                 } ]
                              }, {
                                 "r" : "540",
                                 "value" : [ "\n      else\n        ","null" ]
                              } ]
                           } ]
                        } ]
                     } ]
                  } ]
               }
            } ],
            "resultTypeSpecifier" : {
               "type" : "IntervalTypeSpecifier",
               "pointType" : {
                  "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                  "type" : "NamedTypeSpecifier"
               }
            },
            "expression" : {
               "localId" : "543",
               "locator" : "307:3-315:12",
               "type" : "Query",
               "resultTypeSpecifier" : {
                  "type" : "IntervalTypeSpecifier",
                  "pointType" : {
                     "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                     "type" : "NamedTypeSpecifier"
                  }
               },
               "source" : [ {
                  "localId" : "521",
                  "locator" : "307:3-307:18",
                  "resultTypeName" : "{http://hl7.org/fhir}MedicationAdministration",
                  "alias" : "M",
                  "expression" : {
                     "localId" : "520",
                     "locator" : "307:3-307:16",
                     "resultTypeName" : "{http://hl7.org/fhir}MedicationAdministration",
                     "name" : "Administration",
                     "type" : "OperandRef"
                  }
               } ],
               "let" : [ {
                  "localId" : "525",
                  "locator" : "309:7-309:73",
                  "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                  "identifier" : "therapeuticDuration",
                  "expression" : {
                     "localId" : "524",
                     "locator" : "309:28-309:73",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                     "name" : "TherapeuticDuration",
                     "type" : "FunctionRef",
                     "operand" : [ {
                        "name" : "ToConcept",
                        "libraryName" : "FHIRHelpers",
                        "type" : "FunctionRef",
                        "operand" : [ {
                           "asType" : "{http://hl7.org/fhir}CodeableConcept",
                           "type" : "As",
                           "operand" : {
                              "localId" : "523",
                              "locator" : "309:48-309:72",
                              "path" : "medication",
                              "type" : "Property",
                              "resultTypeSpecifier" : {
                                 "type" : "ChoiceTypeSpecifier",
                                 "choice" : [ {
                                    "name" : "{http://hl7.org/fhir}CodeableConcept",
                                    "type" : "NamedTypeSpecifier"
                                 }, {
                                    "name" : "{http://hl7.org/fhir}Reference",
                                    "type" : "NamedTypeSpecifier"
                                 } ]
                              },
                              "source" : {
                                 "localId" : "522",
                                 "locator" : "309:48-309:61",
                                 "resultTypeName" : "{http://hl7.org/fhir}MedicationAdministration",
                                 "name" : "Administration",
                                 "type" : "OperandRef"
                              }
                           }
                        } ]
                     } ]
                  }
               }, {
                  "localId" : "529",
                  "locator" : "310:7-310:50",
                  "resultTypeName" : "{urn:hl7-org:elm-types:r1}DateTime",
                  "identifier" : "startDate",
                  "expression" : {
                     "localId" : "528",
                     "locator" : "310:18-310:50",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}DateTime",
                     "type" : "Start",
                     "operand" : {
                        "name" : "ToInterval",
                        "libraryName" : "FHIRHelpers",
                        "type" : "FunctionRef",
                        "operand" : [ {
                           "asType" : "{http://hl7.org/fhir}Period",
                           "type" : "As",
                           "operand" : {
                              "localId" : "527",
                              "locator" : "310:27-310:50",
                              "path" : "effective",
                              "type" : "Property",
                              "resultTypeSpecifier" : {
                                 "type" : "ChoiceTypeSpecifier",
                                 "choice" : [ {
                                    "name" : "{http://hl7.org/fhir}dateTime",
                                    "type" : "NamedTypeSpecifier"
                                 }, {
                                    "name" : "{http://hl7.org/fhir}Period",
                                    "type" : "NamedTypeSpecifier"
                                 } ]
                              },
                              "source" : {
                                 "localId" : "526",
                                 "locator" : "310:27-310:40",
                                 "resultTypeName" : "{http://hl7.org/fhir}MedicationAdministration",
                                 "name" : "Administration",
                                 "type" : "OperandRef"
                              }
                           }
                        } ]
                     }
                  }
               } ],
               "relationship" : [ ],
               "return" : {
                  "localId" : "542",
                  "locator" : "311:5-315:12",
                  "resultTypeSpecifier" : {
                     "type" : "IntervalTypeSpecifier",
                     "pointType" : {
                        "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                        "type" : "NamedTypeSpecifier"
                     }
                  },
                  "expression" : {
                     "localId" : "541",
                     "locator" : "312:7-315:12",
                     "type" : "If",
                     "resultTypeSpecifier" : {
                        "type" : "IntervalTypeSpecifier",
                        "pointType" : {
                           "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                           "type" : "NamedTypeSpecifier"
                        }
                     },
                     "condition" : {
                        "localId" : "534",
                        "locator" : "312:10-312:66",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Boolean",
                        "type" : "And",
                        "operand" : [ {
                           "localId" : "531",
                           "locator" : "312:10-312:30",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Boolean",
                           "type" : "Not",
                           "operand" : {
                              "locator" : "312:10-312:30",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Boolean",
                              "type" : "IsNull",
                              "operand" : {
                                 "localId" : "530",
                                 "locator" : "312:10-312:18",
                                 "resultTypeName" : "{urn:hl7-org:elm-types:r1}DateTime",
                                 "name" : "startDate",
                                 "type" : "QueryLetRef"
                              }
                           }
                        }, {
                           "localId" : "533",
                           "locator" : "312:36-312:66",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Boolean",
                           "type" : "Not",
                           "operand" : {
                              "locator" : "312:36-312:66",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Boolean",
                              "type" : "IsNull",
                              "operand" : {
                                 "localId" : "532",
                                 "locator" : "312:36-312:54",
                                 "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                                 "name" : "therapeuticDuration",
                                 "type" : "QueryLetRef"
                              }
                           }
                        } ]
                     },
                     "then" : {
                        "localId" : "539",
                        "locator" : "313:9-313:60",
                        "lowClosed" : true,
                        "highClosed" : true,
                        "type" : "Interval",
                        "resultTypeSpecifier" : {
                           "type" : "IntervalTypeSpecifier",
                           "pointType" : {
                              "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                              "type" : "NamedTypeSpecifier"
                           }
                        },
                        "low" : {
                           "localId" : "535",
                           "locator" : "313:18-313:26",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}DateTime",
                           "name" : "startDate",
                           "type" : "QueryLetRef"
                        },
                        "high" : {
                           "localId" : "538",
                           "locator" : "313:29-313:59",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}DateTime",
                           "type" : "Add",
                           "operand" : [ {
                              "localId" : "536",
                              "locator" : "313:29-313:37",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}DateTime",
                              "name" : "startDate",
                              "type" : "QueryLetRef"
                           }, {
                              "localId" : "537",
                              "locator" : "313:41-313:59",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                              "name" : "therapeuticDuration",
                              "type" : "QueryLetRef"
                           } ]
                        }
                     },
                     "else" : {
                        "type" : "As",
                        "operand" : {
                           "localId" : "540",
                           "locator" : "315:9-315:12",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Any",
                           "type" : "Null"
                        },
                        "asTypeSpecifier" : {
                           "type" : "IntervalTypeSpecifier",
                           "pointType" : {
                              "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                              "type" : "NamedTypeSpecifier"
                           }
                        }
                     }
                  }
               }
            },
            "operand" : [ {
               "name" : "Administration",
               "operandTypeSpecifier" : {
                  "localId" : "519",
                  "locator" : "306:65-306:90",
                  "resultTypeName" : "{http://hl7.org/fhir}MedicationAdministration",
                  "name" : "{http://hl7.org/fhir}MedicationAdministration",
                  "type" : "NamedTypeSpecifier"
               }
            } ]
         }, {
            "localId" : "559",
            "locator" : "327:1-328:99",
            "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
            "name" : "CumulativeDuration",
            "context" : "Patient",
            "accessLevel" : "Public",
            "type" : "FunctionDef",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "559",
                  "s" : [ {
                     "value" : [ "/*Now that we have functions for determining the medication period for individual\nprescriptions, administrations, and dispenses, we can combine those using\nan overall cumulative medication duration calculation.\n\nThere are two broad approaches to calculating cumulative duration, one that _collapses_\noverlapping intervals so that calculations are not duplicated, and one that _rolls out_\noverlapping intervals so that the durations are laid end-to-end.\n\nFirst, we define a function that simply calculates CumulativeDuration of a set of\nintervals:*/\n","define function ","\"CumulativeDuration\"","(","Intervals"," " ]
                  }, {
                     "r" : "547",
                     "s" : [ {
                        "value" : [ "List<" ]
                     }, {
                        "r" : "546",
                        "s" : [ {
                           "value" : [ "Interval<" ]
                        }, {
                           "r" : "545",
                           "s" : [ {
                              "value" : [ "DateTime" ]
                           } ]
                        }, {
                           "value" : [ ">" ]
                        } ]
                     }, {
                        "value" : [ ">" ]
                     } ]
                  }, {
                     "value" : [ " ):\n  " ]
                  }, {
                     "r" : "558",
                     "s" : [ {
                        "r" : "558",
                        "s" : [ {
                           "value" : [ "Sum","(" ]
                        }, {
                           "r" : "557",
                           "s" : [ {
                              "s" : [ {
                                 "r" : "550",
                                 "s" : [ {
                                    "r" : "549",
                                    "s" : [ {
                                       "value" : [ "(" ]
                                    }, {
                                       "r" : "549",
                                       "s" : [ {
                                          "value" : [ "collapse " ]
                                       }, {
                                          "r" : "548",
                                          "s" : [ {
                                             "value" : [ "Intervals" ]
                                          } ]
                                       }, {
                                          "value" : [ " per ","day" ]
                                       } ]
                                    }, {
                                       "value" : [ ")" ]
                                    } ]
                                 }, {
                                    "value" : [ " ","X" ]
                                 } ]
                              } ]
                           }, {
                              "value" : [ " " ]
                           }, {
                              "r" : "556",
                              "s" : [ {
                                 "value" : [ "return all " ]
                              }, {
                                 "r" : "555",
                                 "s" : [ {
                                    "value" : [ "difference in days between " ]
                                 }, {
                                    "r" : "552",
                                    "s" : [ {
                                       "value" : [ "start of " ]
                                    }, {
                                       "r" : "551",
                                       "s" : [ {
                                          "value" : [ "X" ]
                                       } ]
                                    } ]
                                 }, {
                                    "value" : [ " and " ]
                                 }, {
                                    "r" : "554",
                                    "s" : [ {
                                       "value" : [ "end of " ]
                                    }, {
                                       "r" : "553",
                                       "s" : [ {
                                          "value" : [ "X" ]
                                       } ]
                                    } ]
                                 } ]
                              } ]
                           } ]
                        }, {
                           "value" : [ ")" ]
                        } ]
                     } ]
                  } ]
               }
            } ],
            "expression" : {
               "localId" : "558",
               "locator" : "328:3-328:99",
               "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
               "type" : "Sum",
               "source" : {
                  "localId" : "557",
                  "locator" : "328:7-328:98",
                  "type" : "Query",
                  "resultTypeSpecifier" : {
                     "type" : "ListTypeSpecifier",
                     "elementType" : {
                        "name" : "{urn:hl7-org:elm-types:r1}Integer",
                        "type" : "NamedTypeSpecifier"
                     }
                  },
                  "source" : [ {
                     "localId" : "550",
                     "locator" : "328:7-328:36",
                     "alias" : "X",
                     "resultTypeSpecifier" : {
                        "type" : "ListTypeSpecifier",
                        "elementType" : {
                           "type" : "IntervalTypeSpecifier",
                           "pointType" : {
                              "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                              "type" : "NamedTypeSpecifier"
                           }
                        }
                     },
                     "expression" : {
                        "localId" : "549",
                        "locator" : "328:7-328:34",
                        "type" : "Collapse",
                        "resultTypeSpecifier" : {
                           "type" : "ListTypeSpecifier",
                           "elementType" : {
                              "type" : "IntervalTypeSpecifier",
                              "pointType" : {
                                 "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                                 "type" : "NamedTypeSpecifier"
                              }
                           }
                        },
                        "operand" : [ {
                           "localId" : "548",
                           "locator" : "328:17-328:25",
                           "name" : "Intervals",
                           "type" : "OperandRef",
                           "resultTypeSpecifier" : {
                              "type" : "ListTypeSpecifier",
                              "elementType" : {
                                 "type" : "IntervalTypeSpecifier",
                                 "pointType" : {
                                    "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                                    "type" : "NamedTypeSpecifier"
                                 }
                              }
                           }
                        }, {
                           "value" : 1.0,
                           "unit" : "day",
                           "type" : "Quantity"
                        } ]
                     }
                  } ],
                  "relationship" : [ ],
                  "return" : {
                     "localId" : "556",
                     "locator" : "328:38-328:98",
                     "distinct" : false,
                     "resultTypeSpecifier" : {
                        "type" : "ListTypeSpecifier",
                        "elementType" : {
                           "name" : "{urn:hl7-org:elm-types:r1}Integer",
                           "type" : "NamedTypeSpecifier"
                        }
                     },
                     "expression" : {
                        "localId" : "555",
                        "locator" : "328:49-328:98",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                        "precision" : "Day",
                        "type" : "DifferenceBetween",
                        "operand" : [ {
                           "localId" : "552",
                           "locator" : "328:76-328:85",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}DateTime",
                           "type" : "Start",
                           "operand" : {
                              "localId" : "551",
                              "locator" : "328:85",
                              "name" : "X",
                              "type" : "AliasRef",
                              "resultTypeSpecifier" : {
                                 "type" : "IntervalTypeSpecifier",
                                 "pointType" : {
                                    "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                                    "type" : "NamedTypeSpecifier"
                                 }
                              }
                           }
                        }, {
                           "localId" : "554",
                           "locator" : "328:91-328:98",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}DateTime",
                           "type" : "End",
                           "operand" : {
                              "localId" : "553",
                              "locator" : "328:98",
                              "name" : "X",
                              "type" : "AliasRef",
                              "resultTypeSpecifier" : {
                                 "type" : "IntervalTypeSpecifier",
                                 "pointType" : {
                                    "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                                    "type" : "NamedTypeSpecifier"
                                 }
                              }
                           }
                        } ]
                     }
                  }
               }
            },
            "operand" : [ {
               "name" : "Intervals",
               "operandTypeSpecifier" : {
                  "localId" : "547",
                  "locator" : "327:48-327:71",
                  "type" : "ListTypeSpecifier",
                  "resultTypeSpecifier" : {
                     "type" : "ListTypeSpecifier",
                     "elementType" : {
                        "type" : "IntervalTypeSpecifier",
                        "pointType" : {
                           "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                           "type" : "NamedTypeSpecifier"
                        }
                     }
                  },
                  "elementType" : {
                     "localId" : "546",
                     "locator" : "327:53-327:70",
                     "type" : "IntervalTypeSpecifier",
                     "resultTypeSpecifier" : {
                        "type" : "IntervalTypeSpecifier",
                        "pointType" : {
                           "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                           "type" : "NamedTypeSpecifier"
                        }
                     },
                     "pointType" : {
                        "localId" : "545",
                        "locator" : "327:62-327:69",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}DateTime",
                        "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                        "type" : "NamedTypeSpecifier"
                     }
                  }
               }
            } ]
         }, {
            "localId" : "601",
            "locator" : "331:1-340:8",
            "name" : "RolloutIntervals",
            "context" : "Patient",
            "accessLevel" : "Public",
            "type" : "FunctionDef",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "601",
                  "s" : [ {
                     "value" : [ "/*Next, we define a function that rolls out intervals:*/\n","define function ","\"RolloutIntervals\"","(","intervals"," " ]
                  }, {
                     "r" : "562",
                     "s" : [ {
                        "value" : [ "List<" ]
                     }, {
                        "r" : "561",
                        "s" : [ {
                           "value" : [ "Interval<" ]
                        }, {
                           "r" : "560",
                           "s" : [ {
                              "value" : [ "DateTime" ]
                           } ]
                        }, {
                           "value" : [ ">" ]
                        } ]
                     }, {
                        "value" : [ ">" ]
                     } ]
                  }, {
                     "value" : [ " ):\n  " ]
                  }, {
                     "r" : "600",
                     "s" : [ {
                        "r" : "600",
                        "s" : [ {
                           "s" : [ {
                              "r" : "564",
                              "s" : [ {
                                 "r" : "563",
                                 "s" : [ {
                                    "s" : [ {
                                       "value" : [ "intervals" ]
                                    } ]
                                 } ]
                              }, {
                                 "value" : [ " ","I" ]
                              } ]
                           } ]
                        }, {
                           "value" : [ "\n    " ]
                        }, {
                           "r" : "599",
                           "s" : [ {
                              "value" : [ "aggregate all ","R"," " ]
                           }, {
                              "r" : "569",
                              "s" : [ {
                                 "value" : [ "starting (" ]
                              }, {
                                 "r" : "569",
                                 "s" : [ {
                                    "r" : "565",
                                    "value" : [ "null"," as " ]
                                 }, {
                                    "r" : "568",
                                    "s" : [ {
                                       "value" : [ "List<" ]
                                    }, {
                                       "r" : "567",
                                       "s" : [ {
                                          "value" : [ "Interval<" ]
                                       }, {
                                          "r" : "566",
                                          "s" : [ {
                                             "value" : [ "DateTime" ]
                                          } ]
                                       }, {
                                          "value" : [ ">" ]
                                       } ]
                                    }, {
                                       "value" : [ ">" ]
                                    } ]
                                 } ]
                              }, {
                                 "value" : [ ")" ]
                              } ]
                           }, {
                              "value" : [ ":\n      " ]
                           }, {
                              "r" : "598",
                              "s" : [ {
                                 "r" : "570",
                                 "s" : [ {
                                    "value" : [ "R" ]
                                 } ]
                              }, {
                                 "value" : [ " union " ]
                              }, {
                                 "r" : "597",
                                 "s" : [ {
                                    "value" : [ "(" ]
                                 }, {
                                    "r" : "597",
                                    "s" : [ {
                                       "value" : [ "{\n        " ]
                                    }, {
                                       "r" : "596",
                                       "s" : [ {
                                          "s" : [ {
                                             "r" : "572",
                                             "s" : [ {
                                                "r" : "571",
                                                "s" : [ {
                                                   "s" : [ {
                                                      "value" : [ "I" ]
                                                   } ]
                                                } ]
                                             }, {
                                                "value" : [ " ","X" ]
                                             } ]
                                          } ]
                                       }, {
                                          "value" : [ "\n          " ]
                                       }, {
                                          "s" : [ {
                                             "value" : [ "let\n            " ]
                                          }, {
                                             "r" : "582",
                                             "s" : [ {
                                                "value" : [ "S",": " ]
                                             }, {
                                                "r" : "581",
                                                "s" : [ {
                                                   "value" : [ "Max","(" ]
                                                }, {
                                                   "r" : "580",
                                                   "s" : [ {
                                                      "value" : [ "{ " ]
                                                   }, {
                                                      "r" : "577",
                                                      "s" : [ {
                                                         "r" : "575",
                                                         "s" : [ {
                                                            "value" : [ "end of " ]
                                                         }, {
                                                            "r" : "574",
                                                            "s" : [ {
                                                               "value" : [ "Last","(" ]
                                                            }, {
                                                               "r" : "573",
                                                               "s" : [ {
                                                                  "value" : [ "R" ]
                                                               } ]
                                                            }, {
                                                               "value" : [ ")" ]
                                                            } ]
                                                         } ]
                                                      }, {
                                                         "value" : [ " + " ]
                                                      }, {
                                                         "r" : "576",
                                                         "s" : [ {
                                                            "value" : [ "1 ","day" ]
                                                         } ]
                                                      } ]
                                                   }, {
                                                      "value" : [ ", " ]
                                                   }, {
                                                      "r" : "579",
                                                      "s" : [ {
                                                         "value" : [ "start of " ]
                                                      }, {
                                                         "r" : "578",
                                                         "s" : [ {
                                                            "value" : [ "X" ]
                                                         } ]
                                                      } ]
                                                   }, {
                                                      "value" : [ " }" ]
                                                   } ]
                                                }, {
                                                   "value" : [ ")" ]
                                                } ]
                                             } ]
                                          }, {
                                             "value" : [ ",\n            " ]
                                          }, {
                                             "r" : "591",
                                             "s" : [ {
                                                "value" : [ "E",": " ]
                                             }, {
                                                "r" : "590",
                                                "s" : [ {
                                                   "r" : "583",
                                                   "s" : [ {
                                                      "value" : [ "S" ]
                                                   } ]
                                                }, {
                                                   "value" : [ " + " ]
                                                }, {
                                                   "r" : "589",
                                                   "s" : [ {
                                                      "value" : [ "System",".","Quantity"," { " ]
                                                   }, {
                                                      "s" : [ {
                                                         "value" : [ "value",": " ]
                                                      }, {
                                                         "r" : "587",
                                                         "s" : [ {
                                                            "value" : [ "Coalesce","(" ]
                                                         }, {
                                                            "r" : "585",
                                                            "s" : [ {
                                                               "value" : [ "duration in days of " ]
                                                            }, {
                                                               "r" : "584",
                                                               "s" : [ {
                                                                  "value" : [ "X" ]
                                                               } ]
                                                            } ]
                                                         }, {
                                                            "r" : "586",
                                                            "value" : [ ", ","0",")" ]
                                                         } ]
                                                      } ]
                                                   }, {
                                                      "value" : [ ", " ]
                                                   }, {
                                                      "s" : [ {
                                                         "value" : [ "unit",": " ]
                                                      }, {
                                                         "r" : "588",
                                                         "s" : [ {
                                                            "value" : [ "'day'" ]
                                                         } ]
                                                      } ]
                                                   }, {
                                                      "value" : [ " }" ]
                                                   } ]
                                                } ]
                                             } ]
                                          } ]
                                       }, {
                                          "value" : [ "\n          " ]
                                       }, {
                                          "r" : "595",
                                          "s" : [ {
                                             "value" : [ "return " ]
                                          }, {
                                             "r" : "594",
                                             "s" : [ {
                                                "value" : [ "Interval[" ]
                                             }, {
                                                "r" : "592",
                                                "s" : [ {
                                                   "value" : [ "S" ]
                                                } ]
                                             }, {
                                                "value" : [ ", " ]
                                             }, {
                                                "r" : "593",
                                                "s" : [ {
                                                   "value" : [ "E" ]
                                                } ]
                                             }, {
                                                "value" : [ "]" ]
                                             } ]
                                          } ]
                                       } ]
                                    }, {
                                       "value" : [ "\n      }" ]
                                    } ]
                                 }, {
                                    "value" : [ ")" ]
                                 } ]
                              } ]
                           } ]
                        } ]
                     } ]
                  } ]
               }
            } ],
            "resultTypeSpecifier" : {
               "type" : "ListTypeSpecifier",
               "elementType" : {
                  "type" : "IntervalTypeSpecifier",
                  "pointType" : {
                     "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                     "type" : "NamedTypeSpecifier"
                  }
               }
            },
            "expression" : {
               "localId" : "600",
               "locator" : "332:3-340:8",
               "type" : "Query",
               "resultTypeSpecifier" : {
                  "type" : "ListTypeSpecifier",
                  "elementType" : {
                     "type" : "IntervalTypeSpecifier",
                     "pointType" : {
                        "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                        "type" : "NamedTypeSpecifier"
                     }
                  }
               },
               "source" : [ {
                  "localId" : "564",
                  "locator" : "332:3-332:13",
                  "alias" : "I",
                  "resultTypeSpecifier" : {
                     "type" : "ListTypeSpecifier",
                     "elementType" : {
                        "type" : "IntervalTypeSpecifier",
                        "pointType" : {
                           "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                           "type" : "NamedTypeSpecifier"
                        }
                     }
                  },
                  "expression" : {
                     "localId" : "563",
                     "locator" : "332:3-332:11",
                     "name" : "intervals",
                     "type" : "OperandRef",
                     "resultTypeSpecifier" : {
                        "type" : "ListTypeSpecifier",
                        "elementType" : {
                           "type" : "IntervalTypeSpecifier",
                           "pointType" : {
                              "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                              "type" : "NamedTypeSpecifier"
                           }
                        }
                     }
                  }
               } ],
               "relationship" : [ ],
               "aggregate" : {
                  "localId" : "599",
                  "locator" : "333:5-340:8",
                  "identifier" : "R",
                  "distinct" : false,
                  "resultTypeSpecifier" : {
                     "type" : "ListTypeSpecifier",
                     "elementType" : {
                        "type" : "IntervalTypeSpecifier",
                        "pointType" : {
                           "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                           "type" : "NamedTypeSpecifier"
                        }
                     }
                  },
                  "expression" : {
                     "localId" : "598",
                     "locator" : "334:7-340:8",
                     "type" : "Union",
                     "resultTypeSpecifier" : {
                        "type" : "ListTypeSpecifier",
                        "elementType" : {
                           "type" : "IntervalTypeSpecifier",
                           "pointType" : {
                              "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                              "type" : "NamedTypeSpecifier"
                           }
                        }
                     },
                     "operand" : [ {
                        "localId" : "570",
                        "locator" : "334:7",
                        "name" : "R",
                        "type" : "QueryLetRef",
                        "resultTypeSpecifier" : {
                           "type" : "ListTypeSpecifier",
                           "elementType" : {
                              "type" : "IntervalTypeSpecifier",
                              "pointType" : {
                                 "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                                 "type" : "NamedTypeSpecifier"
                              }
                           }
                        }
                     }, {
                        "localId" : "597",
                        "locator" : "334:15-340:8",
                        "type" : "List",
                        "resultTypeSpecifier" : {
                           "type" : "ListTypeSpecifier",
                           "elementType" : {
                              "type" : "IntervalTypeSpecifier",
                              "pointType" : {
                                 "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                                 "type" : "NamedTypeSpecifier"
                              }
                           }
                        },
                        "element" : [ {
                           "localId" : "596",
                           "locator" : "335:9-339:31",
                           "type" : "Query",
                           "resultTypeSpecifier" : {
                              "type" : "IntervalTypeSpecifier",
                              "pointType" : {
                                 "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                                 "type" : "NamedTypeSpecifier"
                              }
                           },
                           "source" : [ {
                              "localId" : "572",
                              "locator" : "335:9-335:11",
                              "alias" : "X",
                              "resultTypeSpecifier" : {
                                 "type" : "IntervalTypeSpecifier",
                                 "pointType" : {
                                    "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                                    "type" : "NamedTypeSpecifier"
                                 }
                              },
                              "expression" : {
                                 "localId" : "571",
                                 "locator" : "335:9",
                                 "name" : "I",
                                 "type" : "AliasRef",
                                 "resultTypeSpecifier" : {
                                    "type" : "IntervalTypeSpecifier",
                                    "pointType" : {
                                       "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                                       "type" : "NamedTypeSpecifier"
                                    }
                                 }
                              }
                           } ],
                           "let" : [ {
                              "localId" : "582",
                              "locator" : "337:13-337:58",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}DateTime",
                              "identifier" : "S",
                              "expression" : {
                                 "localId" : "581",
                                 "locator" : "337:16-337:58",
                                 "resultTypeName" : "{urn:hl7-org:elm-types:r1}DateTime",
                                 "type" : "Max",
                                 "source" : {
                                    "localId" : "580",
                                    "locator" : "337:20-337:57",
                                    "type" : "List",
                                    "resultTypeSpecifier" : {
                                       "type" : "ListTypeSpecifier",
                                       "elementType" : {
                                          "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                                          "type" : "NamedTypeSpecifier"
                                       }
                                    },
                                    "element" : [ {
                                       "localId" : "577",
                                       "locator" : "337:22-337:43",
                                       "resultTypeName" : "{urn:hl7-org:elm-types:r1}DateTime",
                                       "type" : "Add",
                                       "operand" : [ {
                                          "localId" : "575",
                                          "locator" : "337:22-337:35",
                                          "resultTypeName" : "{urn:hl7-org:elm-types:r1}DateTime",
                                          "type" : "End",
                                          "operand" : {
                                             "localId" : "574",
                                             "locator" : "337:29-337:35",
                                             "type" : "Last",
                                             "resultTypeSpecifier" : {
                                                "type" : "IntervalTypeSpecifier",
                                                "pointType" : {
                                                   "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                                                   "type" : "NamedTypeSpecifier"
                                                }
                                             },
                                             "source" : {
                                                "localId" : "573",
                                                "locator" : "337:34",
                                                "name" : "R",
                                                "type" : "QueryLetRef",
                                                "resultTypeSpecifier" : {
                                                   "type" : "ListTypeSpecifier",
                                                   "elementType" : {
                                                      "type" : "IntervalTypeSpecifier",
                                                      "pointType" : {
                                                         "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                                                         "type" : "NamedTypeSpecifier"
                                                      }
                                                   }
                                                }
                                             }
                                          }
                                       }, {
                                          "localId" : "576",
                                          "locator" : "337:39-337:43",
                                          "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                                          "value" : 1,
                                          "unit" : "day",
                                          "type" : "Quantity"
                                       } ]
                                    }, {
                                       "localId" : "579",
                                       "locator" : "337:46-337:55",
                                       "resultTypeName" : "{urn:hl7-org:elm-types:r1}DateTime",
                                       "type" : "Start",
                                       "operand" : {
                                          "localId" : "578",
                                          "locator" : "337:55",
                                          "name" : "X",
                                          "type" : "AliasRef",
                                          "resultTypeSpecifier" : {
                                             "type" : "IntervalTypeSpecifier",
                                             "pointType" : {
                                                "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                                                "type" : "NamedTypeSpecifier"
                                             }
                                          }
                                       }
                                    } ]
                                 }
                              }
                           }, {
                              "localId" : "591",
                              "locator" : "338:13-338:93",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}DateTime",
                              "identifier" : "E",
                              "expression" : {
                                 "localId" : "590",
                                 "locator" : "338:16-338:93",
                                 "resultTypeName" : "{urn:hl7-org:elm-types:r1}DateTime",
                                 "type" : "Add",
                                 "operand" : [ {
                                    "localId" : "583",
                                    "locator" : "338:16",
                                    "resultTypeName" : "{urn:hl7-org:elm-types:r1}DateTime",
                                    "name" : "S",
                                    "type" : "QueryLetRef"
                                 }, {
                                    "localId" : "589",
                                    "locator" : "338:20-338:93",
                                    "resultTypeName" : "{urn:hl7-org:elm-types:r1}Quantity",
                                    "classType" : "{urn:hl7-org:elm-types:r1}Quantity",
                                    "type" : "Instance",
                                    "element" : [ {
                                       "name" : "value",
                                       "value" : {
                                          "type" : "ToDecimal",
                                          "operand" : {
                                             "localId" : "587",
                                             "locator" : "338:45-338:78",
                                             "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                                             "type" : "Coalesce",
                                             "operand" : [ {
                                                "localId" : "585",
                                                "locator" : "338:54-338:74",
                                                "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                                                "precision" : "Day",
                                                "type" : "DurationBetween",
                                                "operand" : [ {
                                                   "type" : "Start",
                                                   "operand" : {
                                                      "localId" : "584",
                                                      "locator" : "338:74",
                                                      "name" : "X",
                                                      "type" : "AliasRef",
                                                      "resultTypeSpecifier" : {
                                                         "type" : "IntervalTypeSpecifier",
                                                         "pointType" : {
                                                            "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                                                            "type" : "NamedTypeSpecifier"
                                                         }
                                                      }
                                                   }
                                                }, {
                                                   "type" : "End",
                                                   "operand" : {
                                                      "localId" : "584",
                                                      "locator" : "338:74",
                                                      "name" : "X",
                                                      "type" : "AliasRef",
                                                      "resultTypeSpecifier" : {
                                                         "type" : "IntervalTypeSpecifier",
                                                         "pointType" : {
                                                            "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                                                            "type" : "NamedTypeSpecifier"
                                                         }
                                                      }
                                                   }
                                                } ]
                                             }, {
                                                "localId" : "586",
                                                "locator" : "338:77",
                                                "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
                                                "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                                                "value" : "0",
                                                "type" : "Literal"
                                             } ]
                                          }
                                       }
                                    }, {
                                       "name" : "unit",
                                       "value" : {
                                          "localId" : "588",
                                          "locator" : "338:87-338:91",
                                          "resultTypeName" : "{urn:hl7-org:elm-types:r1}String",
                                          "valueType" : "{urn:hl7-org:elm-types:r1}String",
                                          "value" : "day",
                                          "type" : "Literal"
                                       }
                                    } ]
                                 } ]
                              }
                           } ],
                           "relationship" : [ ],
                           "return" : {
                              "localId" : "595",
                              "locator" : "339:11-339:31",
                              "resultTypeSpecifier" : {
                                 "type" : "IntervalTypeSpecifier",
                                 "pointType" : {
                                    "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                                    "type" : "NamedTypeSpecifier"
                                 }
                              },
                              "expression" : {
                                 "localId" : "594",
                                 "locator" : "339:18-339:31",
                                 "lowClosed" : true,
                                 "highClosed" : true,
                                 "type" : "Interval",
                                 "resultTypeSpecifier" : {
                                    "type" : "IntervalTypeSpecifier",
                                    "pointType" : {
                                       "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                                       "type" : "NamedTypeSpecifier"
                                    }
                                 },
                                 "low" : {
                                    "localId" : "592",
                                    "locator" : "339:27",
                                    "resultTypeName" : "{urn:hl7-org:elm-types:r1}DateTime",
                                    "name" : "S",
                                    "type" : "QueryLetRef"
                                 },
                                 "high" : {
                                    "localId" : "593",
                                    "locator" : "339:30",
                                    "resultTypeName" : "{urn:hl7-org:elm-types:r1}DateTime",
                                    "name" : "E",
                                    "type" : "QueryLetRef"
                                 }
                              }
                           }
                        } ]
                     } ]
                  },
                  "starting" : {
                     "localId" : "569",
                     "locator" : "333:21-333:63",
                     "strict" : false,
                     "type" : "As",
                     "resultTypeSpecifier" : {
                        "type" : "ListTypeSpecifier",
                        "elementType" : {
                           "type" : "IntervalTypeSpecifier",
                           "pointType" : {
                              "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                              "type" : "NamedTypeSpecifier"
                           }
                        }
                     },
                     "operand" : {
                        "localId" : "565",
                        "locator" : "333:31-333:34",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Any",
                        "type" : "Null"
                     },
                     "asTypeSpecifier" : {
                        "localId" : "568",
                        "locator" : "333:39-333:62",
                        "type" : "ListTypeSpecifier",
                        "resultTypeSpecifier" : {
                           "type" : "ListTypeSpecifier",
                           "elementType" : {
                              "type" : "IntervalTypeSpecifier",
                              "pointType" : {
                                 "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                                 "type" : "NamedTypeSpecifier"
                              }
                           }
                        },
                        "elementType" : {
                           "localId" : "567",
                           "locator" : "333:44-333:61",
                           "type" : "IntervalTypeSpecifier",
                           "resultTypeSpecifier" : {
                              "type" : "IntervalTypeSpecifier",
                              "pointType" : {
                                 "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                                 "type" : "NamedTypeSpecifier"
                              }
                           },
                           "pointType" : {
                              "localId" : "566",
                              "locator" : "333:53-333:60",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}DateTime",
                              "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                              "type" : "NamedTypeSpecifier"
                           }
                        }
                     }
                  }
               }
            },
            "operand" : [ {
               "name" : "intervals",
               "operandTypeSpecifier" : {
                  "localId" : "562",
                  "locator" : "331:46-331:69",
                  "type" : "ListTypeSpecifier",
                  "resultTypeSpecifier" : {
                     "type" : "ListTypeSpecifier",
                     "elementType" : {
                        "type" : "IntervalTypeSpecifier",
                        "pointType" : {
                           "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                           "type" : "NamedTypeSpecifier"
                        }
                     }
                  },
                  "elementType" : {
                     "localId" : "561",
                     "locator" : "331:51-331:68",
                     "type" : "IntervalTypeSpecifier",
                     "resultTypeSpecifier" : {
                        "type" : "IntervalTypeSpecifier",
                        "pointType" : {
                           "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                           "type" : "NamedTypeSpecifier"
                        }
                     },
                     "pointType" : {
                        "localId" : "560",
                        "locator" : "331:60-331:67",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}DateTime",
                        "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                        "type" : "NamedTypeSpecifier"
                     }
                  }
               }
            } ]
         }, {
            "localId" : "626",
            "locator" : "344:1-353:5",
            "name" : "MedicationPeriod",
            "context" : "Patient",
            "accessLevel" : "Public",
            "type" : "FunctionDef",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "626",
                  "s" : [ {
                     "value" : [ "/*Then, we define a function that allows us to calculate based on the various medication\ntypes:*/\n","define function ","\"MedicationPeriod\"","(","medication"," " ]
                  }, {
                     "r" : "605",
                     "s" : [ {
                        "value" : [ "Choice<" ]
                     }, {
                        "r" : "602",
                        "s" : [ {
                           "value" : [ "\"MedicationRequest\"" ]
                        } ]
                     }, {
                        "value" : [ ",\n    " ]
                     }, {
                        "r" : "603",
                        "s" : [ {
                           "value" : [ "\"MedicationDispense\"" ]
                        } ]
                     }, {
                        "value" : [ ",\n    " ]
                     }, {
                        "r" : "604",
                        "s" : [ {
                           "value" : [ "\"MedicationAdministration\"" ]
                        } ]
                     }, {
                        "value" : [ "\n  >" ]
                     } ]
                  }, {
                     "value" : [ " ):\n  " ]
                  }, {
                     "r" : "625",
                     "s" : [ {
                        "r" : "625",
                        "s" : [ {
                           "value" : [ "case\n    " ]
                        }, {
                           "r" : "611",
                           "s" : [ {
                              "value" : [ "when " ]
                           }, {
                              "r" : "608",
                              "s" : [ {
                                 "r" : "606",
                                 "s" : [ {
                                    "value" : [ "medication" ]
                                 } ]
                              }, {
                                 "value" : [ " is " ]
                              }, {
                                 "r" : "607",
                                 "s" : [ {
                                    "value" : [ "MedicationRequest" ]
                                 } ]
                              } ]
                           }, {
                              "value" : [ " then " ]
                           }, {
                              "r" : "610",
                              "s" : [ {
                                 "value" : [ "MedicationRequestPeriod","(" ]
                              }, {
                                 "r" : "609",
                                 "s" : [ {
                                    "value" : [ "medication" ]
                                 } ]
                              }, {
                                 "value" : [ ")" ]
                              } ]
                           } ]
                        }, {
                           "value" : [ "\n    " ]
                        }, {
                           "r" : "617",
                           "s" : [ {
                              "value" : [ "when " ]
                           }, {
                              "r" : "614",
                              "s" : [ {
                                 "r" : "612",
                                 "s" : [ {
                                    "value" : [ "medication" ]
                                 } ]
                              }, {
                                 "value" : [ " is " ]
                              }, {
                                 "r" : "613",
                                 "s" : [ {
                                    "value" : [ "MedicationDispense" ]
                                 } ]
                              } ]
                           }, {
                              "value" : [ " then " ]
                           }, {
                              "r" : "616",
                              "s" : [ {
                                 "value" : [ "MedicationDispensePeriod","(" ]
                              }, {
                                 "r" : "615",
                                 "s" : [ {
                                    "value" : [ "medication" ]
                                 } ]
                              }, {
                                 "value" : [ ")" ]
                              } ]
                           } ]
                        }, {
                           "value" : [ "\n    " ]
                        }, {
                           "r" : "623",
                           "s" : [ {
                              "value" : [ "when " ]
                           }, {
                              "r" : "620",
                              "s" : [ {
                                 "r" : "618",
                                 "s" : [ {
                                    "value" : [ "medication" ]
                                 } ]
                              }, {
                                 "value" : [ " is " ]
                              }, {
                                 "r" : "619",
                                 "s" : [ {
                                    "value" : [ "MedicationAdministration" ]
                                 } ]
                              } ]
                           }, {
                              "value" : [ " then " ]
                           }, {
                              "r" : "622",
                              "s" : [ {
                                 "value" : [ "MedicationAdministrationPeriod","(" ]
                              }, {
                                 "r" : "621",
                                 "s" : [ {
                                    "value" : [ "medication" ]
                                 } ]
                              }, {
                                 "value" : [ ")" ]
                              } ]
                           } ]
                        }, {
                           "r" : "624",
                           "value" : [ "\n    else ","null","\n  end" ]
                        } ]
                     } ]
                  } ]
               }
            } ],
            "resultTypeSpecifier" : {
               "type" : "IntervalTypeSpecifier",
               "pointType" : {
                  "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                  "type" : "NamedTypeSpecifier"
               }
            },
            "expression" : {
               "localId" : "625",
               "locator" : "348:3-353:5",
               "type" : "Case",
               "resultTypeSpecifier" : {
                  "type" : "IntervalTypeSpecifier",
                  "pointType" : {
                     "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                     "type" : "NamedTypeSpecifier"
                  }
               },
               "caseItem" : [ {
                  "localId" : "611",
                  "locator" : "349:5-349:81",
                  "when" : {
                     "localId" : "608",
                     "locator" : "349:10-349:40",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Boolean",
                     "type" : "Is",
                     "operand" : {
                        "localId" : "606",
                        "locator" : "349:10-349:19",
                        "name" : "medication",
                        "type" : "OperandRef",
                        "resultTypeSpecifier" : {
                           "type" : "ChoiceTypeSpecifier",
                           "choice" : [ {
                              "name" : "{http://hl7.org/fhir}MedicationRequest",
                              "type" : "NamedTypeSpecifier"
                           }, {
                              "name" : "{http://hl7.org/fhir}MedicationDispense",
                              "type" : "NamedTypeSpecifier"
                           }, {
                              "name" : "{http://hl7.org/fhir}MedicationAdministration",
                              "type" : "NamedTypeSpecifier"
                           } ]
                        }
                     },
                     "isTypeSpecifier" : {
                        "localId" : "607",
                        "locator" : "349:24-349:40",
                        "resultTypeName" : "{http://hl7.org/fhir}MedicationRequest",
                        "name" : "{http://hl7.org/fhir}MedicationRequest",
                        "type" : "NamedTypeSpecifier"
                     }
                  },
                  "then" : {
                     "localId" : "610",
                     "locator" : "349:47-349:81",
                     "name" : "MedicationRequestPeriod",
                     "type" : "FunctionRef",
                     "resultTypeSpecifier" : {
                        "type" : "IntervalTypeSpecifier",
                        "pointType" : {
                           "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                           "type" : "NamedTypeSpecifier"
                        }
                     },
                     "operand" : [ {
                        "asType" : "{http://hl7.org/fhir}MedicationRequest",
                        "type" : "As",
                        "operand" : {
                           "localId" : "609",
                           "locator" : "349:71-349:80",
                           "name" : "medication",
                           "type" : "OperandRef",
                           "resultTypeSpecifier" : {
                              "type" : "ChoiceTypeSpecifier",
                              "choice" : [ {
                                 "name" : "{http://hl7.org/fhir}MedicationRequest",
                                 "type" : "NamedTypeSpecifier"
                              }, {
                                 "name" : "{http://hl7.org/fhir}MedicationDispense",
                                 "type" : "NamedTypeSpecifier"
                              }, {
                                 "name" : "{http://hl7.org/fhir}MedicationAdministration",
                                 "type" : "NamedTypeSpecifier"
                              } ]
                           }
                        }
                     } ]
                  }
               }, {
                  "localId" : "617",
                  "locator" : "350:5-350:83",
                  "when" : {
                     "localId" : "614",
                     "locator" : "350:10-350:41",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Boolean",
                     "type" : "Is",
                     "operand" : {
                        "localId" : "612",
                        "locator" : "350:10-350:19",
                        "name" : "medication",
                        "type" : "OperandRef",
                        "resultTypeSpecifier" : {
                           "type" : "ChoiceTypeSpecifier",
                           "choice" : [ {
                              "name" : "{http://hl7.org/fhir}MedicationRequest",
                              "type" : "NamedTypeSpecifier"
                           }, {
                              "name" : "{http://hl7.org/fhir}MedicationDispense",
                              "type" : "NamedTypeSpecifier"
                           }, {
                              "name" : "{http://hl7.org/fhir}MedicationAdministration",
                              "type" : "NamedTypeSpecifier"
                           } ]
                        }
                     },
                     "isTypeSpecifier" : {
                        "localId" : "613",
                        "locator" : "350:24-350:41",
                        "resultTypeName" : "{http://hl7.org/fhir}MedicationDispense",
                        "name" : "{http://hl7.org/fhir}MedicationDispense",
                        "type" : "NamedTypeSpecifier"
                     }
                  },
                  "then" : {
                     "localId" : "616",
                     "locator" : "350:48-350:83",
                     "name" : "MedicationDispensePeriod",
                     "type" : "FunctionRef",
                     "resultTypeSpecifier" : {
                        "type" : "IntervalTypeSpecifier",
                        "pointType" : {
                           "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                           "type" : "NamedTypeSpecifier"
                        }
                     },
                     "operand" : [ {
                        "asType" : "{http://hl7.org/fhir}MedicationDispense",
                        "type" : "As",
                        "operand" : {
                           "localId" : "615",
                           "locator" : "350:73-350:82",
                           "name" : "medication",
                           "type" : "OperandRef",
                           "resultTypeSpecifier" : {
                              "type" : "ChoiceTypeSpecifier",
                              "choice" : [ {
                                 "name" : "{http://hl7.org/fhir}MedicationRequest",
                                 "type" : "NamedTypeSpecifier"
                              }, {
                                 "name" : "{http://hl7.org/fhir}MedicationDispense",
                                 "type" : "NamedTypeSpecifier"
                              }, {
                                 "name" : "{http://hl7.org/fhir}MedicationAdministration",
                                 "type" : "NamedTypeSpecifier"
                              } ]
                           }
                        }
                     } ]
                  }
               }, {
                  "localId" : "623",
                  "locator" : "351:5-351:95",
                  "when" : {
                     "localId" : "620",
                     "locator" : "351:10-351:47",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Boolean",
                     "type" : "Is",
                     "operand" : {
                        "localId" : "618",
                        "locator" : "351:10-351:19",
                        "name" : "medication",
                        "type" : "OperandRef",
                        "resultTypeSpecifier" : {
                           "type" : "ChoiceTypeSpecifier",
                           "choice" : [ {
                              "name" : "{http://hl7.org/fhir}MedicationRequest",
                              "type" : "NamedTypeSpecifier"
                           }, {
                              "name" : "{http://hl7.org/fhir}MedicationDispense",
                              "type" : "NamedTypeSpecifier"
                           }, {
                              "name" : "{http://hl7.org/fhir}MedicationAdministration",
                              "type" : "NamedTypeSpecifier"
                           } ]
                        }
                     },
                     "isTypeSpecifier" : {
                        "localId" : "619",
                        "locator" : "351:24-351:47",
                        "resultTypeName" : "{http://hl7.org/fhir}MedicationAdministration",
                        "name" : "{http://hl7.org/fhir}MedicationAdministration",
                        "type" : "NamedTypeSpecifier"
                     }
                  },
                  "then" : {
                     "localId" : "622",
                     "locator" : "351:54-351:95",
                     "name" : "MedicationAdministrationPeriod",
                     "type" : "FunctionRef",
                     "resultTypeSpecifier" : {
                        "type" : "IntervalTypeSpecifier",
                        "pointType" : {
                           "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                           "type" : "NamedTypeSpecifier"
                        }
                     },
                     "operand" : [ {
                        "asType" : "{http://hl7.org/fhir}MedicationAdministration",
                        "type" : "As",
                        "operand" : {
                           "localId" : "621",
                           "locator" : "351:85-351:94",
                           "name" : "medication",
                           "type" : "OperandRef",
                           "resultTypeSpecifier" : {
                              "type" : "ChoiceTypeSpecifier",
                              "choice" : [ {
                                 "name" : "{http://hl7.org/fhir}MedicationRequest",
                                 "type" : "NamedTypeSpecifier"
                              }, {
                                 "name" : "{http://hl7.org/fhir}MedicationDispense",
                                 "type" : "NamedTypeSpecifier"
                              }, {
                                 "name" : "{http://hl7.org/fhir}MedicationAdministration",
                                 "type" : "NamedTypeSpecifier"
                              } ]
                           }
                        }
                     } ]
                  }
               } ],
               "else" : {
                  "type" : "As",
                  "operand" : {
                     "localId" : "624",
                     "locator" : "352:10-352:13",
                     "resultTypeName" : "{urn:hl7-org:elm-types:r1}Any",
                     "type" : "Null"
                  },
                  "asTypeSpecifier" : {
                     "type" : "IntervalTypeSpecifier",
                     "pointType" : {
                        "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                        "type" : "NamedTypeSpecifier"
                     }
                  }
               }
            },
            "operand" : [ {
               "name" : "medication",
               "operandTypeSpecifier" : {
                  "localId" : "605",
                  "locator" : "344:47-347:3",
                  "type" : "ChoiceTypeSpecifier",
                  "resultTypeSpecifier" : {
                     "type" : "ChoiceTypeSpecifier",
                     "choice" : [ {
                        "name" : "{http://hl7.org/fhir}MedicationRequest",
                        "type" : "NamedTypeSpecifier"
                     }, {
                        "name" : "{http://hl7.org/fhir}MedicationDispense",
                        "type" : "NamedTypeSpecifier"
                     }, {
                        "name" : "{http://hl7.org/fhir}MedicationAdministration",
                        "type" : "NamedTypeSpecifier"
                     } ]
                  },
                  "choice" : [ {
                     "localId" : "602",
                     "locator" : "344:54-344:72",
                     "resultTypeName" : "{http://hl7.org/fhir}MedicationRequest",
                     "name" : "{http://hl7.org/fhir}MedicationRequest",
                     "type" : "NamedTypeSpecifier"
                  }, {
                     "localId" : "603",
                     "locator" : "345:5-345:24",
                     "resultTypeName" : "{http://hl7.org/fhir}MedicationDispense",
                     "name" : "{http://hl7.org/fhir}MedicationDispense",
                     "type" : "NamedTypeSpecifier"
                  }, {
                     "localId" : "604",
                     "locator" : "346:5-346:30",
                     "resultTypeName" : "{http://hl7.org/fhir}MedicationAdministration",
                     "name" : "{http://hl7.org/fhir}MedicationAdministration",
                     "type" : "NamedTypeSpecifier"
                  } ]
               }
            } ]
         }, {
            "localId" : "657",
            "locator" : "366:1-382:3",
            "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
            "name" : "CumulativeMedicationDuration",
            "context" : "Patient",
            "accessLevel" : "Public",
            "type" : "FunctionDef",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "657",
                  "s" : [ {
                     "value" : [ "/*We can then use this function, combined with the MedicationDuration functions above\nto calculate Cumulative Medication Duration:\n\nGenerally speaking, we want to _roll out_ intervals from dispense and administration\nevents, and then collapse across that result and intervals from prescriptions.\n\nNote also that the separation of medications by type should already be done\nby this stage as well.\n\nCalculations that combine dosages from different types of medications (such as Morphine Milligram Equivalent (MME)\nor Average MME) require further consideration.*/\n","define function ","\"CumulativeMedicationDuration\"","(","Medications"," " ]
                  }, {
                     "r" : "631",
                     "s" : [ {
                        "value" : [ "List<" ]
                     }, {
                        "r" : "630",
                        "s" : [ {
                           "value" : [ "Choice<" ]
                        }, {
                           "r" : "627",
                           "s" : [ {
                              "value" : [ "\"MedicationRequest\"" ]
                           } ]
                        }, {
                           "value" : [ ",\n    " ]
                        }, {
                           "r" : "628",
                           "s" : [ {
                              "value" : [ "\"MedicationDispense\"" ]
                           } ]
                        }, {
                           "value" : [ ",\n    " ]
                        }, {
                           "r" : "629",
                           "s" : [ {
                              "value" : [ "\"MedicationAdministration\"" ]
                           } ]
                        }, {
                           "value" : [ "\n  >" ]
                        } ]
                     }, {
                        "value" : [ ">" ]
                     } ]
                  }, {
                     "value" : [ " ):\n  " ]
                  }, {
                     "r" : "656",
                     "s" : [ {
                        "r" : "656",
                        "s" : [ {
                           "value" : [ "CumulativeDuration","(" ]
                        }, {
                           "r" : "655",
                           "s" : [ {
                              "r" : "640",
                              "s" : [ {
                                 "value" : [ "(\n      " ]
                              }, {
                                 "r" : "640",
                                 "s" : [ {
                                    "s" : [ {
                                       "r" : "633",
                                       "s" : [ {
                                          "r" : "632",
                                          "s" : [ {
                                             "s" : [ {
                                                "value" : [ "Medications" ]
                                             } ]
                                          } ]
                                       }, {
                                          "value" : [ " ","M" ]
                                       } ]
                                    } ]
                                 }, {
                                    "value" : [ "\n        " ]
                                 }, {
                                    "r" : "636",
                                    "s" : [ {
                                       "value" : [ "where " ]
                                    }, {
                                       "r" : "636",
                                       "s" : [ {
                                          "r" : "634",
                                          "s" : [ {
                                             "value" : [ "M" ]
                                          } ]
                                       }, {
                                          "value" : [ " is " ]
                                       }, {
                                          "r" : "635",
                                          "s" : [ {
                                             "value" : [ "MedicationRequest" ]
                                          } ]
                                       } ]
                                    } ]
                                 }, {
                                    "value" : [ "\n        " ]
                                 }, {
                                    "r" : "639",
                                    "s" : [ {
                                       "value" : [ "return " ]
                                    }, {
                                       "r" : "638",
                                       "s" : [ {
                                          "value" : [ "MedicationPeriod","(" ]
                                       }, {
                                          "r" : "637",
                                          "s" : [ {
                                             "value" : [ "M" ]
                                          } ]
                                       }, {
                                          "value" : [ ")" ]
                                       } ]
                                    } ]
                                 } ]
                              }, {
                                 "value" : [ "\n    )" ]
                              } ]
                           }, {
                              "value" : [ "\n      union " ]
                           }, {
                              "r" : "654",
                              "s" : [ {
                                 "value" : [ "(\n        " ]
                              }, {
                                 "r" : "654",
                                 "s" : [ {
                                    "value" : [ "RolloutIntervals","(\n          " ]
                                 }, {
                                    "r" : "653",
                                    "s" : [ {
                                       "s" : [ {
                                          "r" : "642",
                                          "s" : [ {
                                             "r" : "641",
                                             "s" : [ {
                                                "s" : [ {
                                                   "value" : [ "Medications" ]
                                                } ]
                                             } ]
                                          }, {
                                             "value" : [ " ","M" ]
                                          } ]
                                       } ]
                                    }, {
                                       "value" : [ "\n            " ]
                                    }, {
                                       "r" : "649",
                                       "s" : [ {
                                          "value" : [ "where " ]
                                       }, {
                                          "r" : "649",
                                          "s" : [ {
                                             "r" : "645",
                                             "s" : [ {
                                                "r" : "643",
                                                "s" : [ {
                                                   "value" : [ "M" ]
                                                } ]
                                             }, {
                                                "value" : [ " is " ]
                                             }, {
                                                "r" : "644",
                                                "s" : [ {
                                                   "value" : [ "MedicationDispense" ]
                                                } ]
                                             } ]
                                          }, {
                                             "value" : [ " or " ]
                                          }, {
                                             "r" : "648",
                                             "s" : [ {
                                                "r" : "646",
                                                "s" : [ {
                                                   "value" : [ "M" ]
                                                } ]
                                             }, {
                                                "value" : [ " is " ]
                                             }, {
                                                "r" : "647",
                                                "s" : [ {
                                                   "value" : [ "MedicationAdministration" ]
                                                } ]
                                             } ]
                                          } ]
                                       } ]
                                    }, {
                                       "value" : [ "\n            " ]
                                    }, {
                                       "r" : "652",
                                       "s" : [ {
                                          "value" : [ "return " ]
                                       }, {
                                          "r" : "651",
                                          "s" : [ {
                                             "value" : [ "MedicationPeriod","(" ]
                                          }, {
                                             "r" : "650",
                                             "s" : [ {
                                                "value" : [ "M" ]
                                             } ]
                                          }, {
                                             "value" : [ ")" ]
                                          } ]
                                       } ]
                                    } ]
                                 }, {
                                    "value" : [ "\n        )" ]
                                 } ]
                              }, {
                                 "value" : [ "\n      )" ]
                              } ]
                           } ]
                        }, {
                           "value" : [ "\n  )" ]
                        } ]
                     } ]
                  } ]
               }
            } ],
            "expression" : {
               "localId" : "656",
               "locator" : "370:3-382:3",
               "resultTypeName" : "{urn:hl7-org:elm-types:r1}Integer",
               "name" : "CumulativeDuration",
               "type" : "FunctionRef",
               "operand" : [ {
                  "localId" : "655",
                  "locator" : "370:22-381:7",
                  "type" : "Union",
                  "resultTypeSpecifier" : {
                     "type" : "ListTypeSpecifier",
                     "elementType" : {
                        "type" : "IntervalTypeSpecifier",
                        "pointType" : {
                           "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                           "type" : "NamedTypeSpecifier"
                        }
                     }
                  },
                  "operand" : [ {
                     "localId" : "640",
                     "locator" : "370:22-374:5",
                     "type" : "Query",
                     "resultTypeSpecifier" : {
                        "type" : "ListTypeSpecifier",
                        "elementType" : {
                           "type" : "IntervalTypeSpecifier",
                           "pointType" : {
                              "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                              "type" : "NamedTypeSpecifier"
                           }
                        }
                     },
                     "source" : [ {
                        "localId" : "633",
                        "locator" : "371:7-371:19",
                        "alias" : "M",
                        "resultTypeSpecifier" : {
                           "type" : "ListTypeSpecifier",
                           "elementType" : {
                              "type" : "ChoiceTypeSpecifier",
                              "choice" : [ {
                                 "name" : "{http://hl7.org/fhir}MedicationRequest",
                                 "type" : "NamedTypeSpecifier"
                              }, {
                                 "name" : "{http://hl7.org/fhir}MedicationDispense",
                                 "type" : "NamedTypeSpecifier"
                              }, {
                                 "name" : "{http://hl7.org/fhir}MedicationAdministration",
                                 "type" : "NamedTypeSpecifier"
                              } ]
                           }
                        },
                        "expression" : {
                           "localId" : "632",
                           "locator" : "371:7-371:17",
                           "name" : "Medications",
                           "type" : "OperandRef",
                           "resultTypeSpecifier" : {
                              "type" : "ListTypeSpecifier",
                              "elementType" : {
                                 "type" : "ChoiceTypeSpecifier",
                                 "choice" : [ {
                                    "name" : "{http://hl7.org/fhir}MedicationRequest",
                                    "type" : "NamedTypeSpecifier"
                                 }, {
                                    "name" : "{http://hl7.org/fhir}MedicationDispense",
                                    "type" : "NamedTypeSpecifier"
                                 }, {
                                    "name" : "{http://hl7.org/fhir}MedicationAdministration",
                                    "type" : "NamedTypeSpecifier"
                                 } ]
                              }
                           }
                        }
                     } ],
                     "relationship" : [ ],
                     "where" : {
                        "localId" : "636",
                        "locator" : "372:9-372:36",
                        "resultTypeName" : "{urn:hl7-org:elm-types:r1}Boolean",
                        "type" : "Is",
                        "operand" : {
                           "localId" : "634",
                           "locator" : "372:15",
                           "name" : "M",
                           "type" : "AliasRef",
                           "resultTypeSpecifier" : {
                              "type" : "ChoiceTypeSpecifier",
                              "choice" : [ {
                                 "name" : "{http://hl7.org/fhir}MedicationRequest",
                                 "type" : "NamedTypeSpecifier"
                              }, {
                                 "name" : "{http://hl7.org/fhir}MedicationDispense",
                                 "type" : "NamedTypeSpecifier"
                              }, {
                                 "name" : "{http://hl7.org/fhir}MedicationAdministration",
                                 "type" : "NamedTypeSpecifier"
                              } ]
                           }
                        },
                        "isTypeSpecifier" : {
                           "localId" : "635",
                           "locator" : "372:20-372:36",
                           "resultTypeName" : "{http://hl7.org/fhir}MedicationRequest",
                           "name" : "{http://hl7.org/fhir}MedicationRequest",
                           "type" : "NamedTypeSpecifier"
                        }
                     },
                     "return" : {
                        "localId" : "639",
                        "locator" : "373:9-373:34",
                        "resultTypeSpecifier" : {
                           "type" : "ListTypeSpecifier",
                           "elementType" : {
                              "type" : "IntervalTypeSpecifier",
                              "pointType" : {
                                 "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                                 "type" : "NamedTypeSpecifier"
                              }
                           }
                        },
                        "expression" : {
                           "localId" : "638",
                           "locator" : "373:16-373:34",
                           "name" : "MedicationPeriod",
                           "type" : "FunctionRef",
                           "resultTypeSpecifier" : {
                              "type" : "IntervalTypeSpecifier",
                              "pointType" : {
                                 "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                                 "type" : "NamedTypeSpecifier"
                              }
                           },
                           "operand" : [ {
                              "localId" : "637",
                              "locator" : "373:33",
                              "name" : "M",
                              "type" : "AliasRef",
                              "resultTypeSpecifier" : {
                                 "type" : "ChoiceTypeSpecifier",
                                 "choice" : [ {
                                    "name" : "{http://hl7.org/fhir}MedicationRequest",
                                    "type" : "NamedTypeSpecifier"
                                 }, {
                                    "name" : "{http://hl7.org/fhir}MedicationDispense",
                                    "type" : "NamedTypeSpecifier"
                                 }, {
                                    "name" : "{http://hl7.org/fhir}MedicationAdministration",
                                    "type" : "NamedTypeSpecifier"
                                 } ]
                              }
                           } ]
                        }
                     }
                  }, {
                     "localId" : "654",
                     "locator" : "375:13-381:7",
                     "name" : "RolloutIntervals",
                     "type" : "FunctionRef",
                     "resultTypeSpecifier" : {
                        "type" : "ListTypeSpecifier",
                        "elementType" : {
                           "type" : "IntervalTypeSpecifier",
                           "pointType" : {
                              "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                              "type" : "NamedTypeSpecifier"
                           }
                        }
                     },
                     "operand" : [ {
                        "localId" : "653",
                        "locator" : "377:11-379:38",
                        "type" : "Query",
                        "resultTypeSpecifier" : {
                           "type" : "ListTypeSpecifier",
                           "elementType" : {
                              "type" : "IntervalTypeSpecifier",
                              "pointType" : {
                                 "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                                 "type" : "NamedTypeSpecifier"
                              }
                           }
                        },
                        "source" : [ {
                           "localId" : "642",
                           "locator" : "377:11-377:23",
                           "alias" : "M",
                           "resultTypeSpecifier" : {
                              "type" : "ListTypeSpecifier",
                              "elementType" : {
                                 "type" : "ChoiceTypeSpecifier",
                                 "choice" : [ {
                                    "name" : "{http://hl7.org/fhir}MedicationRequest",
                                    "type" : "NamedTypeSpecifier"
                                 }, {
                                    "name" : "{http://hl7.org/fhir}MedicationDispense",
                                    "type" : "NamedTypeSpecifier"
                                 }, {
                                    "name" : "{http://hl7.org/fhir}MedicationAdministration",
                                    "type" : "NamedTypeSpecifier"
                                 } ]
                              }
                           },
                           "expression" : {
                              "localId" : "641",
                              "locator" : "377:11-377:21",
                              "name" : "Medications",
                              "type" : "OperandRef",
                              "resultTypeSpecifier" : {
                                 "type" : "ListTypeSpecifier",
                                 "elementType" : {
                                    "type" : "ChoiceTypeSpecifier",
                                    "choice" : [ {
                                       "name" : "{http://hl7.org/fhir}MedicationRequest",
                                       "type" : "NamedTypeSpecifier"
                                    }, {
                                       "name" : "{http://hl7.org/fhir}MedicationDispense",
                                       "type" : "NamedTypeSpecifier"
                                    }, {
                                       "name" : "{http://hl7.org/fhir}MedicationAdministration",
                                       "type" : "NamedTypeSpecifier"
                                    } ]
                                 }
                              }
                           }
                        } ],
                        "relationship" : [ ],
                        "where" : {
                           "localId" : "649",
                           "locator" : "378:13-378:74",
                           "resultTypeName" : "{urn:hl7-org:elm-types:r1}Boolean",
                           "type" : "Or",
                           "operand" : [ {
                              "localId" : "645",
                              "locator" : "378:19-378:41",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Boolean",
                              "type" : "Is",
                              "operand" : {
                                 "localId" : "643",
                                 "locator" : "378:19",
                                 "name" : "M",
                                 "type" : "AliasRef",
                                 "resultTypeSpecifier" : {
                                    "type" : "ChoiceTypeSpecifier",
                                    "choice" : [ {
                                       "name" : "{http://hl7.org/fhir}MedicationRequest",
                                       "type" : "NamedTypeSpecifier"
                                    }, {
                                       "name" : "{http://hl7.org/fhir}MedicationDispense",
                                       "type" : "NamedTypeSpecifier"
                                    }, {
                                       "name" : "{http://hl7.org/fhir}MedicationAdministration",
                                       "type" : "NamedTypeSpecifier"
                                    } ]
                                 }
                              },
                              "isTypeSpecifier" : {
                                 "localId" : "644",
                                 "locator" : "378:24-378:41",
                                 "resultTypeName" : "{http://hl7.org/fhir}MedicationDispense",
                                 "name" : "{http://hl7.org/fhir}MedicationDispense",
                                 "type" : "NamedTypeSpecifier"
                              }
                           }, {
                              "localId" : "648",
                              "locator" : "378:46-378:74",
                              "resultTypeName" : "{urn:hl7-org:elm-types:r1}Boolean",
                              "type" : "Is",
                              "operand" : {
                                 "localId" : "646",
                                 "locator" : "378:46",
                                 "name" : "M",
                                 "type" : "AliasRef",
                                 "resultTypeSpecifier" : {
                                    "type" : "ChoiceTypeSpecifier",
                                    "choice" : [ {
                                       "name" : "{http://hl7.org/fhir}MedicationRequest",
                                       "type" : "NamedTypeSpecifier"
                                    }, {
                                       "name" : "{http://hl7.org/fhir}MedicationDispense",
                                       "type" : "NamedTypeSpecifier"
                                    }, {
                                       "name" : "{http://hl7.org/fhir}MedicationAdministration",
                                       "type" : "NamedTypeSpecifier"
                                    } ]
                                 }
                              },
                              "isTypeSpecifier" : {
                                 "localId" : "647",
                                 "locator" : "378:51-378:74",
                                 "resultTypeName" : "{http://hl7.org/fhir}MedicationAdministration",
                                 "name" : "{http://hl7.org/fhir}MedicationAdministration",
                                 "type" : "NamedTypeSpecifier"
                              }
                           } ]
                        },
                        "return" : {
                           "localId" : "652",
                           "locator" : "379:13-379:38",
                           "resultTypeSpecifier" : {
                              "type" : "ListTypeSpecifier",
                              "elementType" : {
                                 "type" : "IntervalTypeSpecifier",
                                 "pointType" : {
                                    "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                                    "type" : "NamedTypeSpecifier"
                                 }
                              }
                           },
                           "expression" : {
                              "localId" : "651",
                              "locator" : "379:20-379:38",
                              "name" : "MedicationPeriod",
                              "type" : "FunctionRef",
                              "resultTypeSpecifier" : {
                                 "type" : "IntervalTypeSpecifier",
                                 "pointType" : {
                                    "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                                    "type" : "NamedTypeSpecifier"
                                 }
                              },
                              "operand" : [ {
                                 "localId" : "650",
                                 "locator" : "379:37",
                                 "name" : "M",
                                 "type" : "AliasRef",
                                 "resultTypeSpecifier" : {
                                    "type" : "ChoiceTypeSpecifier",
                                    "choice" : [ {
                                       "name" : "{http://hl7.org/fhir}MedicationRequest",
                                       "type" : "NamedTypeSpecifier"
                                    }, {
                                       "name" : "{http://hl7.org/fhir}MedicationDispense",
                                       "type" : "NamedTypeSpecifier"
                                    }, {
                                       "name" : "{http://hl7.org/fhir}MedicationAdministration",
                                       "type" : "NamedTypeSpecifier"
                                    } ]
                                 }
                              } ]
                           }
                        }
                     } ]
                  } ]
               } ]
            },
            "operand" : [ {
               "name" : "Medications",
               "operandTypeSpecifier" : {
                  "localId" : "631",
                  "locator" : "366:60-369:4",
                  "type" : "ListTypeSpecifier",
                  "resultTypeSpecifier" : {
                     "type" : "ListTypeSpecifier",
                     "elementType" : {
                        "type" : "ChoiceTypeSpecifier",
                        "choice" : [ {
                           "name" : "{http://hl7.org/fhir}MedicationRequest",
                           "type" : "NamedTypeSpecifier"
                        }, {
                           "name" : "{http://hl7.org/fhir}MedicationDispense",
                           "type" : "NamedTypeSpecifier"
                        }, {
                           "name" : "{http://hl7.org/fhir}MedicationAdministration",
                           "type" : "NamedTypeSpecifier"
                        } ]
                     }
                  },
                  "elementType" : {
                     "localId" : "630",
                     "locator" : "366:65-369:3",
                     "type" : "ChoiceTypeSpecifier",
                     "resultTypeSpecifier" : {
                        "type" : "ChoiceTypeSpecifier",
                        "choice" : [ {
                           "name" : "{http://hl7.org/fhir}MedicationRequest",
                           "type" : "NamedTypeSpecifier"
                        }, {
                           "name" : "{http://hl7.org/fhir}MedicationDispense",
                           "type" : "NamedTypeSpecifier"
                        }, {
                           "name" : "{http://hl7.org/fhir}MedicationAdministration",
                           "type" : "NamedTypeSpecifier"
                        } ]
                     },
                     "choice" : [ {
                        "localId" : "627",
                        "locator" : "366:72-366:90",
                        "resultTypeName" : "{http://hl7.org/fhir}MedicationRequest",
                        "name" : "{http://hl7.org/fhir}MedicationRequest",
                        "type" : "NamedTypeSpecifier"
                     }, {
                        "localId" : "628",
                        "locator" : "367:5-367:24",
                        "resultTypeName" : "{http://hl7.org/fhir}MedicationDispense",
                        "name" : "{http://hl7.org/fhir}MedicationDispense",
                        "type" : "NamedTypeSpecifier"
                     }, {
                        "localId" : "629",
                        "locator" : "368:5-368:30",
                        "resultTypeName" : "{http://hl7.org/fhir}MedicationAdministration",
                        "name" : "{http://hl7.org/fhir}MedicationAdministration",
                        "type" : "NamedTypeSpecifier"
                     } ]
                  }
               }
            } ]
         } ]
      }
   }
}

